System.register("chunks:///_virtual/adProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./gameLogic.ts","./uiManager.ts"],(function(e){var t,n,i,a,r,c,o,l,s,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,o=e.Component},function(e){l=e.constants},function(e){s=e.GameLogic},function(e){u=e.uiManager}],execute:function(){var p,f,d,h,b,R;r._RF.push({},"b82eaehqfxOHIyJ+LFuGZ1c","adProp",void 0);var A=c.ccclass,g=c.property;e("AdProp",A("AdProp")((d=t((f=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"imgAd",d,a(t)),i(t,"imgShare",h,a(t)),i(t,"ndBtnGoStart",b,a(t)),i(t,"spBtn",R,a(t)),t.callback=void 0,t.rewardType=void 0,t}n(t,e);var r=t.prototype;return r.show=function(e){var t=this;this.callback=e,this.rewardType=l.OPEN_REWARD_TYPE.AD,s.instance.getOpenRewardType(l.SHARE_FUNCTION.START_REWARD,(function(e,n){if(!e)switch(t.rewardType=n,n){case l.OPEN_REWARD_TYPE.AD:t.spBtn.spriteFrame=t.imgAd;break;case l.OPEN_REWARD_TYPE.SHARE:t.spBtn.spriteFrame=t.imgShare;break;case l.OPEN_REWARD_TYPE.NULL:t.onBtnCloseClick()}})),this.ndBtnGoStart.active=!1,this.scheduleOnce((function(){t.ndBtnGoStart.active=!0}),l.NORMAL_SHOW_TIME)},r.onBtnCloseClick=function(){this.callback&&this.callback("close"),this.close()},r.onBtnPlayClick=function(){var e=this;this.rewardType===l.OPEN_REWARD_TYPE.AD?s.instance.showRewardAd((function(t){t?e.callback&&e.callback("failed",t):(e.close(),e.callback&&e.callback(null))})):s.instance.share(l.SHARE_FUNCTION.START_REWARD,{},(function(t){t||e.close(),e.callback&&e.callback(t)}))},r.close=function(){u.instance.hideDialog("fight/adProp")},t}(o)).prototype,"imgAd",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=t(f.prototype,"imgShare",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(f.prototype,"ndBtnGoStart",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(f.prototype,"spBtn",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/adStep.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./playerData.ts","./uiManager.ts","./constants.ts","./adStepItem.ts"],(function(n){var t,e,i,a,r,l,o,c,s,u,p,d,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){r=n.cclegacy,l=n._decorator,o=n.instantiate,c=n.Component},function(n){s=n.GameLogic},function(n){u=n.playerData},function(n){p=n.uiManager},function(n){d=n.constants},function(n){f=n.AdStepItem}],execute:function(){var b,g,h,A,m,y,S,R;r._RF.push({},"85a6dBiKRxKkILjS8dfOBYF","adStep",void 0);var v=l.ccclass,E=l.property;n("AdStep",v("AdStep")((h=t((g=function(n){function t(){for(var t,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return t=n.call.apply(n,[this].concat(r))||this,i(t,"ndContent",h,a(t)),i(t,"pbAdStepItem",A,a(t)),i(t,"imgAd",m,a(t)),i(t,"imgShare",y,a(t)),i(t,"spBtn",S,a(t)),i(t,"ndBtnPlayAgain",R,a(t)),t.callback=void 0,t.rewardType=void 0,t}e(t,n);var r=t.prototype;return r.show=function(n){var t=this;this.callback=n,s.instance.getOpenRewardType(d.SHARE_FUNCTION.LACK_STEP,(function(n,e){if(!n)switch(t.rewardType=e,e){case d.OPEN_REWARD_TYPE.AD:t.spBtn.spriteFrame=t.imgAd;break;case d.OPEN_REWARD_TYPE.SHARE:t.spBtn.spriteFrame=t.imgShare;break;case d.OPEN_REWARD_TYPE.NULL:t.onBtnCloseClick()}}));var e=u.instance.dictTargets;for(var i in this.ndContent.removeAllChildren(),e){var a={name:i,num:e[i]},r=o(this.pbAdStepItem);r.parent=this.ndContent,r.getComponent(f).setInfo(a)}this.ndBtnPlayAgain.active=!1,this.scheduleOnce((function(){t.ndBtnPlayAgain.active=!0}),d.NORMAL_SHOW_TIME)},r.onBtnCloseClick=function(){this.callback&&this.callback("close"),this.close()},r.onBtnPlayClick=function(){var n=this;this.rewardType===d.OPEN_REWARD_TYPE.AD?s.instance.showRewardAd((function(t){t||(n.close(),n.callback&&n.callback(null))})):s.instance.share(d.SHARE_FUNCTION.START_REWARD,{},(function(t){t||(n.close(),n.callback&&n.callback(t))}))},r.close=function(){p.instance.hideDialog("fight/adStep")},r.onBtnPlayAgain=function(){this.close(),s.instance.resetLevel()},t}(c)).prototype,"ndContent",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(g.prototype,"pbAdStepItem",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"imgAd",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"imgShare",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(g.prototype,"spBtn",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(g.prototype,"ndBtnPlayAgain",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/adStepItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){var n,t,r,i,o,c,u,a;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){o=e.cclegacy,c=e._decorator,u=e.Component},function(e){a=e.resourceUtil}],execute:function(){var l,s,p,f,m;o._RF.push({},"7bc1e52TulKuq/projnBb/o","adStepItem",void 0);var I=c.ccclass,d=c.property;e("AdStepItem",I("AdStepItem")((p=n((s=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return n=e.call.apply(e,[this].concat(o))||this,r(n,"spPropIcon",p,i(n)),r(n,"lbPropNum",f,i(n)),r(n,"ndFinishedIcon",m,i(n)),n.cakeInfo=void 0,n}return t(n,e),n.prototype.setInfo=function(e){this.cakeInfo=e,a.setCakeIcon(e.name,this.spPropIcon,(function(){})),this.lbPropNum.string=e.num?e.num:"",this.ndFinishedIcon.active=!e.num,e.num>0?this.spPropIcon.grayscale=!1:this.spPropIcon.grayscale=!0},n}(u)).prototype,"spPropIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=n(s.prototype,"lbPropNum",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(s.prototype,"ndFinishedIcon",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=s))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/animationUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./loadsh.ts"],(function(i){var n,t,e,a,o,s,l,r,c,m,u;return{setters:[function(i){n=i.applyDecoratedDescriptor,t=i.inheritsLoose,e=i.initializerDefineProperty,a=i.assertThisInitialized},function(i){o=i.cclegacy,s=i._decorator,l=i.Animation,r=i.AnimationClip,c=i.Component},function(i){m=i.clientEvent},function(i){u=i.loadsh}],execute:function(){var b,h,p,d,f,A,v,y;o._RF.push({},"4deb69dGUBOpb+oc1zl98nw","animationUI",void 0);var g=s.ccclass,E=s.property;i("AnimationUI",g("AnimationUI")((p=n((h=function(i){function n(){for(var n,t=arguments.length,o=new Array(t),s=0;s<t;s++)o[s]=arguments[s];return n=i.call.apply(i,[this].concat(o))||this,e(n,"isPlayEnableAnimation",p,a(n)),e(n,"enableAnimationName",d,a(n)),e(n,"isPlayDisableAnimation",f,a(n)),e(n,"disableAnimationName",A,a(n)),e(n,"disableAnimationReverse",v,a(n)),e(n,"disableAnimationSpeed",y,a(n)),n.animation=void 0,n.clips=void 0,n.disableAnimationWrapMode=void 0,n.disableAnimationDefaultSpeed=void 0,n.closeCallback=void 0,n}t(n,i);var o=n.prototype;return o.onLoad=function(){if(this.animation=this.node.getComponent(l),this.animation){this.clips=this.animation.clips;var i=this.isAnimationExist(this.disableAnimationName);i&&(this.disableAnimationWrapMode=r.WrapMode.Default,this.disableAnimationDefaultSpeed=i.speed)}},o.onEnable=function(){this.animation&&this.isPlayEnableAnimation&&this.isAnimationExist(this.enableAnimationName)&&(this.animation.getState(this.enableAnimationName).wrapMode=r.WrapMode.Default,this.animation.play(this.enableAnimationName))},o.close=function(i){if(this.closeCallback=i,this.animation){var n=this.isAnimationExist(this.disableAnimationName);this.isPlayDisableAnimation&&n?(this.animation.once(l.EventType.FINISHED,this.closeFinish,this),this.animation.play(this.disableAnimationName),this.disableAnimationReverse&&(this.animation.getState(this.disableAnimationName).wrapMode=r.WrapMode.Reverse)):this.closeFinish()}else this.closeFinish()},o.closeFinish=function(){this.closeCallback?this.closeCallback():this.node.active=!1},o.isAnimationExist=function(i){return u.find(this.clips,(function(n){return n.name===i}))},o.clickFinish=function(i){m.dispatchEvent("finishClickAnimation",i)},n}(c)).prototype,"isPlayEnableAnimation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=n(h.prototype,"enableAnimationName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=n(h.prototype,"isPlayDisableAnimation",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=n(h.prototype,"disableAnimationName",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=n(h.prototype,"disableAnimationReverse",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=n(h.prototype,"disableAnimationSpeed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=h))||b);o._RF.pop()}}}));

System.register("chunks:///_virtual/audioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./storageManager.ts","./resourceUtil.ts","./loadsh.ts"],(function(o){var s,i,t,u,e,n,a,r,c,d,l;return{setters:[function(o){s=o.createClass},function(o){i=o.cclegacy,t=o._decorator,u=o.Node,e=o.director,n=o.game,a=o.AudioSource,r=o.AudioClip},function(o){c=o.StorageManager},function(o){d=o.resourceUtil},function(o){l=o.loadsh}],execute:function(){var h,f;i._RF.push({},"5e2ecZFEJFEHoCgx6lXVYHB","audioManager",void 0);var p=t.ccclass;t.property,o("AudioManager",p("AudioManager")(((f=function(){function o(){this._persistRootNode=null,this._audioSources=[],this.dictWeaponSoundIndex={},this.musicVolume=.8,this.soundVolume=1,this.audios={},this.arrSound=[]}var i=o.prototype;return i.init=function(){this._persistRootNode||(this._persistRootNode=new u("audio"),e.getScene().addChild(this._persistRootNode),n.addPersistRootNode(this._persistRootNode),this.musicVolume=this.getAudioSetting(!0)?.8:0,this.soundVolume=this.getAudioSetting(!1)?1:0)},i._getAudioSource=function(o){for(var s,i=0;i<this._audioSources.length;++i){var t=this._audioSources[i];if(!t.playing){s=t;break}}return s||(s=this._persistRootNode.addComponent(a),this._audioSources.push(s)),s.node.off(a.EventType.ENDED),s.clip=o,s.currentTime=0,s},i.getAudioSetting=function(o){var s;return!(s=o?c.instance.getGlobalData("music"):c.instance.getGlobalData("sound"))||"true"===s},i.playMusic=function(o,s){var i=this,t="audio/music/"+o;d.loadRes(t,r,(function(t,u){var e=i._getAudioSource(u),n={source:e,isMusic:!0};i.audios[o]=n,e.volume=i.musicVolume,e.loop=s,e.play()}))},i.playSound=function(o,s){var i=this;if(void 0===s&&(s=!1),this.soundVolume){d.loadRes("audio/sound/"+o,r,(function(t,u){var e=i._getAudioSource(u),n={source:e,isMusic:!1};i.arrSound.push(n),s&&(i.audios[o]=n),e.volume=i.soundVolume,e.loop=s,e.play(),e.node.on(a.EventType.ENDED,(function(){l.remove(i.arrSound,(function(o){return o.source===n.source}))}))}))}},i.stop=function(o){this.audios.hasOwnProperty(o)&&this.audios[o].source.stop()},i.stopAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.stop()}},i.getMusicVolume=function(){return this.musicVolume},i.setMusic=function(o){for(var s in this.musicVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&this.audios[s].isMusic)this.audios[s].source.volume=this.musicVolume}},i.pauseAll=function(){for(var o in console.log("pause all music!!!"),this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.pause()}},i.resumeAll=function(){for(var o in this.audios){if(this.audios.hasOwnProperty(o))this.audios[o].source.play()}},i.openMusic=function(){this.setMusic(.8),c.instance.setGlobalData("music","true")},i.closeMusic=function(){this.setMusic(0),c.instance.setGlobalData("music","false")},i.openSound=function(){this.setSound(1),c.instance.setGlobalData("sound","true")},i.closeSound=function(){this.setSound(0),c.instance.setGlobalData("sound","false")},i.setSound=function(o){for(var s in this.soundVolume=o,this.audios){if(this.audios.hasOwnProperty(s)&&!this.audios[s].isMusic)this.audios[s].source.volume=this.soundVolume}for(var i=0;i<this.arrSound.length;i++){this.arrSound[i].source.volume=this.soundVolume}},i.stopSingleSound=function(o){this.audios.hasOwnProperty(o)&&!this.audios[o].isMusic&&this.audios[o].source.stop()},s(o,null,[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}())._instance=void 0,h=f))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/balance.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./LanguageData.ts","./gameLogic.ts","./constants.ts","./audioManager.ts","./clientEvent.ts","./sceneManager.ts","./uiManager.ts"],(function(t){var e,n,i,a,r,o,s,l,c,u,h,b,f,p,d,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Animation,l=t.Component},function(t){c=t.playerData},function(t){u=t.t},function(t){h=t.GameLogic},function(t){b=t.constants},function(t){f=t.AudioManager},function(t){p=t.clientEvent},function(t){d=t.SceneManager},function(t){v=t.uiManager}],execute:function(){var g,S,A,E,y,L,m,w,N,D,R,_,T,B;r._RF.push({},"22cecTzEh5L6o8yC7/SYP4X","balance",void 0);var I=o.ccclass,C=o.property;t("Balance",I("Balance")((A=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"lbLevel",A,a(e)),i(e,"lbScore",E,a(e)),i(e,"lbHighest",y,a(e)),i(e,"lbGold",L,a(e)),i(e,"arrStar",m,a(e)),i(e,"arrStarLight",w,a(e)),i(e,"ndBtnDouble",N,a(e)),i(e,"spBtnDouble",D,a(e)),i(e,"ani",R,a(e)),i(e,"aniGold",_,a(e)),i(e,"sfAd",T,a(e)),i(e,"sfShare",B,a(e)),e.isFirstInvite=void 0,e.goldNum=void 0,e.isOver=void 0,e.soundStar=void 0,e.openRewardType=void 0,e}n(e,t);var r=e.prototype;return r.show=function(){var t=this;this.aniGold.node.active=!0,this.isFirstInvite=!1;var e=c.instance.finishLevel(c.instance.level,c.instance.score);c.instance.getCurrentLevel().ID;this.goldNum=e.gold,this.isOver=!1,this.lbGold.string=e.gold.toString(),this.lbLevel.string=e.levelId,this.lbScore.string=e.score,this.lbHighest.string=u("fight.highest")+c.instance.getHighestScoreByLevel(e.levelId),this.soundStar=0;c.instance.arrStars;this.arrStar[0].active=e.star>0,this.arrStarLight[0].active=e.star>0,this.arrStar[1].active=e.star>1,this.arrStarLight[1].active=e.star>1,this.arrStar[2].active=e.star>2,this.arrStarLight[2].active=e.star>2,this.ani.play("balanceShow"),this.ani.once(s.EventType.FINISHED,(function(){t.ani.play("balanceIdle")}),this),this.goldNum>0?h.instance.getOpenRewardType(b.SHARE_FUNCTION.FILL_SIGN,(function(e,n){if(e)t.close();else switch(t.openRewardType=n,n){case b.OPEN_REWARD_TYPE.AD:t.ndBtnDouble.active=!0,t.spBtnDouble.spriteFrame=t.sfAd,t.aniGold.play();break;case b.OPEN_REWARD_TYPE.SHARE:t.ndBtnDouble.active=!0,t.aniGold.play(),t.spBtnDouble.spriteFrame=t.sfShare;break;case b.OPEN_REWARD_TYPE.NULL:t.ndBtnDouble.active=!1}})):this.ndBtnDouble.active=!1},r.onShowStar=function(){this.arrStar[this.soundStar].active&&f.instance.playSound(b.AUDIO_SOUND.FINISH_STAR,!1),this.soundStar++},r.onDisable=function(){},r.onBtnNextClick=function(){"undefined"!=typeof Ads&&Ads.interstitial(),h.instance.customEventStatistics(b.ANALYTICS_TYPE.BALANCE_NEXT),this.isOver||(this.isOver=!0,c.instance.nextLevel(),this.close(),p.dispatchEvent("newLevel"))},r.onBtnRetryClick=function(){this.close(),h.instance.customEventStatistics(b.ANALYTICS_TYPE.BALANCE_PLAY_AGAIN),h.instance.resetLevel()},r.onBtnCloseClick=function(){h.instance.customEventStatistics(b.ANALYTICS_TYPE.BALANCE_CLOSE),this.close(),d.instance.loadScene("pve",[],(function(t,e){t&&console.error(t.message||t)}))},r.onBtnDoubleClick=function(){var t=this;this.openRewardType===b.OPEN_REWARD_TYPE.SHARE?(h.instance.share(b.SHARE_FUNCTION.BALANCE,{},(function(e){e||t.showReward()})),h.instance.customEventStatistics(b.ANALYTICS_TYPE.BALANCE_SHARE)):h.instance.showRewardAd((function(e){e||t.showReward()}))},r.showReward=function(){if(!this.isFirstInvite){this.isFirstInvite=!0;var t={};t.itemType=b.REWARD_TYPE.GOLD,t.itemSubType=0,t.itemAmount=this.goldNum,this.aniGold.node.active=!1,v.instance.showDialog("lottery/reward",[t,!1,b.SHARE_FUNCTION.BALANCE])}},r.close=function(){v.instance.hideDialog("fight/balance")},e}(l)).prototype,"lbLevel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"lbScore",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(S.prototype,"lbHighest",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(S.prototype,"lbGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(S.prototype,"arrStar",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(S.prototype,"arrStarLight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=e(S.prototype,"ndBtnDouble",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"spBtnDouble",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"ani",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(S.prototype,"aniGold",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(S.prototype,"sfAd",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"sfShare",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S))||g);r._RF.pop()}}}));

System.register("chunks:///_virtual/balanceFailed.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./uiManager.ts","./gameLogic.ts","./sceneManager.ts"],(function(e){var n,i,t,a,l,r,c,o,s,u,f;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){l=e.cclegacy,r=e._decorator,c=e.Component},function(e){o=e.playerData},function(e){s=e.uiManager},function(e){u=e.GameLogic},function(e){f=e.SceneManager}],execute:function(){var p,g,d;l._RF.push({},"e4928/nKARPlqGf+IiCXcgK","balanceFailed",void 0);var h=r.ccclass,v=r.property;e("BalanceFailed",h("BalanceFailed")((d=n((g=function(e){function n(){for(var n,i=arguments.length,l=new Array(i),r=0;r<i;r++)l[r]=arguments[r];return n=e.call.apply(e,[this].concat(l))||this,t(n,"lbLevel",d,a(n)),n}i(n,e);var l=n.prototype;return l.show=function(){this.lbLevel.string=o.instance.level},l.onBtnRetryClick=function(){"undefined"!=typeof Ads&&Ads.interstitial(),s.instance.hideDialog("fight/balanceFailed"),u.instance.resetLevel()},l.onBtnCloseClick=function(){s.instance.hideDialog("fight/balanceFailed"),f.instance.loadScene("pve",[],(function(e,n){e&&console.error(e.message||e)}))},n}(c)).prototype,"lbLevel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p);l._RF.pop()}}}));

System.register("chunks:///_virtual/buttonEx.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./constants.ts"],(function(e){var t,n,i,r,o,a,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Button},function(e){u=e.AudioManager},function(e){s=e.constants}],execute:function(){var l,p,f,d,y;o._RF.push({},"e122fG1ssFILIO3WiAvp7JK","buttonEx",void 0);var b=a.ccclass,v=a.property;e("ButtonEx",b("ButtonEx")((f=t((p=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"isPreventSecondClick",f,r(t)),i(t,"preventTime",d,r(t)),i(t,"isPlaySound",y,r(t)),t}return n(t,e),t.prototype.start=function(){var e=this,t=this.node.getComponent(c);this.node.on("click",(function(n){e.isPreventSecondClick&&(t.interactable=!1,e.scheduleOnce((function(){t.node&&(t.interactable=!0)}),e.preventTime)),e.isPlaySound&&u.instance.playSound(s.AUDIO_SOUND.CLICK,!1)}),this)},t}(c)).prototype,"isPreventSecondClick",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=t(p.prototype,"preventTime",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),y=t(p.prototype,"isPlaySound",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=p))||l);o._RF.pop()}}}));

System.register("chunks:///_virtual/buy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./localConfig.ts","./LanguageData.ts","./playerData.ts","./resourceUtil.ts","./constants.ts","./gameLogic.ts","./utils.ts","./uiManager.ts"],(function(t){var e,i,n,o,r,l,u,a,s,c,p,d,b,f,h,y,g,m,I,B,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,u=t.Node,a=t.Widget,s=t.sys,c=t.Color,p=t.Animation,d=t.Component},function(t){b=t.clientEvent},function(t){f=t.localConfig},function(t){h=t.t},function(t){y=t.playerData},function(t){g=t.resourceUtil},function(t){m=t.constants},function(t){I=t.GameLogic},function(t){B=t.utils},function(t){A=t.uiManager}],execute:function(){var T,v,w,N,E,P,_,D,R,G,z,S,C,F,L,M,k,O;r._RF.push({},"1f6e9kNl7VAkLVmkwCJLBL2","buy",void 0);var U=l.ccclass,H=l.property;t("Buy",(T=U("Buy"),v=H(u),T((E=e((N=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r))||this,n(e,"lbTitle",E,o(e)),n(e,"lbNum",P,o(e)),n(e,"lbDesc",_,o(e)),n(e,"lbGold",D,o(e)),n(e,"lbGoldNum",R,o(e)),n(e,"lbAd",G,o(e)),n(e,"spProp",z,o(e)),n(e,"spAdIcon",S,o(e)),n(e,"btnBuy",C,o(e)),n(e,"nodeBtnBuy",F,o(e)),n(e,"nodeBtnAd",L,o(e)),n(e,"imgShare",M,o(e)),n(e,"imgAd",k,o(e)),n(e,"wrapper",O,o(e)),e.propId=void 0,e.eventType=void 0,e.countPerBuy=void 0,e.propNum=void 0,e.cost=void 0,e.getPropType=void 0,e}i(e,t);var r=e.prototype;return r.onLoad=function(){var t,e=null==(t=this.wrapper)?void 0:t.getComponent(a);if(s.isMobile){if(!e)return;e.isAlignLeft=!0,e.isAlignRight=!0,e.isAlignBottom=!0,e.isAlignTop=!0}else{if(!e)return;e.isAlignLeft=!1,e.isAlignRight=!1,e.isAlignBottom=!1,e.isAlignTop=!1}},r.onEnable=function(){b.on("updateGold",this.updateGold,this),b.on("updateInfiniteShareTimes",this.updateBuyBtn,this)},r.onDisable=function(){b.off("updateGold",this.updateGold,this),b.off("updateInfiniteShareTimes",this.updateBuyBtn,this)},r.showBuy=function(t){this.nodeBtnBuy.active=t,this.nodeBtnAd.active=!t},r.show=function(t,e){this.propId=t,this.eventType=e;var i=f.instance.queryByID("prop",t);if(!i)return console.error("prop was error!",t),void this.close();this.countPerBuy=i.countPerBuy,this.lbTitle.string=h("table_prop."+i.name),this.propNum=i.countPerBuy,this.lbNum.string="X "+this.propNum,this.lbDesc.string=h("table_prop."+i.desc),this.cost=i.countPerBuy*i.price,this.lbGold.string=this.cost,this.cost>y.instance.getGold()?(this.btnBuy.interactable=!1,this.lbGold.color=c.RED):(this.btnBuy.interactable=!0,this.lbGold.color=c.WHITE),g.setPropIcon(i.icon,this.spProp,(function(){}));var n=this.node.getComponent(p);n.once(p.EventType.FINISHED,(function(){n.play("buy")})),this.updateGold(),this.updateBuyBtn()},r.updateBuyBtn=function(){var t=this;this.propId===m.PROP_ID.INFINITE?(this.showBuy(!1),I.instance.getOpenRewardType(m.SHARE_FUNCTION.BUY_INFINITE,(function(e,i){switch(t.getPropType=i,i){case m.OPEN_REWARD_TYPE.AD:t.spAdIcon.spriteFrame=t.imgAd;break;case m.OPEN_REWARD_TYPE.SHARE:t.spAdIcon.spriteFrame=t.imgShare;break;case m.OPEN_REWARD_TYPE.NULL:t.showBuy(!0)}var n=y.instance.getInfiniteTimes();n>=m.MAX_INFINITE_TIMES?(t.spAdIcon.node.active=!1,t.lbAd.string=h("shop.receive")):(t.spAdIcon.node.active=!0,t.lbAd.string=n+"/"+m.MAX_INFINITE_TIMES)}))):this.showBuy(!0)},r.onBtnCloseClick=function(){this.close()},r.onBtnBuyClick=function(){I.instance.addGold(-this.cost),b.dispatchEvent("updateInfiniteShareTimes"),this.rewardProp(),this.close()},r.rewardProp=function(){var t={};t.itemType=m.REWARD_TYPE.PROP,t.itemSubType=this.propId,t.itemAmount=this.countPerBuy,A.instance.showDialog("lottery/reward",[t,!1,m.SHARE_FUNCTION.BUY_INFINITE])},r.onBtnReceiveClick=function(){y.instance.getInfiniteTimes()>=m.MAX_INFINITE_TIMES&&(y.instance.exchangeInfiniteProp(),this.rewardProp())},r.close=function(){A.instance.hideDialog("props/buy")},r.updateGold=function(){this.lbGoldNum.string=B.formatMoney(y.instance.getGold())},e}(d)).prototype,"lbTitle",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(N.prototype,"lbNum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(N.prototype,"lbDesc",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(N.prototype,"lbGold",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(N.prototype,"lbGoldNum",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(N.prototype,"lbAd",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(N.prototype,"spProp",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(N.prototype,"spAdIcon",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(N.prototype,"btnBuy",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(N.prototype,"nodeBtnBuy",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(N.prototype,"nodeBtnAd",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(N.prototype,"imgShare",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(N.prototype,"imgAd",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(N.prototype,"wrapper",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=N))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc"],(function(r){var n,e;return{setters:[function(r){n=r.cclegacy,e=r._decorator}],execute:function(){var t,a;n._RF.push({},"e55dbzBNn1NUrh8r5zusvCZ","clientEvent",void 0);var c=e.ccclass;e.property,r("clientEvent",c("clientEvent")(((a=function(){function r(){}return r.on=function(n,e,t){var a={handler:e,target:t},c=r._handlers[n];c||(c=[],r._handlers[n]=c);for(var l=0;l<c.length;l++)if(!c[l])return c[l]=a,l;return c.push(a),c.length},r.off=function(n,e,t){var a=r._handlers[n];if(a)for(var c=0;c<a.length;c++){var l=a[c];if(l.handler===e&&(!t||t===l.target)){a.splice(c,1);break}}},r.dispatchEvent=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];var c,l=r._handlers[n],h=[];for(c=1;c<arguments.length;c++)h.push(arguments[c]);if(l)for(c=0;c<l.length;c++){var i=l[c];i.handler&&i.handler.apply(i.target,h)}},r}())._handlers={},t=a))||t);n._RF.pop()}}}));

System.register("chunks:///_virtual/configuration.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var a,i,n,s;return{setters:[function(t){a=t.createClass},function(t){i=t.cclegacy,n=t._decorator,s=t.sys}],execute:function(){var e,o;i._RF.push({},"eec23YA39dCLqNg6zDnqLhV","configuration",void 0);var r=n.ccclass,c="LinkConfig";t("Configuration",r("Configuration")(((o=function(){function t(){this.jsonData=void 0,this.path=void 0,this.markSave=void 0,this.saveTimer=void 0}var i=t.prototype;return i.init=function(){var t,a=this;(this.jsonData={userId:""},this.path=this.getConfigPath(),s.isNative)?t=jsb.fileUtils.getValueMapFromFile(this.path).LinkConfig:t=s.localStorage.getItem(c);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1));try{var i=JSON.parse(t);this.jsonData=i}catch(t){}}this.markSave=!1,this.saveTimer=setInterval((function(){a.scheduleSave()}),500)},i.setConfigDataWithoutSave=function(t,a){var i=this.jsonData.userId;this.jsonData[i]?this.jsonData[i][t]=a:console.error("no account can not save")},i.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this.markSave=!0},i.getConfigData=function(t){var a=this.jsonData.userId;if(this.jsonData[a]){var i=this.jsonData[a][t];return i||""}return console.log("no account can not load"),""},i.setGlobalData=function(t,a){this.jsonData[t]=a,this.save()},i.getGlobalData=function(t){return this.jsonData[t]},i.setUserId=function(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()},i.getUserId=function(){return this.jsonData.userId},i.scheduleSave=function(){this.markSave&&this.save()},i.markModified=function(){this.markSave=!0},i.save=function(){var t=JSON.stringify(this.jsonData);if(this.markSave=!1,s.isNative){var a={};a.LinkConfig=t,jsb.fileUtils.writeToFile(a,configuration.path)}else{s.localStorage.setItem(c,t)}},i.getConfigPath=function(){var t=s.platform,a="";return t===s.Platform.WIN32?a="src/conf":t===s.Platform.IOS?a="./conf":s.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},i.parseUrl=function(t){if(t&&!("string"==typeof t&&t.length<=0)){var a={};if("string"==typeof t)(t=t.split("?")[1]).split("&").forEach((function(t){var i=t.indexOf("=");if(-1!==i){var n=t.substring(0,i);a[n]=t.substring(i+1)}}));else a=t;a.action&&this.setGlobalData("urlParams",a),a.source&&this.setGlobalData("source",a.source),a.adchannelid&&this.setGlobalData("adchannelid",a.adchannelid)}},i.generateGuestAccount=function(){return""+Date.now()+10},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.init()),this._instance}}]),t}())._instance=void 0,e=o))||e);i._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(t){var n;return{setters:[function(t){n=t.cclegacy}],execute:function(){n._RF.push({},"b08f08kiOlEA7e6qUWa7AnA","constant",void 0);var A=t("constant",(function(){}));A.GAME_NAME="template",A.GAME_VERSION="1.0.1",A.GAME_FRAME=60,A.GAME_INIT_FRAME=60,A.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},n._RF.pop()}}}));

System.register("chunks:///_virtual/constants.ts",["cc"],(function(E){var _;return{setters:[function(E){_=E.cclegacy}],execute:function(){_._RF.push({},"f4f59qgd1lA2aWdYY7JPEm/","constants",void 0);E("constants",{VERSION:"1.4.7",LOCAL_CACHE:{PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",PASSWORD:"password",PRIVATE_KEY:"privateKey",HISTORY:"history",BAG:"bag"},SETTINGS_KEY:{LOTTERY:"lottery",MOREGAME_FIRSTCLICK:"moreGameFirstClick"},TMP_DATA_KEY:{AD_TIMES:"adTimes"},PROP_ID:{HAMMER:1,MAGIC:2,REFRESH:3,INFINITE:4},GUIDE_TYPE:{SPACE:0,GUIDE_ANI:1,TRIGGER_EVENT:2,WAIT_EVENT:3,GUIDE:4},GUIDE_TIPS_DIRECTION:{TOP:0,RIGHT:1,BOTTOM:2,LEFT:3},SHARE_TYPE:{SHARE_GAME:0,GROUP_RANK:1},SHARE_FUNCTION:{BALANCE:"balance",PVE:"pve",START_REWARD:"startReward",LACK_STEP:"lackStep",FILL_SIGN:"fillSign",OFFLINE:"offline",RANK:"rank",BUY_INFINITE:"buyInfinite",LOTTERY:"lottery",LOTTERY_REWARD:"lotteryReward",ONLINE:"online",SHOP_PROP:"shopprop",FIGHT:"fight",SIGN:"sign"},WATCH_AD_MAX_TIMES:{LOTTERY:10},ZORDER:{LINK_ITEM_NORMAL:0,LINK_ITEM_SKILL:1,FIGHT_NUM:20,DIALOG:100,REWARD:900,WAITING:998,TIPS:999},STAT_EVENT_TYPE:{},LINK_ROWS_COUNT:8,LINK_COLS_COUNT:8,SPECIAL_EFFECT:{HORIZONTAL:1,VERTICAL:2,PLUS:3,CENTER:4},SIGN_REWARD_STATUS:{RECEIVED:0,RECEIVABLE:1,UNRECEIVABLE:2,FILLSIGNIN:3,AFTER_FILLSIGNIN:4},MAX_SIGN_IN_REWARDS_DAY:7,MAX_INFINITE_TIMES:10,AUDIO_MUSIC:{BACKGROUND:"bgm",FIGHT:"fight"},AUDIO_SOUND:{CLICK:"click",BONUS_TIME:"bonusTime",FINISH_LINK:"finishLink",CLICK_CAKE:"clickCake",FINISH_STAR:"finishStar",FLY_STAR:"flyStar",LINE_BOMB:"lineBomb",PLUS_BOMB:"plusBomb",RANGE_BOMB:"rangeBomb",SPARE_STEP:"spareStep",GOOD:"good",GREAT:"great",EXCELLENT:"excellent",AMAZING:"amazing",UNBELIEVABLE:"unbelievable"},MAX_GRADE_OF_EACH_PVE_LEVEL:3,PVE_LEVEL_STATUS:{DONE:0,UNDONE:1,DOING:2},SCENE_MANAGER_TYPE:{LOAD:0,LOAD_SCENE:1},REWARD_TYPE:{DIAMOND:1,GOLD:2,PROP:3,GIFT:4},LOTTERY_MAX_TIMES:3,LOTTERY_AD_MAX_TIMES:10,TASK_RESET_TIME:4,TASK_MAX_NUM:4,MOREGAME_MAIN:"1001",TASK_STATE:{UNRECEIVABLE:0,RECEIVABLE:1,RECEIVED:2},ANALYTICS_TYPE:{ON_LOGIN:"onLogin",START_LEVEL:"levelStart",END_LEVEL:"levelOver",ASK_WATCH_ADS_GET_EFFECT:"askWatchAdForEffect",WATCH_ADS_GET_EFFECT:"watchAdForEffect",ASK_WATCH_ADS_ADD_STEP:"askWatchAdForAddStep",WATCH_ADS_ADD_STEP:"watchAdForAddStep",SCORE_OF_LEVEL:"scoreOfLevel",ASK_LOTTERY:"askWatchAdForLottery",LOTTERY:"watchAdForLottery",SHARE:"share",ASK_GET_INFINITE:"askWatchAdForInfinite",GET_INFINITE:"watchAdForInfinite",SIGNIN_RECEIVE:"signinReceive",SIGNIN_FILL:"signinFill",SIGNIN_CLOSE:"signinClose",OFFLINE_REWARD_SHARE:"offlineRewardShare",OFFLINE_REWARD_SHARE_SUCCESS:"offlineRewardShareSuccess",OFFLINE_REWARD_CLOSE:"offlineRewardClose",OPEN_PANEL:"openPanel",START_GAME:"startGame",START_GAME_SUCCESS:"startGameSuccess",PLAYER_STAY_TIME:"playerStayTime",BALANCE_USED_STEP:"balanceUsedStep",BALANCE_GAIN_SCORE:"balanceGainScore",SIGNIN_ENTRANCE:"signinEntrance",LOTTERY_ENTRANCE:"lotteryEntrance",LOTTERY_TOTAL_TIMES:"lotteryTotalTimes",LOTTERY_WATCH_AD:"lotteryWatchAd",LOTTERY_SHARE:"lotteryShare",LOTTERY_WATCH_AD_SUCCESS:"lotteryWatchAdSuccess",LOTTERY_SHARE_SUCCESS:"lotteryShareSuccess",ONLINE_REWARD_ENTRANCE:"onlineRewardEntrance",ONLINE_REWARD_SUCCESS:"onlineRewardSuccess",SHOP_ENTRANCE:"shopEntrance",SHOP_PROP_PER_BUY:"shopPropPerBuy",SHOP_RAND_PROP_SHARE:"shopRandPropShare",SHOP_PLAYER_GOLD:"shopPlayerGold",SETTING_MUSIC_ON:"settingMusicOn",SETTING_MUSIC_OFF:"settingMusicOff",SETTING_SOUND_ON:"settingSoundOn",SETTING_SOUND_OFF:"settingSoundOff",RANK_ENTRANCE:"rankEntrance",RANK_SHARE:"rankShare",SHARE_CLICK:"shareClick",SHARE_SUCCESS:"shareSuccess",MOREGAME_ENTRANCE:"moregameEntrance",MOREGAME_SINGLE:"互推墙-卖量",MAIN_PUSH_GAME:"主界面-卖量",CHECKPOINT_PROP_BUY_NUM:"checkpointPropBuyNum",GAME_PROP_SUCCESS_NUM:"gamePropSuccessNum",GAME_PROP_BUY_NUM:"gamePropSuccessNum",BALANCE_NEXT:"balanceNext",BALANCE_PLAY_AGAIN:"balancePlayAgain",BALANCE_SHARE:"balanceShare",BALANCE_CLOSE:"balanceClose",GAME_BAR_CLICK:"导流条-卖量",CHANNEL:"channel",WATCH_AD_BTN_SHOW_TIMES:"视频按钮展示次数",WATCH_AD_BTN_CLICK_TIMES:"视频按钮点击次数",WATCH_AD_BTN_SUCCESS_TIMES:"视频按钮成功点击次数"},ONLINE_REWARD_INTERVAL:[0,3,5,10,30],REWARD_STATUS:{UNRECEIVABLE:0,RECEIVABLE:1,RECEIVED:2},OPEN_REWARD_TYPE:{AD:0,SHARE:1,NULL:2},SHOP_COUNTDOWN_HOURS:4,UNLOCK_HIGEST_LEVEl:5,UNLOCK_PROP_ID:[1,2,3,4],OFFLINE_REWARD:10,WX_BANNER_ADS:{BALANCE:0,PVE_PAGE:1,GAME:2},WX_REWARD_ADS:{VIDEO:0},WX_ADS_TYPE:{BANNER:0,VIDEO:4},WX_ADS_RESP_CODE:{kAdsReceived:0,kAdsShown:1,kAdsDismissed:2,kUnknownError:6},NORMAL_SHOW_TIME:.2});_._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,n;return{setters:[function(e){t=e.createClass},function(e){r=e.cclegacy,n=e._decorator}],execute:function(){var i,s;r._RF.push({},"d7554BuqnJLAKibwVUWte5P","csvManager",void 0);var u=n.ccclass,a=(n.property,[",",";","\t","|","^"]),o=["\r\n","\r","\n"],l=function(e,t,r,n){return r instanceof Array?"number"===r[t]?Number(n[t]):"boolean"===r[t]?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===n[t]||"t"===n[t]||"1"===n[t]:n[t]:Number(n[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:a[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,assign:function(){for(var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1),n=0,i=r.length;n<i;n++)for(var s in r[n])t[s]=r[n][s];return t},map:function(e,t){for(var r=[],n=0,i=e.length;n<i;n++)r[n]=t(e[n],n);return r},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:e},buildObjectConstructor:function(e,t,r){return function(n){var i=new Object,s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},buildArrayConstructor:function(e,t,r){return function(n){var i=new Array(t.length),s=function(e,t){return i[e]=t};return r?e.forEach((function(e,i){s(e,l(t[i],i,r,n))})):e.forEach((function(e,r){s(e,l(t[r],r,null,n))})),i}},frequency:function(e,t,r){void 0===r&&(r=!1);for(var n=0,i=0,s=this.getLimit(r,e.length);i<s&&-1!==(i=e.indexOf(t,i));)i+=1,n++;return n},mostFrequent:function(e,t,r){for(var n,i=t.length-1;i>=0;i--)this.frequency(e,t[i],r)>0&&(n=t[i]);return n||t[0]},unsafeParse:function(e,t,r){var n,i,s=e.split(t.newline);function u(e){var r=e.shift();if(r.indexOf('"')>=0){for(var n=0,i=0,s=0;e.length>0&&(-1!==(n=r.indexOf('"',i))||s%2!=0);)-1!==n?(i=n+1,s++):r=r+t.newline+e.shift();var u,a=[],o=0,l=0,c=0,h=r.length;for(var f in r)if(r.hasOwnProperty(f)){var d=parseInt(f),v=r[f];0===d&&'"'===v&&(o++,l=1),'"'===v&&(o++,r[d-1]===t.delimiter&&l===d&&l++),'"'===v&&o%2==0&&(r[d+1]!==t.delimiter&&d+1!==h||(c=d,u=r.substring(l,c),a.push(u),c=l=c+2)),v===t.delimiter&&o%2==0&&((c=d)>l?(u=r.substring(l,c),a.push(u),c=l=c+1):c===l&&(a.push(""),c=l=c+1))}return(c=h)>=l&&(u=r.substring(l,c),a.push(u)),a}return r.split(t.delimiter)}for(t.skip>0&&s.splice(t.skip),t.header?(!0===t.header?(t.comment=u(s),t.cast=u(s),n=u(s)):"Array"===this.getType(t.header)&&(n=t.header),i=this.buildObjectConstructor(n,s[0].split(t.delimiter),t.cast)):i=this.buildArrayConstructor(n,s[0].split(t.delimiter),t.cast);s.length>0;){var a=u(s);a.length>1&&r(i(a),n[0])}return!0},safeParse:function(e,t,r){t.delimiter;var n=t.newline,i=e.split(n);return t.skip>0&&i.splice(t.skip),!0},encodeCells:function(e,t,r){for(var n=e.slice(0),i=0,s=n.length;i<s;i++)-1!==n[i].indexOf(this.quoteMark)&&(n[i]=n[i].replace(this.quoteRegex,this.doubleQuoteMark)),-1===n[i].indexOf(t)&&-1===n[i].indexOf(r)||(n[i]=this.quoteMark+n[i]+this.quoteMark);return n.join(t)},encodeArrays:function(e,t,r){var n=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,n,i));for(var s=0,u=this.getLimit(t.limit,e.length);s<u;s++)r(this.encodeCells(e[s],n,i));return!0},encodeObjects:function(e,t,r){var n,i,s=t.delimiter,u=t.newline;for(var a in n=[],i=[],e[0])n.push(a),i.push(e[0][a]);!0===t.header?r(this.encodeCells(n,s,u)):"Array"===this.getType(t.header)&&r(this.encodeCells(t.header,s,u)),r(this.encodeCells(i,s));for(var o=1,l=this.getLimit(t.limit,e.length);o<l;o++){i=[];for(var c=0,h=n.length;c<h;c++)i.push(e[o][n[c]]);r(this.encodeCells(i,s,u))}return!0},parse:function(e,t,r){var n;if("Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)?r=(n=[]).push.bind(n):n=[],t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){var i=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,a,i),t.newline=t.newline||this.mostFrequent(e,o,i)}return this.unsafeParse(e,t,r)&&(!(n.length>0)||n)},encode:function(e,t,r){var n;return"Function"===this.getType(t)?(r=t,t={}):"Function"!==this.getType(r)&&(r=(n=[]).push.bind(n)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,r)&&(!(n.length>0)||n.join(t.newline))}};e("CSVManager",u("CSVManager")(((s=function(){function e(){this._csvTables={},this._csvTableForArr={},this._tableCast={},this._tableComment={}}var r=e.prototype;return r.addTable=function(e,t,r){if(!this._csvTables[e]||r){var n={},i=[];c.parse(t,{header:!0},(function(e,t){n[e[t]]=e,i.push(e)})),this._tableCast[e]=c.opts.cast,this._tableComment[e]=c.opts.comment,this._csvTables[e]=n,this._csvTableForArr[e]=i}},r.getTableArr=function(e){return this._csvTableForArr[e]},r.getTable=function(e){return this._csvTables[e]},r.queryOne=function(e,t,r){var n=this.getTable(e);if(!n)return null;if(!t)return n[r];for(var i in n)if(n.hasOwnProperty(i)&&n[i][t]===r)return n[i]},r.queryByID=function(e,t){return this.queryOne(e,null,t)},r.queryAll=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;var i={};for(var s in n)n.hasOwnProperty(s)&&n[s][t]===r&&(i[s]=n[s]);return i},r.queryIn=function(e,t,r){var n=this.getTable(e);if(!n||!t)return null;for(var i={},s=Object.keys(n),u=s.length,a=0;a<u;a++){var o=n[s[a]];r.indexOf(o[t])>-1&&(i[s[a]]=o)}return i},r.queryByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;for(var n={},i=Object.keys(r),s=i.length,u=Object.keys(t),a=u.length,o=0;o<s;o++){for(var l=r[i[o]],c=!0,h=0;h<a;h++){var f=u[h];c=c&&t[f]===l[f]&&!n[i[o]]}c&&(n[i[o]]=l)}return n},r.queryOneByCondition=function(e,t){if(t.constructor!==Object)return null;var r=this.getTable(e);if(!r)return null;var n=Object.keys(t),i=n.length;for(var s in r){for(var u=r[s],a=!0,o=0;o<i;o++){var l=n[o];a=a&&t[l]===u[l]}if(a)return u}return null},t(e,null,[{key:"instance",get:function(){return this._instance||(this._instance=new e),this._instance}}]),e}())._instance=void 0,i=s))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Color,g=t.Canvas,h=t.UITransform,p=t.instantiate,c=t.Label,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[a.WHITE,a.BLACK,a.RED,a.GREEN,a.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(g)){var t=this.node.parent.getComponent(h),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=p(s);l.parent=this.node,l.name="Buttons";var r=p(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=p(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(c);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=a.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?p(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(c);this.labelComponentList[this.labelComponentList.length]=S;var x=p(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(c)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=p(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(c)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=p(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?p(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/effectGroup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./clientEvent.ts","./poolManager.ts","./resourceUtil.ts","./constants.ts","./fightNum.ts","./showTargetCake.ts"],(function(e){var t,n,o,i,c,a,r,f,s,p,l,u,g,d,h,v,m,S,y,E;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.UITransform,c=e.Animation,a=e.TweenSystem,r=e.tween,f=e.Vec3,s=e.Prefab,p=e.Label,l=e.instantiate,u=e.Sprite,g=e.Component},function(e){d=e.AudioManager},function(e){h=e.clientEvent},function(e){v=e.poolManager},function(e){m=e.resourceUtil},function(e){S=e.constants},function(e){y=e.FightNum},function(e){E=e.ShowTargetCake}],execute:function(){var N;n._RF.push({},"97452hq2+JOY4wRZ0jvZvzu","effectGroup",void 0);var I=o.ccclass;e("EffectGroup",I("EffectGroup")(N=function(e){function n(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(t=e.call.apply(e,[this].concat(o))||this)._fightScene=void 0,t}t(n,e);var o=n.prototype;return o.show=function(e){this._fightScene=e},o.showStarFlyEffect=function(e,t,n,o){var f=this,s=this.node.getComponent(i),p=s.convertToNodeSpaceAR(e);m.getEffectPrefab("fight/linkStar/linkStar",(function(e,i){if(e)n.apply(o,[e]);else{var l=v.instance.getNode(i,f.node);l.position=p;var u=l.getComponent(c);u.once(c.EventType.FINISHED,(function(){var e=f._fightScene.linkContent.getNoEffectLinkItemIndex();if(!e)return v.instance.putNode(l),void n.apply(o,["error"]);f._fightScene.linkContent.markLinkItemEffect(e,t);var i=f._fightScene.linkContent.getItemWorldPosByIndex(e),u=s.convertToNodeSpaceAR(i);d.instance.playSound(S.AUDIO_SOUND.FLY_STAR,!1),a.instance.ActionManager.removeAllActionsFromTarget(l);var g=u.clone().subtract(p).length()/1200;r(l).to(g,{position:u},{easing:"backIn"}).call((function(){var i=l.getComponent(c);i.once(c.EventType.FINISHED,(function(){v.instance.putNode(l)})),i.play("linkStarOver"),n.apply(o,[null,e,t])})).start()})),u.play("linkStarFly")}}))},o.showStarAfterLevelFinished=function(e,t,n,o,s){var p=this,l=this.node.getComponent(i),u=l.convertToNodeSpaceAR(e);m.getEffectPrefab("fight/linkStar/linkStar",(function(e,i){if(e)n.apply(o,[e]);else{var g=v.instance.getNode(i,p.node);if(g.position=u,g.getComponent(c).play("linkStarScale"),s||(s=p._fightScene.linkContent.getNoEffectLinkItemIndex()),!s)return v.instance.putNode(g),void n.apply(o,["error"]);p._fightScene.linkContent.markLinkItemEffect(s,t);var h=p._fightScene.linkContent.getItemWorldPosByIndex(s),m=l.convertToNodeSpaceAR(h);d.instance.playSound(S.AUDIO_SOUND.SPARE_STEP,!1),a.instance.ActionManager.removeAllActionsFromTarget(g),r(g).to(.33,{position:u}).to(.33,{position:new f((m.x-u.x)/2+u.x,u.y+500,0)}).to(.33,{position:m}).call((function(){var e=g.getComponent(c);e.once(c.EventType.FINISHED,(function(){v.instance.putNode(g)})),e.play("linkStarOver"),n.apply(o,[null,s,t])})).start()}}))},o.showLinkItemDestroyEffect=function(e,t){var n=this,o=this.node.getComponent(i).convertToNodeSpaceAR(e);m.getEffectPrefab("fight/effectHide/effectHide",(function(e,i){if(!e){var a=v.instance.getNode(i,n.node);a.position=o;var r=a.getComponent(c);r.once(c.EventType.FINISHED,(function(){v.instance.putNode(a),n.showAfterDestroyEffect(o)}),n),r.play("effectHideAni"),n.showLinkItemScore(o,t)}}))},o.showLinkItemScore=function(e,t){var n=this;m.loadRes("prefab/fight/fightNum",s,(function(o,i){if(!o){var c=v.instance.getNode(i,n.node);c.position=new f(e.x,e.y+40),c.zIndex=S.ZORDER.FIGHT_NUM,c.getComponent(y).show(t,(function(){v.instance.putNode(c)}))}}))},o.showAfterDestroyEffect=function(e){var t=this,n=this._fightScene.fightUI.getProgressBarWorldPos(),o=this.node.getComponent(i).convertToNodeSpaceAR(n);o&&m.getEffectPrefab("fight/eliminate/eliminate",(function(n,i){if(!n){var c=v.instance.getNode(i,t.node);c.position=e;var a=o.clone().subtract(e).length()/1e3;r(c).to(a,{position:o}).call((function(){v.instance.putNode(c),h.dispatchEvent("updateScore")})).start()}}))},o.showSkillLineEffect=function(e,t){var n=this,o=this.node.getComponent(i).convertToNodeSpaceAR(e);m.getEffectPrefab("fight/effectSkillLine/effectSkillLine",(function(e,i){if(!e){var a=v.instance.getNode(i,n.node);a.position=o,a.setRotationFromEuler(0,0,0),t||a.setRotationFromEuler(0,0,90);var r=a.getComponent(c);r.play("effectSkillLineAni"),r.once(c.EventType.FINISHED,(function(){v.instance.putNode(a)}),n)}}))},o.showSkillRangeEffect=function(e){var t=this,n=this.node.getComponent(i).convertToNodeSpaceAR(e);m.getEffectPrefab("fight/effectSkillRange/effectSkillRange",(function(e,o){if(!e){var i=v.instance.getNode(o,t.node);i.position=n,d.instance.playSound(S.AUDIO_SOUND.RANGE_BOMB,!1);var a=i.getComponent(c);a.play("effectSkillRangeAni"),a.once(c.EventType.FINISHED,(function(){v.instance.putNode(i)}),t)}}))},o.playTargetCakeFlyEffect=function(e,t,n,o){var c=this;m.createUI("fight/showTargetCake",(function(a,f){if(a)o(a,f);else{var s=c.node.getComponent(i),p=s.convertToNodeSpaceAR(t),l=s.convertToNodeSpaceAR(n);f.position=p,f.getComponent(E).onlyShowCake(e);var u=l.clone().subtract(p).length()/1e3;r(f).to(u,{position:l}).call((function(e){e&&e.destroy(),o()})).start()}}),this.node)},o.showBonusTime=function(e){var t=this;m.createEffect("fight/bonusTime/bonusTime",(function(n,o){if(n)e(n,o);else{var i=o.getComponent(c);i.play("bonusTimeAni"),i.once(c.EventType.FINISHED,(function(){o&&o.destroy(),e(null)}),t)}}),this.node)},o.useInfiniteProp=function(e,t){var n=this,o=this.node.getComponent(i).convertToNodeSpaceAR(e);m.createEffect("fight/propUse/propUse",(function(e,i){if(!e){i.position=o;var a=i.getComponent(c);a.play("propUseAni"),a.on(c.EventType.FINISHED,(function(){i&&i.destroy(),n.showUnlimitedOrNumber(t,!0,null)}))}}),this.node)},o.showUnlimitedOrNumber=function(e,t,n){var o=this.node.getComponent(i).convertToNodeSpaceAR(e);m.createEffect("fight/unlimited/unlimited",(function(e,i){if(!e){i.position=o;var a=i.getComponent(c),r=i.getChildByName("homeIcon"),f=r.getChildByName("homeIconUnlimited"),s=r.getChildByName("txt");f.active=t,s.active=!t,!t&&n>0&&(s.getComponent(p).string=n),a.play("unlimitedStart"),a.on(c.EventType.FINISHED,(function(){t?a.play("unlimitedIdle"):(i&&i.destroy(),h.dispatchEvent("updateStep"))}))}}),this.node)},o.removeLastEffect=function(){var e=[],t=this.node.getChildByName("unlimited");t&&e.push(t),0!==e.length&&e.forEach((function(e){e.removeFromParent()}))},o.showUnlockProp=function(e,t,n){var o=this;m.getEffectPrefab("fight/propGet/propGet",(function(a,s){if(!a){var p=l(s);p.setScale(2,2,2),p.parent=o.node;var g=o.node.getComponent(i).convertToNodeSpaceAR(e),d="00"+t,h=p.getChildByName("prop");m.setPropIcon(d,h.getComponent(u),(function(){}));var v=p.getComponent(c);v.play("propGetStart"),v.on(c.EventType.FINISHED,(function(){var e=g.clone().subtract(p.position).length()/500;r(p).to(e,{position:g,scale:new f(1,1,1)},{easing:"cubicInOut"}).call((function(){v.play("propGetOver"),v.on(c.EventType.FINISHED,(function(){p&&p.destroy()}),o),n&&n()})).start()}),o)}}))},n}(g))||N);n._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts"],(function(n){var e,t,o,a,i,r,l,c,s,u,d,f;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){o=n.cclegacy,a=n._decorator,i=n.Vec3,r=n.AnimationComponent,l=n.ParticleSystem,c=n.Component,s=n.AnimationClip,u=n.find},function(n){d=n.poolManager},function(n){f=n.resourceUtil}],execute:function(){var p,v;o._RF.push({},"554baRvdXVCaZZeXFSvvApe","effectManager",void 0);var h=a.ccclass;a.property,n("EffectManager",h("EffectManager")(((v=function(n){function o(){for(var e,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(e=n.call.apply(n,[this].concat(o))||this)._ndParent=null,e}e(o,n);var a=o.prototype;return a.playAni=function(n,e,t,o,a,l,c){var u=this;void 0===t&&(t=new i),void 0===o&&(o=!1),void 0===a&&(a=!1),void 0===l&&(l=1),void 0===c&&(c=function(){});var p=n.split("/")[1],v=this.ndParent.getChildByName(p),h=function(){var n,u,f;null==(n=v)||n.setScale(new i(l,l,l)),null==(u=v)||u.setWorldPosition(t);var p=null==(f=v)?void 0:f.getComponent(r);p.play(e);var h=p.getState(e);h&&(h.wrapMode=o?s.WrapMode.Loop:s.WrapMode.Normal),p.once(r.EventType.FINISHED,(function(){c&&c(),a&&v&&d.instance.putNode(v)}))};v?h():f.loadModelRes(n).then((function(n){(v=d.instance.getNode(n,u.ndParent)).setScale(new i(l,l,l)),v.setWorldPosition(t),h()}))},a.removeEffect=function(n,e){void 0===e&&(e=this.ndParent);var t=e.getChildByName(n);t&&(t.getComponentsInChildren(r).forEach((function(n){n.stop()})),(null==t?void 0:t.getComponentsInChildren(l)).forEach((function(n){null==n||n.clear(),null==n||n.stop()})),d.instance.putNode(t))},a.playParticle=function(n,e,t,o,a,r){var c=this;void 0===t&&(t=0),void 0===o&&(o=1),f.loadEffectRes(n).then((function(n){var s=d.instance.getNode(n,c.ndParent);s.setScale(new i(o,o,o)),s.setWorldPosition(e),a&&(s.eulerAngles=a);var u=0;s.getComponentsInChildren(l).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;u=e>u?e:u})),setTimeout((function(){s.parent&&(r&&r(),d.instance.putNode(s))}),1e3*(t&&t>0?t:u))}))},a.playEffect=function(n,e,t,o,a,c,s,u,p){void 0===t&&(t=!0),void 0===o&&(o=!0),void 0===a&&(a=0),void 0===c&&(c=1),void 0===s&&(s=new i),n.parent&&f.loadEffectRes(e).then((function(e){var f=d.instance.getNode(e,n);f.setScale(new i(c,c,c)),f.setPosition(s),u&&(f.eulerAngles=u);var v=0;t&&f.getComponentsInChildren(r).forEach((function(n,e){var t;null==n||n.play();var o=null==n||null==(t=n.defaultClip)?void 0:t.name;if(o){var a=n.getState(o);if(a){var i=a.duration;v=i>v?i:v,a.speed=1}}}));o&&f.getComponentsInChildren(l).forEach((function(n){n.simulationSpeed=1,null==n||n.clear(),null==n||n.stop(),null==n||n.play();var e=n.duration;v=e>v?e:v}));setTimeout((function(){f.parent&&(p&&p(),d.instance.putNode(f))}),1e3*(a&&a>0?a:v))}))},t(o,[{key:"ndParent",get:function(){return this._ndParent||(this._ndParent=u("effectManager")),this._ndParent}}],[{key:"instance",get:function(){return this._instance||(this._instance=new o),this._instance}}]),o}(c))._instance=void 0,p=v))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/elasticLimit.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,o,n,s,a,r,c,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,r=t.Node,c=t.EventTouch,l=t.UITransform,h=t.ScrollView}],execute:function(){var u,p,d,_;s._RF.push({},"cad33aLu5lGpY9kxRqQAXUn","elasticLimit",void 0);var v=a.ccclass,f=a.property;t("ElasticLimit",v("ElasticLimit")((d=e((p=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,o(e,"elasticValueX",d,n(e)),o(e,"elasticValueY",_,n(e)),e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.node.on(r.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0)},s._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this.content&&this._handleMoveLogic(i),this.cancelInnerEvents){if(i.getLocation().subtract(i.getStartLocation()).length>7&&!this._touchMoved&&t.target!==this.node){var o=new c(t.getTouches(),t.bubbles,r.EventType.TOUCH_CANCEL);o.type=r.EventType.TOUCH_CANCEL,o.touch=t.touch,o.simulate=!0,t.target.dispatchEvent(o),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},s._handleMoveLogic=function(t){var e=t.getDelta();this._processDeltaMove(e)},s._processDeltaMove=function(t){this._scrollChildren(t),this._gatherTouchMove(t)},s._scrollChildren=function(t){this._clampDelta(t);var e,i=t;this.elastic&&(e=this._getHowMuchOutOfBoundary(),i.x*=0===e.x?1:this.elasticValueX,i.y*=0===e.y?1:this.elasticValueY),this.elastic||(e=this._getHowMuchOutOfBoundary(i),i.add(e));var o=-1,n=this.content.getComponent(l),s=this.content.position;if(i.y>0)s.y-n.anchorY*n.height+i.y>this._bottomBoundary&&(o="scroll-to-bottom");else if(i.y<0){s.y-n.anchorY*n.height+n.height+i.y<=this._topBoundary&&(o="scroll-to-top")}else if(i.x<0){s.x-n.anchorX*n.width+n.width+i.x<=this._rightBoundary&&(o="scroll-to-right")}else if(i.x>0){s.x-n.anchorX*n.width+i.x>=this._leftBoundary&&(o="scroll-to-left")}this._moveContent(i,!1),0===i.x&&0===i.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent("scroll-began")),this._dispatchEvent("scrolling")),-1!==o&&this._dispatchEvent(o)},e}(h)).prototype,"elasticValueX",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),_=e(p.prototype,"elasticValueY",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),u=p))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/fightGuide.ts",["./rollupPluginModLoBabelHelpers.js","cc","./animationUI.ts"],(function(i){var t,e,o,n,r,s,c,l,a,u,p;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.inheritsLoose,o=i.initializerDefineProperty,n=i.assertThisInitialized},function(i){r=i.cclegacy,s=i._decorator,c=i.Node,l=i.sys,a=i.Widget,u=i.Component},function(i){p=i.AnimationUI}],execute:function(){var d,h,f,g,v;r._RF.push({},"0c335oC9Y9Fc5YWelPxejg7","fightGuide",void 0);var y=s.ccclass,m=s.property;i("FightGuide",(d=y("FightGuide"),h=m(c),d((v=t((g=function(i){function t(){for(var t,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return t=i.call.apply(i,[this].concat(r))||this,o(t,"wrapper",v,n(t)),t.startTime=void 0,t.closeCb=void 0,t}e(t,i);var r=t.prototype;return r.onLoad=function(){if(l.isMobile){var i,t=null==(i=this.wrapper)?void 0:i.getComponent(a);if(!t)return;t.isAlignLeft=!0,t.isAlignRight=!0,t.isAlignBottom=!0,t.isAlignTop=!0}},r.show=function(i){this.startTime=Date.now(),this.closeCb=i},r.onBtnCloseClick=function(){var i=this,t=this.node.getComponent(p);t?t.close((function(){i.node&&i.node.destroy()})):this.node&&this.node.destroy(),this.closeCb&&this.closeCb()},t}(u)).prototype,"wrapper",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/fightHandGuide.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,i,o,a,r,c,l,s,u;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,c=n.TweenSystem,l=n.tween,s=n.Animation,u=n.Component}],execute:function(){var h,p,f;a._RF.push({},"b57f2U4+lFHWYmyeEfh9N8U","fightHandGuide",void 0);var d=r.ccclass,v=r.property;n("FightHandGuide",d("FightHandGuide")((f=e((p=function(n){function e(){for(var e,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return e=n.call.apply(n,[this].concat(a))||this,i(e,"ani",f,o(e)),e}t(e,n);var a=e.prototype;return a.moveOverCallback=function(n,e){e&&e(n)},a.showGuide=function(n,e){var t=this;this.node.setPosition(n[0]),c.instance.ActionManager.removeAllActionsFromTarget(this.node),e&&e(0),this.ani.play("handDown");var i=l(this.node);this.ani.once(s.EventType.FINISHED,(function(){for(var o=function(o){var a=n[o],r=n[o-1],c=a.clone().subtract(r).length();i.then(l().to(c/150,{position:a}).call((function(){t.moveOverCallback(o,e)})))},a=1;a<n.length;a++)o(a);i.call((function(){t.ani.play("handUp"),t.ani.once(s.EventType.FINISHED,(function(){t.scheduleOnce((function(){t.showGuide(n,e)}),.5)}),t)})),i.start()}),this)},e}(u)).prototype,"ani",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=p))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/fightNum.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,n,e,r,o,l,u,a;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,l=t._decorator,u=t.Animation,a=t.Component}],execute:function(){var c,s,f,p,h,b;o._RF.push({},"0e8531febFP+ojrUxtAih7t","fightNum",void 0);var m=l.ccclass,g=l.property;t("FightNum",m("FightNum")((f=i((s=function(t){function i(){for(var i,n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return i=t.call.apply(t,[this].concat(o))||this,e(i,"lbNum",f,r(i)),e(i,"ani",p,r(i)),e(i,"font1",h,r(i)),e(i,"font2",b,r(i)),i}return n(i,t),i.prototype.show=function(t,i){this.lbNum.string=t;var n=1;t<=50?this.lbNum.font=this.font1:(this.lbNum.font=this.font2,n=1.2),this.node.setScale(n,n,n),this.ani.once(u.EventType.FINISHED,i),this.ani.play("fightNum")},i}(a)).prototype,"lbNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=i(s.prototype,"ani",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=i(s.prototype,"font1",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(s.prototype,"font2",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/fightProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts","./buttonEx.ts"],(function(t){var n,o,i,e,r,p,c,s,a,l,u,h,f,P,d;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){r=t.cclegacy,p=t._decorator,c=t.UITransform,s=t.Vec3,a=t.Component},function(t){l=t.clientEvent},function(t){u=t.playerData},function(t){h=t.resourceUtil},function(t){f=t.uiManager},function(t){P=t.constants},function(t){d=t.ButtonEx}],execute:function(){var b,k,g,m;r._RF.push({},"fe8afmT+lpEBr/zkz0jwl9D","fightProp",void 0);var v=p.ccclass,y=p.property;t("FightProp",v("FightProp")((g=n((k=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),p=0;p<o;p++)r[p]=arguments[p];return n=t.call.apply(t,[this].concat(r))||this,i(n,"spProp",g,e(n)),i(n,"lbNum",m,e(n)),n.prop=void 0,n.clickCallback=void 0,n}o(n,t);var r=n.prototype;return r.start=function(){this.updateUnlockProp()},r.onEnable=function(){l.on("updateProp",this.updateProp,this),l.on("updateUnlockProp",this.updateUnlockProp,this)},r.onDisable=function(){l.off("updateProp",this.updateProp,this),l.off("updateUnlockProp",this.updateUnlockProp,this)},r.show=function(t){this.prop=t,h.setPropIcon(t.icon,this.spProp,(function(){}));var n=u.instance.getPropAmount(t.ID);n<=0&&(n="+"),this.lbNum.string=n},r.updateProp=function(t){t===this.prop.ID&&this.show(this.prop)},r.setClickListener=function(t){this.clickCallback=t},r.onItemClick=function(){u.instance.getPropAmount(this.prop.ID)<=0?f.instance.showDialog("props/buy",[this.prop.ID,P.ANALYTICS_TYPE.GAME_PROP_BUY_NUM]):this.clickCallback&&this.clickCallback(this.prop,this.node.getComponent(c).convertToWorldSpaceAR(new s(0,0,0)))},r.updateUnlockProp=function(){var t=u.instance.isPropUnlock(this.prop.ID);this.node.getComponent(d).interactable=t,h.setGray(this.node,!t)},n}(a)).prototype,"spProp",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(k.prototype,"lbNum",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=k))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/fightPropsOperation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./fightProp.ts","./uiManager.ts","./resourceUtil.ts","./LanguageData.ts"],(function(t){var n,o,e,i,r,s,c,h,a,l,u,p,d,f,g;return{setters:[function(t){n=t.applyDecoratedDescriptor,o=t.inheritsLoose,e=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,c=t.Node,h=t.UITransform,a=t.Vec3,l=t.Component},function(t){u=t.clientEvent},function(t){p=t.FightProp},function(t){d=t.uiManager},function(t){f=t.resourceUtil},function(t){g=t.t}],execute:function(){var T,b,C,v,P,y,m,w,E,k;r._RF.push({},"01774upBQlPPZbPTE42gyAF","fightPropsOperation",void 0);var _=s.ccclass,S=s.property;t("FightPropsOperation",_("FightPropsOperation")((C=n((b=function(t){function n(){for(var n,o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=t.call.apply(t,[this].concat(r))||this,e(n,"nodeMask",C,i(n)),e(n,"nodeTouch",v,i(n)),e(n,"nodeBg",P,i(n)),e(n,"nodeProp",y,i(n)),e(n,"lbTips",m,i(n)),e(n,"lbName",w,i(n)),e(n,"spProp",E,i(n)),e(n,"arrSfTip",k,i(n)),n.propId=void 0,n.closeCallback=void 0,n._fightScene=void 0,n}o(n,t);var r=n.prototype;return r.onEnable=function(){this.nodeTouch.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.on(c.EventType.TOUCH_END,this.onTouchEnded,this),this.nodeTouch.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.onDisable=function(){this.nodeTouch.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.nodeTouch.off(c.EventType.TOUCH_END,this.onTouchEnded,this),this.nodeTouch.off(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},r.show=function(t,n,o,e,i){var r=this;this.propId=t.ID,f.setPropIcon(t.icon,this.spProp,(function(){})),this.setIconNodePosition(t,n,i),this.lbTips.string=g("table_prop."+t.desc),this.lbName.string=g("table_prop."+t.name),this._fightScene=e,this.setLinkRect(o),this.scheduleOnce((function(){var t=r.node.getComponent(h),n=r.nodeBg.getComponent(h);n.width=t.width,n.height=t.height,r.nodeBg.position=new a(-r.nodeMask.position.x,-r.nodeMask.position.y,0)}),.1)},r.setLinkRect=function(t){this.nodeMask.position=new a(t.x+t.width/2,t.y+t.height/2,0),this.nodeTouch.position=this.nodeMask.position;var n=this.nodeMask.getComponent(h);n.width=t.width,n.height=t.height;var o=this.nodeTouch.getComponent(h);o.width=t.width,o.height=t.height},r.setIconNodePosition=function(t,n,o){var e=this.node.getComponent(h).convertToNodeSpaceAR(n);this.closeCallback=o,this.nodeProp.position=e,this.nodeProp.getComponent(p).show(t)},r.onTouchStart=function(t){this._fightScene.linkContent.onPropTouchStart(t)},r.onTouchEnded=function(t){var n=this._fightScene.linkContent.onPropTouchEnd(t);-1!==n&&(u.dispatchEvent("useProp",this.propId,n),this.close())},r.onTouchCancel=function(t){this._fightScene.linkContent.onPropTouchCancel(t)},r.onBtnCloseClick=function(){this.close()},r.close=function(){d.instance.hideDialog("fight/fightPropsOperation"),this.closeCallback&&this.closeCallback()},n}(l)).prototype,"nodeMask",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(b.prototype,"nodeTouch",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=n(b.prototype,"nodeBg",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(b.prototype,"nodeProp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=n(b.prototype,"lbTips",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=n(b.prototype,"lbName",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(b.prototype,"spProp",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(b.prototype,"arrSfTip",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=b))||T);r._RF.pop()}}}));

System.register("chunks:///_virtual/fightScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./clientEvent.ts","./gameLogic.ts","./localConfig.ts","./loadsh.ts","./playerData.ts","./uiManager.ts","./constants.ts","./effectGroup.ts","./fightUI.ts","./linkContent.ts","./fightPropsOperation.ts"],(function(e){var t,i,n,s,o,r,a,h,c,l,f,u,p,d,v,g,w,C,I,O,L,F,S,E,A,P,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,a=e.Node,h=e.screen,c=e.sys,l=e.view,f=e.ResolutionPolicy,u=e.profiler,p=e.UITransform,d=e.Rect,v=e.Component},function(e){g=e.AudioManager},function(e){w=e.clientEvent},function(e){C=e.GameLogic},function(e){I=e.localConfig},function(e){O=e.loadsh},function(e){L=e.playerData},function(e){F=e.uiManager},function(e){S=e.constants},function(e){E=e.EffectGroup},function(e){A=e.FightUI},function(e){P=e.LinkContent},function(e){m=e.FightPropsOperation}],execute:function(){var y,k,U,T,b,G,R,D;o._RF.push({},"aa4e3RbxGxHyqBA31aqKi9Q","fightScene",void 0);var N=r.ccclass,_=r.property;e("FightScene",(y=N("FightScene"),k=_(a),y((b=t((T=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"nodeLinkContent",b,s(t)),n(t,"nodeFightUI",G,s(t)),n(t,"nodeEffectGroup",R,s(t)),n(t,"wrapper",D,s(t)),t.linkContent=void 0,t.fightUI=void 0,t.effectGroup=void 0,t.isLevelOver=void 0,t.spareStar=void 0,t.allFlyFinishCb=void 0,t.reliveByAd=void 0,t.isLevelStart=void 0,t.dictPropsUseTimes=void 0,t.isShowOperationUI=void 0,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.adaptiveLogic(),h.on("window-resize",this.setNewPositionFightOperation,this)},o.setNewPositionFightOperation=function(){var e=this.node.getChildByName("Wrapper").getChildByName("fightPropsOperation");if(e){var t=this.getLinkContentRect();e.getComponent(m).setLinkRect(t)}},o.adaptiveLogic=function(){var e=this;c.isMobile?(O.checkAspectRatioGame(this.wrapper),h.on("window-resize",(function(){return O.checkAspectRatioGame(e.wrapper)}),this)):l.setDesignResolutionSize(3600,1280,f.FIXED_HEIGHT)},o.start=function(){u.hideStats(),L.instance.startNewLevel(),this.linkContent=this.nodeLinkContent.getComponent(P),this.fightUI=this.nodeFightUI.getComponent(A),this.effectGroup=this.nodeEffectGroup.getComponent(E),this.effectGroup.show(this),this.onNewLevel(),g.instance.stop(S.AUDIO_MUSIC.BACKGROUND),g.instance.playMusic(S.AUDIO_MUSIC.FIGHT,!0)},o.onEnable=function(){w.on("levelFinished",this.onLevelFinished,this),w.on("gameOver",this.onGameOver,this),w.on("newLevel",this.onNewLevel,this),w.on("useProp",this.useProp,this)},o.onDisable=function(){w.off("levelFinished",this.onLevelFinished,this),w.off("gameOver",this.onGameOver,this),w.off("newLevel",this.onNewLevel,this),w.off("useProp",this.useProp,this),g.instance.stop(S.AUDIO_MUSIC.FIGHT)},o.onLevelFinished=function(){var e=this;this.isLevelOver=!0,L.instance.spareStep>0&&!L.instance.curLevelInfo.infinite?this.showBonusTime((function(){var t=L.instance.spareStep;if(e.spareStar=t,t>0){e.allFlyFinishCb=e.triggerAllSpecialEffect;for(var i=0;i<t;i++)e.scheduleOnce((function(){L.instance.reduceStep(),w.dispatchEvent("updateStep");var t=e.fightUI.getStepWorldPos(),i=O.random(0,1)?S.SPECIAL_EFFECT.HORIZONTAL:S.SPECIAL_EFFECT.VERTICAL;e.effectGroup.showStarAfterLevelFinished(t,i,e.showFlyEffectOver,e)}),.2*i)}else e.triggerAllSpecialEffect()})):this.triggerAllSpecialEffect()},o.showBonusTime=function(e){var t=this;g.instance.playSound(S.AUDIO_SOUND.BONUS_TIME,!1),this.scheduleOnce((function(){t.effectGroup.showBonusTime((function(){t.linkContent.showLinkFinishEffect(e)}))}),.2)},o.onGameOver=function(){var e=this;this.isLevelOver||(this.isLevelOver=!0,this.reliveByAd?this.showGameOverUI():(this.reliveByAd=!0,F.instance.showDialog("fight/adStep",[function(t){t?e.showGameOverUI():(L.instance.addStep(5),e.isLevelOver=!1,w.dispatchEvent("updateStep",!1))}])))},o.showGameOverUI=function(){F.instance.showDialog("fight/balanceFailed")},o.onNewLevel=function(){var e=this;this.isLevelStart=!1,this.isLevelOver=!1,this.reliveByAd=!1,this.dictPropsUseTimes={},this.effectGroup.removeLastEffect(),this.linkContent.dictCakes?this.linkContent.showAllLinkItem(!1,(function(){e.linkContent.show(e),e.fightUI.show(e),L.instance.isNeedOpenUnlockPanel()?F.instance.showDialog("fight/unLockProp",[e.showTargets.bind(e),e.fightUI]):e.showTargets()})):(this.linkContent.show(this),this.fightUI.show(this),L.instance.hasSeenGuide()?L.instance.isNeedOpenUnlockPanel()?F.instance.showDialog("fight/unLockProp",[this.showTargets.bind(this),this.fightUI]):this.showTargets():F.instance.showDialog("fight/fightGuide",[function(){L.instance.finishSeenGuide(),L.instance.isNeedOpenUnlockPanel()?F.instance.showDialog("fight/unLockProp",[e.showTargets.bind(e)]):e.showTargets()}])),this.linkContent.stopGuideHand()},o.showTargets=function(){var e=this;this.fightUI.showTargetsAni((function(){e.showAdRewardAsk(),e.isLevelStart=!0}))},o.showAdRewardAsk=function(){var e=this;L.instance.level>3?F.instance.showDialog("fight/adProp",[function(t){t?e.showAdRewardOver(!1):e.showAdRewardOver(!0)}]):this.showAdRewardOver(!1)},o.showAdRewardOver=function(e){var t=this;if(e){this.spareStar=2,this.allFlyFinishCb=null;for(var i=0;i<2;i++)this.scheduleOnce((function(){var e=t.fightUI.getStepWorldPos(),i=O.random(0,1)?S.SPECIAL_EFFECT.HORIZONTAL:S.SPECIAL_EFFECT.VERTICAL;t.effectGroup.showStarAfterLevelFinished(e,i,t.showFlyEffectOver,t)}),.2*i)}},o.showFlyEffect=function(e,t){for(var i in this.allFlyFinishCb=t,this.spareStar=0,e){var n=this.linkContent.getItemWorldPosByIndex(i);this.spareStar++,this.effectGroup.showStarFlyEffect(n,e[i],this.showFlyEffectOver,this)}},o.showFlyEffectOver=function(e,t,i){this.spareStar--,e||(this.spareStar=this.spareStar<0?0:this.spareStar,this.linkContent.addEffect(t,i),0===this.spareStar&&this.allFlyFinishCb&&this.allFlyFinishCb())},o.triggerAllSpecialEffect=function(){var e=this;this.linkContent.triggerAllSpecialEffect((function(){e.scheduleOnce((function(){e.linkContent.fillEmptyCell()}),.3),e.scheduleOnce((function(){L.instance.balanceOverAdTimes||(L.instance.balanceOverAdTimes=1),L.instance.balanceOverAdTimes++,L.instance.balanceOverAdTimes>2?(C.instance.showInterStitialAd((function(e){F.instance.showDialog("fight/balance")})),L.instance.balanceOverAdTimes=1):F.instance.showDialog("fight/balance")}),2)}))},o.getLinkContentRect=function(){var e=this.nodeLinkContent.position,t=this.nodeLinkContent.getComponent(p);return new d(e.x,e.y,t.width,t.height)},o.isPropCanUse=function(e){var t=I.instance.queryByID("prop",e);if(t){if(this.dictPropsUseTimes.hasOwnProperty(e))if(this.dictPropsUseTimes[e]>=t.limit)return!1;return!0}return!0},o.showPropOperationUI=function(e,t){var i=this;this.linkContent.stopGuideHand(),this.isShowOperationUI=!0,F.instance.showDialog("fight/fightPropsOperation",[e,t,this.getLinkContentRect(),this,function(){i.isShowOperationUI=!1}])},o.useProp=function(e,t){switch(e){case S.PROP_ID.HAMMER:if(!t||t<0)return;this.linkContent.destoryCake(t);break;case S.PROP_ID.MAGIC:if(!t||t<0)return;var i=this.fightUI.getStepWorldPos();this.spareStar=1;var n=O.random(0,1)?S.SPECIAL_EFFECT.HORIZONTAL:S.SPECIAL_EFFECT.VERTICAL;this.allFlyFinishCb=null,this.effectGroup.showStarAfterLevelFinished(i,n,this.showFlyEffectOver,this,t);break;case S.PROP_ID.REFRESH:if(this.linkContent.stopGuideHand(),!this.linkContent.refreshLinkItems())return;break;case S.PROP_ID.INFINITE:L.instance.curLevelInfo.infinite=!0,this.fightUI.showInfinite()}this.dictPropsUseTimes.hasOwnProperty(e)?this.dictPropsUseTimes[e]++:this.dictPropsUseTimes[e]=1,L.instance.costProp(e),w.dispatchEvent("updateProp",e)},t}(v)).prototype,"nodeLinkContent",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(T.prototype,"nodeFightUI",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(T.prototype,"nodeEffectGroup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"wrapper",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=T))||U));o._RF.pop()}}}));

System.register("chunks:///_virtual/fightTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./loadsh.ts","./playerData.ts","./resourceUtil.ts"],(function(e){var t,n,i,a,o,r,s,u,l,c,h,p,f,g,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Label,u=e.Vec3,l=e.Animation,c=e.UITransform,h=e.Component},function(e){p=e.clientEvent},function(e){f=e.loadsh},function(e){g=e.playerData},function(e){d=e.resourceUtil}],execute:function(){var m,b,k,T,C,v,y,w,V,z,D;o._RF.push({},"01817VhYV5BoLEoEhl13On0","fightTarget",void 0);var E=r.ccclass,I=r.property;e("FightTarget",(m=E("FightTarget"),b=I(s),m((C=t((T=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,i(t,"spCake",C,a(t)),i(t,"lbTargetValue",v,a(t)),i(t,"nodeCustomer",y,a(t)),i(t,"nodeNeed",w,a(t)),i(t,"nodeCake",V,a(t)),i(t,"nodeYes",z,a(t)),i(t,"aniCake",D,a(t)),t.cake=void 0,t.customer=void 0,t}n(t,e);var o=t.prototype;return o.onEnable=function(){p.on("updateTargets",this.updateTarget,this),p.on("showTargetCake",this.showTargetCake,this)},o.onDisable=function(){p.off("updateTargets",this.updateTarget,this),p.off("showTargetCake",this.showTargetCake,this)},o.show=function(e,t){var n=this;if(this.cake=e,d.setCakeIcon(this.cake,this.spCake,(function(){})),this.updateTagetValue(),t)if(this.customer)this.customer.active=!0;else{var i=f.random(0,1),a="role/man01/man01",o=0;i&&(a="role/woman01/woman01",o=15),d.createEffect(a,(function(e,t){e||(n.customer=t,n.customer.position=new u(0,o,0))}),this.nodeCustomer)}else this.customer&&(this.customer.active=!1);this.nodeNeed.active=!1,this.nodeCake.active=!1},o.showTargetCake=function(e){"all"!==e&&e!==this.cake||(this.nodeNeed.active=!0,this.nodeCake.active=!0,this.node.getComponent(l).play("linkItemShowTarget"))},o.updateTagetValue=function(){var e=g.instance.getTargetValue(this.cake);this.lbTargetValue.string=e,this.nodeYes.active=e<=0},o.updateTarget=function(e){this.cake===e&&this.updateTagetValue()},o.playIdle=function(){this.customer&&this.customer.getComponent(l).play("idle")},o.getCakeWorldPos=function(){return this.spCake.node.getComponent(c).convertToWorldSpaceAR(new u(0,0,0))},t}(h)).prototype,"spCake",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(T.prototype,"lbTargetValue",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(T.prototype,"nodeCustomer",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(T.prototype,"nodeNeed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(T.prototype,"nodeCake",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(T.prototype,"nodeYes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"aniCake",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=T))||k));o._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./clientEvent.ts","./localConfig.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts","./fightProp.ts","./fightTarget.ts","./LanguageData.ts","./showTarget.ts"],(function(t){var e,r,n,i,o,a,s,c,l,u,p,h,f,g,d,S,v,b,I,m,w,P,T;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,s=t.Node,c=t.UITransform,l=t.Vec3,u=t.instantiate,p=t.Animation,h=t.Component},function(t){f=t.AudioManager},function(t){g=t.clientEvent},function(t){d=t.localConfig},function(t){S=t.playerData},function(t){v=t.resourceUtil},function(t){b=t.uiManager},function(t){I=t.constants},function(t){m=t.FightProp},function(t){w=t.FightTarget},function(t){P=t.t},function(t){T=t.ShowTarget}],execute:function(){var C,y,D,A,N,R,_,z,U,k,E,L,F,M,B,G,W;o._RF.push({},"b70bahPE9BEa6kDxgxn3iLv","fightUI",void 0);var O=a.ccclass,x=a.property;t("FightUI",(C=O("FightUI"),y=x(s),C((N=e((A=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,n(e,"nodeTargets",N,i(e)),n(e,"pfTarget",R,i(e)),n(e,"lbStep",_,i(e)),n(e,"lbLevel",z,i(e)),n(e,"lbScore",U,i(e)),n(e,"progress",k,i(e)),n(e,"nodeProBar",E,i(e)),n(e,"arrStars",L,i(e)),n(e,"arrStarsBg",F,i(e)),n(e,"nodePropGroup",M,i(e)),n(e,"pfFightProp",B,i(e)),n(e,"nodeInfinite",G,i(e)),n(e,"wrapper",W,i(e)),e.targetProgress=void 0,e._fightScene=void 0,e.arrTargetNode=void 0,e}r(e,t);var o=e.prototype;return o.start=function(){this.startCustomerRandAction()},o.onEnable=function(){g.on("updateStep",this.updateStepInfo,this),g.on("updateScore",this.updateScore,this)},o.onDisable=function(){g.off("updateStep",this.updateStepInfo,this),g.off("updateScore",this.updateScore,this)},o.show=function(t){this.targetProgress=null,this._fightScene=t,this.initTargets(),this.updateLevelInfo(),this.updateStepInfo(),this.updateScore(),this.initProps(),this.showInfinite(),0===S.instance.score&&this.progress.progress>0&&(this.progress.progress=0,this.arrStars[0].active=!1,this.arrStars[1].active=!1,this.arrStars[2].active=!1)},o.updateLevelInfo=function(){this.lbLevel.string=S.instance.level},o.updateStepInfo=function(t){!1===t?(this.lbStep.node.active=!1,this._fightScene.effectGroup.showUnlimitedOrNumber(this.nodeInfinite.getComponent(c).convertToWorldSpaceAR(new l(0,0,0)),!1,S.instance.spareStep)):S.instance.curLevelInfo.infinite||void 0!==t||(this.lbStep.node.active=!0,this.lbStep.string=S.instance.spareStep)},o.updateScore=function(){var t=S.instance.score;this.lbScore.string=t;var e=0,r=S.instance.arrStars;t<r[0]?e=t/r[0]*.33:t<r[1]?e=.33+(t-r[0])/(r[1]-r[0])*.33:(e=.67+(t-r[1])/(r[2]-r[1])*.33)>=1&&(e=1),this.targetProgress=e},o.initTargets=function(){for(var t in this.nodeTargets.removeAllChildren(),this.arrTargetNode=[],S.instance.dictTargets){var e=u(this.pfTarget);e.parent=this.nodeTargets,e.getComponent(w).show(t,!0),this.arrTargetNode.push(e)}},o.getTargetWorldPos=function(t){for(var e=0;e<this.arrTargetNode.length;e++){var r=this.arrTargetNode[e].getComponent(w);if(r.cake===t)return r.getCakeWorldPos()}return null},o.showTargetsAni=function(t){var e=this;v.createUI("fight/showTarget",(function(r,n){r?g.dispatchEvent("showTargetCake","all"):n.getComponent(T).show(e,t)}),this.node)},o.getStepWorldPos=function(){return this.lbStep.node.getComponent(c).convertToWorldSpaceAR(new l(0,0,0))},o.getProgressBarWorldPos=function(){var t=this.nodeProBar.getComponent(c);return t.convertToWorldSpaceAR(new l(t.width,0,0))},o.onBtnSettingClick=function(){b.instance.showDialog("dialog/gameSetting")},o.onBtnQuestionClick=function(){b.instance.showDialog("fight/fightGuide")},o.startCustomerRandAction=function(){var t=this,e=3+3*Math.random();this.scheduleOnce((function(){if(t.arrTargetNode.length<=0)t.startCustomerRandAction();else{var e=Math.floor(Math.random()*t.arrTargetNode.length);t.arrTargetNode[e].getComponent(w).playIdle(),t.startCustomerRandAction()}}),e)},o.update=function(t){if(null!==this.targetProgress){var e=this.progress.progress;if(this.targetProgress!==e){var r=e;this.targetProgress>e?e+=t:e-=t,e=this.targetProgress>0?e>this.targetProgress?this.targetProgress:e:e<0?0:e,this.progress.progress=e,e>=1&&r<1?this.showStar(2):r>=1&&e<1?this.arrStars[2].active=!1:e>=.66&&(r<.66||r>=1)?(this.arrStars[0].active=!0,r<.66&&this.showStar(1)):e>=.33&&e<.66&&(r<.33||r>=.66)?(this.arrStars[1].active=!1,r<.33&&this.showStar(0)):e<.33&&r>=.33&&(this.arrStars[0].active=!1,this.arrStars[1].active=!1,this.arrStars[2].active=!1)}}},o.showStar=function(t){var e=this;this.arrStars[t].active||v.createEffect("fight/homeStar/homeStar",(function(r,n){if(r)e.arrStars[t].active=!0;else{f.instance.playSound(I.AUDIO_SOUND.FINISH_STAR,!1);var i=n.getComponent(p);i.play("homeStarShow"),i.once(p.EventType.FINISHED,(function(){n&&n.destroy(),e.arrStars[t].active=!0}))}}),this.arrStarsBg[t])},o.initProps=function(){this.nodePropGroup.removeAllChildren(),this.onItemClick=this.onItemClick.bind(this);var t=d.instance.getTable("prop");for(var e in t){var r=u(this.pfFightProp);r.parent=this.nodePropGroup;var n=r.getComponent(m);n.show(t[e]),n.setClickListener(this.onItemClick)}},o.onItemClick=function(t,e){S.instance.getPropAmount(t.ID)<=0?b.instance.showTips(P("fight.propNoEnough")):this._fightScene.isPropCanUse(t.ID)?(t.ID===I.PROP_ID.INFINITE&&this._fightScene.effectGroup.useInfiniteProp(e,this.nodeInfinite.getComponent(c).convertToWorldSpaceAR(new l(0,0,0))),t.ID===I.PROP_ID.HAMMER||t.ID===I.PROP_ID.MAGIC?this._fightScene.showPropOperationUI(t,e):g.dispatchEvent("useProp",t.ID)):b.instance.showTips(P("fight.propExceedMaxTimes"))},o.showInfinite=function(){if(S.instance.curLevelInfo&&S.instance.curLevelInfo.infinite)return this.lbStep.node.active=!1,void(this.nodeInfinite.active=!0);this.lbStep.node.active=!0,this.nodeInfinite.active=!1},o.showUnlockProp=function(t,e){var r=this.nodePropGroup.children[t-1].getComponent(c).convertToWorldSpaceAR(new l(0,0,0));this._fightScene.effectGroup.showUnlockProp(r,t,e)},e}(h)).prototype,"nodeTargets",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(A.prototype,"pfTarget",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(A.prototype,"lbStep",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"lbLevel",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(A.prototype,"lbScore",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(A.prototype,"progress",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(A.prototype,"nodeProBar",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"arrStars",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=e(A.prototype,"arrStarsBg",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=e(A.prototype,"nodePropGroup",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(A.prototype,"pfFightProp",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=e(A.prototype,"nodeInfinite",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(A.prototype,"wrapper",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=A))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./clientEvent.ts","./constants.ts","./uiManager.ts","./sceneManager.ts"],(function(n){var e,t,i,a,s,o,c,r,u,p;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.createClass,i=n.initializerDefineProperty},function(n){a=n.cclegacy,s=n._decorator},function(n){o=n.playerData},function(n){c=n.clientEvent},function(n){r=n.constants},function(n){u=n.uiManager},function(n){p=n.SceneManager}],execute:function(){var d,f,h,l;a._RF.push({},"72a86eT/GZB8K0okUbOBKut","gameLogic",void 0);var v=s.ccclass,g=s.property;n("GameLogic",v("GameLogic")(((l=function(){function n(){i(this,"isConnect",h,this),this.channel=void 0,this.timer=void 0}var e=n.prototype;return e.onAppShow=function(n){if(console.log("onAppShow",n),1037===n.scene&&n.query){var e="game_id";if(n.query.hasOwnProperty(e)){var t=n.query.game_id;this.channel=t,t&&this.customEventStatistics(r.ANALYTICS_TYPE.CHANNEL,{channel:t})}}else 1044===n.scene?this.channel="share":n.scene&&(this.channel=n.scene+"")},e.afterLogin=function(){var n=this;this.startTick(),setTimeout((function(){o.instance.isOpenOffLineReward(60*r.OFFLINE_REWARD*1e3)&&u.instance.showDialog("pve/offLineReward",[{itemType:r.REWARD_TYPE.GOLD,itemAmount:500,itemSubType:0}]),n.convertSignInDataFormat(),o.instance.isNewBee||n.checkSignIn()}),1e3)},e.startTick=function(){this.timer&&clearInterval(this.timer),this.timer=setInterval(this.onTick.bind(this),1e3)},e.onTick=function(){p.instance.isStop||(o.instance.getOnlineRewardInfo().value.receiveStatus===r.REWARD_STATUS.UNRECEIVABLE&&this.addUsedTime(),this.checkShopPropInfo())},e.checkShopPropInfo=function(){if(o.instance.playerInfo.hasOwnProperty("shopPropInfo")){var n=o.instance.playerInfo.shopPropInfo,e=n.createDate,t=n.receiveStatus;n.isReceived;Date.now()-e>=36e5*r.SHOP_COUNTDOWN_HOURS&&t!==r.REWARD_STATUS.RECEIVABLE&&(o.instance.updateShopPropInfo(!1),c.dispatchEvent("updateShopPropInfo"))}else o.instance.resetShopPropInfo(),o.instance.updateShopPropInfo(!1)},e.checkSignIn=function(){o.instance.updateSignInCurrentDay(),o.instance.getSignInReceivedInfo().isTodayReceived||u.instance.showDialog("signIn/signIn")},e.addUsedTime=function(){var n=o.instance.getOnlineRewardInfo().usedTime;60*o.instance.getCountdownTime()*1e3-1e3*n<=0&&o.instance.updateOnlineRewardInfo(!1),o.instance.addUsedTime()},e.convertSignInDataFormat=function(){o.instance.playerInfo.hasOwnProperty("signInInfo")&&o.instance.playerInfo.signInInfo.hasOwnProperty("value")&&o.instance.convertSignInDataFormat(o.instance.playerInfo.signInInfo)},e.finishLink=function(n,e){o.instance.finishLink(n,e),c.dispatchEvent("updateTargets",n),c.dispatchEvent("updateStep")},e.checkGame=function(){o.instance.isLevelFinish()?c.dispatchEvent("levelFinished"):o.instance.isGameOver()&&c.dispatchEvent("gameOver")},e.resetLevel=function(){o.instance.startNewLevel(),c.dispatchEvent("newLevel")},e.showRewardAd=function(n){n&&n(null)},e.showInterStitialAd=function(n){n(null)},e.share=function(n,e,t,i){t()},e.addDiamond=function(n){o.instance.addDiamond(n),c.dispatchEvent("updateDiamond")},e.addGold=function(n){o.instance.addGold(n),c.dispatchEvent("updateGold")},e.addProp=function(n,e){o.instance.addProp(n,e),c.dispatchEvent("updateProp",n)},e.getOpenRewardType=function(n,e){e(null,r.OPEN_REWARD_TYPE.NULL)},e.customEventStatistics=function(n,e){},e.requestWithPost=function(n,e,t){var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState)if(i.status>=200&&i.status<400){var n=i.responseText;try{n=JSON.parse(i.responseText)}catch(n){console.error(i.responseText)}t(null,n)}else t("failed",i.status)},i.open("POST",n,!0),i.setRequestHeader("Content-Type","application/json"),i.send(JSON.stringify(e))},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,h=e((f=l).prototype,"isConnect",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),d=f))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/gameSetting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./gameLogic.ts","./uiManager.ts","./sceneManager.ts"],(function(n){var e,i,t,o,c,a,s,r,u,l,d;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){c=n.cclegacy,a=n._decorator,s=n.Component},function(n){r=n.AudioManager},function(n){u=n.GameLogic},function(n){l=n.uiManager},function(n){d=n.SceneManager}],execute:function(){var p,g,f,h,S,C;c._RF.push({},"c0ebf+rxRpMory9l2TqXwQ/","gameSetting",void 0);var M=a.ccclass,m=a.property;n("gameSetting",M("gameSetting")((f=e((g=function(n){function e(){for(var e,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return e=n.call.apply(n,[this].concat(c))||this,t(e,"ndMusicOpen",f,o(e)),t(e,"ndMusicClose",h,o(e)),t(e,"ndSoundOpen",S,o(e)),t(e,"ndSoundClose",C,o(e)),e}i(e,n);var c=e.prototype;return c.show=function(){var n=r.instance.getAudioSetting(!0),e=r.instance.getAudioSetting(!1);this.ndMusicOpen.active=!n,this.ndMusicClose.active=n,this.ndSoundOpen.active=!e,this.ndSoundClose.active=e},c.onBtnHomeClick=function(){d.instance.loadScene("pve",[],(function(n,e){n&&console.error(n.message||n)}))},c.onBtnPlayAgainBtn=function(){"undefined"!=typeof Ads&&Ads.interstitial(),this.onBtnCloseClick(),u.instance.resetLevel()},c.onBtnMusicOpenClick=function(){r.instance.openMusic(),this.show()},c.onBtnMusicCloseClick=function(){r.instance.closeMusic(),this.show()},c.onBtnSoundOpenClick=function(){r.instance.openSound(),this.show()},c.onBtnSoundCloseClick=function(){r.instance.closeSound(),this.show()},c.onBtnCloseClick=function(){l.instance.hideDialog("dialog/gameSetting")},e}(s)).prototype,"ndMusicOpen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(g.prototype,"ndMusicClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(g.prototype,"ndSoundOpen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(g.prototype,"ndSoundClose",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=g))||p);c._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc"],(function(e){var a,n;return{setters:[function(e){a=e.cclegacy,n=e.director}],execute:function(){e({init:t,t:function(e,a){var n=window;if(!n.languages)return e;for(var t=e.split("."),o=n.languages[r],i=0;i<t.length;i++)if(!(o=o[t[i]]))return"";if(a)for(var u in a)o=o.replace("%{"+u+"}",a[u]);return o||""},updateSceneRenderers:o}),a._RF.push({},"b3f01X4Ik5LEbIPKXZr3JWD","LanguageData",void 0);var r=e("_language","zh");e("ready",!1);function t(a){e("ready",!0),r=e("_language",a)}function o(){for(var e=n.getScene().children,a=[],r=[],t=[],o=0;o<e.length;++o){var i=e[o].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(a,i);var u=e[o].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(r,u);var p=e[o].getComponentsInChildren("LocalizedMaterial");Array.prototype.push.apply(t,p)}for(var g=0;g<a.length;++g){var l=a[g];l.node.active&&l.updateLabel()}for(var c=0;c<r.length;++c){var d=r[c];d.node.active&&d.updateSprite()}for(var v=0;v<t.length;++v){var f=t[v];f.node.active&&f.updateMat()}}window._languageData={get language(){return r},init:function(e){t(e)},updateSceneRenderers:function(){o()}},a._RF.pop()}}}));

System.register("chunks:///_virtual/levelPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./constants.ts","./utils.ts","./propItem.ts","./targetCake.ts"],(function(t){var e,n,i,r,a,l,o,s,c,u,p,f,h,g,b,v;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){a=t.cclegacy,l=t._decorator,o=t.instantiate,s=t.Component},function(t){c=t.t},function(t){u=t.localConfig},function(t){p=t.playerData},function(t){f=t.uiManager},function(t){h=t.constants},function(t){g=t.utils},function(t){b=t.PropItem},function(t){v=t.TargetCake}],execute:function(){var L,d,m,y,C,k,P,I,S,w;a._RF.push({},"8622524wZFNZK4SKvWm789R","levelPanel",void 0);var z=l.ccclass,D=l.property;t("LevelPanel",z("LevelPanel")((m=e((d=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return e=t.call.apply(t,[this].concat(a))||this,i(e,"arrStarList",m,r(e)),i(e,"lbHighScore",y,r(e)),i(e,"lbLevelNum",C,r(e)),i(e,"pbPropItem",k,r(e)),i(e,"pbTargetCake",P,r(e)),i(e,"ndStartList",I,r(e)),i(e,"ndPropList",S,r(e)),i(e,"ndCakeList",w,r(e)),e.levelInfo=void 0,e.callback=void 0,e}n(e,t);var a=e.prototype;return a.show=function(t,e){this.levelInfo=t,this.callback=e,this.lbLevelNum.string=t.name,this.lbHighScore.string=c("pve.highest")+" "+p.instance.getHighestScoreByLevel(t.name);var n=t.targets.split("|"),i=this.ndCakeList.children;if(this.ndCakeList.children.length>n.length)for(var r=n.length;r<this.ndCakeList.children.length;r++)this.ndCakeList.children[r].active=!1;for(var a=0;a<n.length;a++){var l=n[a],s=null;a<i.length?s=i[a]:(s=o(this.pbTargetCake)).parent=this.ndCakeList,s.active=!0,s.getComponent(v).setInfo(l)}for(var f=u.instance.getTable("prop"),L=g.objectToArray(f),d=this.ndPropList.children,m=0;m<L.length;m++){var y=null,C=L[m];m<d.length?y=d[m]:(y=o(this.pbPropItem)).parent=this.ndPropList,y.getComponent(b).setInfo(C)}var k=p.instance.history;if(k[this.levelInfo.ID])for(var P=k[this.levelInfo.ID].star,I=0;I<h.MAX_GRADE_OF_EACH_PVE_LEVEL;I++)this.arrStarList[I].active=I<P;else this.arrStarList.forEach((function(t){t.active=!1}))},a.onBtnStartClick=function(){this.callback()},a.onBtnCloseClick=function(){f.instance.hideDialog("pve/levelPanel")},e}(s)).prototype,"arrStarList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=e(d.prototype,"lbHighScore",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(d.prototype,"lbLevelNum",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(d.prototype,"pbPropItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(d.prototype,"pbTargetCake",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(d.prototype,"ndStartList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(d.prototype,"ndPropList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(d.prototype,"ndCakeList",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=d))||L);a._RF.pop()}}}));

System.register("chunks:///_virtual/levelUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./resourceUtil.ts","./constants.ts","./LanguageData.ts","./uiManager.ts","./sceneManager.ts"],(function(e){var t,n,i,a,r,l,s,o,c,u,v,p,f,h,L,b,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,o=e.Label,c=e.Animation,u=e.Sprite,v=e.Component},function(e){p=e.playerData},function(e){f=e.resourceUtil},function(e){h=e.constants},function(e){L=e.t},function(e){b=e.uiManager},function(e){d=e.SceneManager}],execute:function(){var g,y,S,E,I,T,P,N,m,A,D,_,U,w,C,z,F,V,k;r._RF.push({},"09faeI+TthOKbk54kKEeYOU","levelUI",void 0);var M=l.ccclass,O=l.property;e("LevelUI",(g=M("LevelUI"),y=O(s),S=O(s),E=O(s),I=O(s),T=O(o),P=O(c),N=O(u),m=O(s),g((_=t((D=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"nStars",_,a(t)),i(t,"nCurrentLevel",U,a(t)),i(t,"nLevelNotPassed",w,a(t)),i(t,"nLevelPassed",C,a(t)),i(t,"lbLevel",z,a(t)),i(t,"aniTips",F,a(t)),i(t,"spAvatar",V,a(t)),i(t,"arrStarNode",k,a(t)),t.levelInfo=void 0,t.updateInterval=void 0,t.lastPositionY=void 0,t.pool=void 0,t.pool1=void 0,t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.aniTips.once(c.EventType.FINISHED,this.onAniTipsFinished,this)},r.onDisable=function(){this.aniTips.once(c.EventType.FINISHED,this.onAniTipsFinished,this)},r.onAniTipsFinished=function(){this.aniTips.play("pveLevelTipsIdle")},r.init=function(e){this.levelInfo=e,this.setLevelNum(e.name),this.setLevelStatus(e.status),this.setStars(e.star),p.instance.playerInfo.avatarUrl&&f.setAvatar(p.instance.playerInfo.avatarUrl,this.spAvatar,(function(){}))},r.setLevelNum=function(e){this.lbLevel.string=e},r.setLevelStatus=function(e){e===h.PVE_LEVEL_STATUS.DONE?(this.nCurrentLevel.active=!1,this.nLevelNotPassed.active=!1,this.nLevelPassed.active=!0):e===h.PVE_LEVEL_STATUS.DOING?(this.nCurrentLevel.active=!0,this.nLevelNotPassed.active=!1,this.nLevelPassed.active=!1):(this.nCurrentLevel.active=!1,this.nLevelNotPassed.active=!0,this.nLevelPassed.active=!1)},r.setStars=function(e){if(e){this.nStars.active=!0;for(var t=0;t<h.MAX_GRADE_OF_EACH_PVE_LEVEL;t++){var n=!1;t<=e-1&&(n=!0),this.arrStarNode[t].active=n}}else this.nStars.active=!1},r.onBtnLevelChallenge=function(){this.levelInfo.status!==h.PVE_LEVEL_STATUS.UNDONE?b.instance.showDialog("pve/levelPanel",[this.levelInfo,this.levelCallback]):b.instance.showTips(L("pve.cannotSkipLastLevel"))},r.levelCallback=function(){try{p.instance.level=this.levelInfo.ID,d.instance.loadScene("fight",[function(e){e()}],(function(e,t){e&&console.error(e.message||e)}))}catch(e){console.log("levelCallback.error",e)}},t}(v)).prototype,"nStars",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(D.prototype,"nCurrentLevel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(D.prototype,"nLevelNotPassed",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(D.prototype,"nLevelPassed",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(D.prototype,"lbLevel",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(D.prototype,"aniTips",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(D.prototype,"spAvatar",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(D.prototype,"arrStarNode",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=D))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/linkContent.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./clientEvent.ts","./gameLogic.ts","./loadsh.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./constants.ts","./fightHandGuide.ts","./linkItem.ts","./linkLine.ts"],(function(e){var t,i,n,r,s,o,a,c,h,d,f,l,C,u,p,k,g,L,v,O,I,S,y,N,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,o=e._decorator,a=e.UITransform,c=e.Node,h=e.Vec3,d=e.Animation,f=e.director,l=e.Prefab,C=e.instantiate,u=e.Component},function(e){p=e.AudioManager},function(e){k=e.clientEvent},function(e){g=e.GameLogic},function(e){L=e.loadsh},function(e){v=e.playerData},function(e){O=e.poolManager},function(e){I=e.resourceUtil},function(e){S=e.constants},function(e){y=e.FightHandGuide},function(e){N=e.LinkItem},function(e){T=e.LinkLine}],execute:function(){var _,E,m,P,w,U,x;s._RF.push({},"4f6b3WtEbBAH4oYBaofOW/U","linkContent",void 0);var B=o.ccclass,A=o.property,K=80,G=80,b=60,D=60;e("LinkContent",B("LinkContent")((m=t((E=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return t=e.call.apply(e,[this].concat(s))||this,n(t,"pfCake",m,r(t)),n(t,"pfLine",P,r(t)),n(t,"nodeLineGroup",w,r(t)),n(t,"nodeLinkOverEffect",U,r(t)),n(t,"nodeLinkGroup",x,r(t)),t.lastOperationTime=void 0,t.isShowHandGuide=void 0,t._fightScene=void 0,t.dictCakes=void 0,t.arrLinks=void 0,t.arrLines=void 0,t.levelInfo=void 0,t.currentCake=void 0,t.currentNode=void 0,t.preNode=void 0,t.clearScore=void 0,t.clearCake=void 0,t.cntTrigger=void 0,t.allTriggerOverCb=void 0,t.currentPropTouchNode=void 0,t.isRefreshing=void 0,t.arrConnected=void 0,t.nodeHand=void 0,t}i(t,e);var s=t.prototype;return s.show=function(e){var t=this.node.getComponent(a);K=t.width/8,G=t.height/8,b=K-25,D=G-25,this.lastOperationTime=0,this.isShowHandGuide=!1,this._fightScene=e,this.dictCakes={},this.arrLinks=[],this.arrLines=[],this.levelInfo=v.instance.getCurrentLevelInfo(),this.initCake()},s.createCake=function(e,t,i){var n=O.instance.getNode(this.pfCake,this.nodeLinkGroup);return n.position=this.getScreenPosByIndex(e),n.opacity=255,n.getComponent(N).show(e,t,i,this),this.dictCakes[e]=n,n},s.initCake=function(e){for(var t=this,i=this.levelInfo.cakes.split("|"),n=0;n<S.LINK_ROWS_COUNT;n++)for(var r=0;r<S.LINK_COLS_COUNT;r++){var s=r+n*S.LINK_COLS_COUNT,o=i[L.random(0,i.length-1)];this.createCake(s,o,!1)}this.showAllLinkItem(!0,(function(){e&&e(),t.lastOperationTime=0}))},s.showAllLinkItem=function(e,t){for(var i=S.LINK_ROWS_COUNT+S.LINK_ROWS_COUNT,n=0;n<i;n++)for(var r=0;r<S.LINK_COLS_COUNT&&!(r>n);r++)for(var s=0;s<S.LINK_ROWS_COUNT&&!(s>n);s++)if(s+r===n){var o=this.getIndexByPos(r,s);this.dictCakes.hasOwnProperty(o)&&(e?this.dictCakes[o].getComponent(N).playShowAction(.05*n):this.dictCakes[o].getComponent(N).playHideAction(.05*n,!1))}t&&this.scheduleOnce(t,.05*i+.5)},s.onEnable=function(){this.node.on(c.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(c.EventType.TOUCH_END,this.onTouchEnded,this),this.node.on(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.onDisable=function(){this.node.off(c.EventType.TOUCH_START,this.onTouchStart,this),this.node.off(c.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.off(c.EventType.TOUCH_END,this.onTouchEnded,this),this.node.off(c.EventType.TOUCH_CANCEL,this.onTouchCancel,this)},s.getCakeNodeByTouchPos=function(e){var t=this.nodeLinkGroup.getComponent(a).convertToWorldSpaceAR(new h(0,0,0)),i=e.clone().subtract(t),n=Math.floor(i.x/K)+Math.floor(i.y/G)*S.LINK_COLS_COUNT,r=this.dictCakes[n];return r&&(Math.abs(i.x-r.x)>b/2||Math.abs(i.y-r.y)>D/2)&&(r=null),r},s.drawLine=function(){var e=0;if(this.arrLinks.length>1){for(var t=this.arrLinks[0].getComponent(N),i=this.getPosByIndex(t.index),n=new h((i.x+.5)*K,(i.y+.5)*G,0),r=[],s=1;s<this.arrLinks.length;s++){var o=this.arrLinks[s].getComponent(N),a=this.getPosByIndex(o.index),c=new h((a.x+.5)*K,(a.y+.5)*G,0);r.push({start:n.clone(),end:c.clone()}),n=c}for(;e<r.length;e++){var d=r[e],f=null;e<this.arrLines.length?(f=this.arrLines[e]).getComponent(T):(f=O.instance.getNode(this.pfLine,this.nodeLineGroup),this.arrLines.push(f),f.getComponent(T).show()),f.getComponent(T).setLinePosition(d.start,d.end)}}if(e<this.arrLines.length){for(var l=e;l<this.arrLines.length;l++)O.instance.putNode(this.arrLines[l]);this.arrLines.splice(e,this.arrLines.length)}},s.clearLine=function(){for(var e=0;e<this.arrLines.length;e++)O.instance.putNode(this.arrLines[e]);this.arrLines=[]},s.hideDiffCake=function(){for(var e in this.dictCakes){var t=this.dictCakes[e];t.getComponent(N).cake!==this.currentCake&&(t.opacity=50)}},s.showAllCake=function(){for(var e in this.dictCakes){this.dictCakes[e].opacity=255}},s.checkStep=function(){},s.onTouchStart=function(e){if(!this._fightScene||this._fightScene.isLevelOver||!this._fightScene.isLevelStart)return this.currentNode=null,void(this.arrLinks=[]);var t=this.getCakeNodeByTouchPos(e.getUILocation());if(t){this.stopGuideHand(),this.arrLinks=[t],this.currentNode=t;var i=this.currentNode.getComponent(N);this.currentCake=i.cake,this.preNode=null,i.showSelect(!0),p.instance.playSound(S.AUDIO_SOUND.CLICK_CAKE,!1),this.drawLine(),this.hideDiffCake()}},s.onTouchMove=function(e){if(this.currentNode){var t=this.getCakeNodeByTouchPos(e.getUILocation());if(t&&t!==this.currentNode){var i=t.getComponent(N);if(this.currentCake===i.cake){if(this.preNode===t){var n=this.currentNode.getComponent(N);return n.showSelect(!1),n.isSpecial&&n.showSpecial(!1),this.currentNode=this.preNode,this.arrLinks.pop(),this.preNode=this.arrLinks[this.arrLinks.length-2],void this.drawLine()}if(-1!==this.arrLinks.indexOf(t))return;var r=this.getPosByIndex(i.index),s=this.currentNode.getComponent(N),o=this.getPosByIndex(s.index);if(Math.abs(r.x-o.x)<=1&&Math.abs(r.y-o.y)<=1){this.preNode=this.currentNode,this.currentNode=t,this.arrLinks.push(t),i.showSelect(!0),p.instance.playSound(S.AUDIO_SOUND.CLICK_CAKE,!1);var a=this.arrLinks.length;a>=6&&(6===a||(a-6)%4==0)&&i.showSpecial(!0),this.drawLine()}}}}},s.onTouchEnded=function(e){this.touchOver()},s.onTouchCancel=function(e){this.touchOver()},s.getScreenPosByIndex=function(e){var t=this.getPosByIndex(e);return new h((t.x+.5)*K,(t.y+.5)*G,0)},s.getPosByIndex=function(e){return new h(e%S.LINK_COLS_COUNT,Math.floor(e/S.LINK_COLS_COUNT),0)},s.getIndexByPos=function(e,t){return t*S.LINK_COLS_COUNT+e},s.touchOver=function(){if(!this.isShowHandGuide){if(this.arrLinks.length>=3)p.instance.playSound(S.AUDIO_SOUND.FINISH_LINK,!1),this.clearLinks();else{for(var e=0;e<this.arrLinks.length;e++)this.arrLinks[e].getComponent(N).showSelect(!1);this.arrLinks=[],this.preNode=null}this.currentNode=null,this.clearLine(),this.showAllCake(),this.checkStep()}},s.clearItemByEffect=function(e,t,i,n){var r=this.getPosByIndex(e);switch(t){case S.SPECIAL_EFFECT.HORIZONTAL:this.clearScore+=500,n||p.instance.playSound(S.AUDIO_SOUND.LINE_BOMB,!1),this._fightScene.effectGroup.showSkillLineEffect(this.getItemWorldPosByIndex(e),!0);for(var s=0;s<S.LINK_COLS_COUNT;s++)if(s!==r.x||i){var o=this.getIndexByPos(s,r.y);if(this.dictCakes.hasOwnProperty(o)){var a=this.dictCakes[o].getComponent(N);this.clearCake.hasOwnProperty(a.cake)?this.clearCake[a.cake]+=1:this.clearCake[a.cake]=1,a.showDestory(),delete this.dictCakes[o],a.index!==e&&(a.getEffect()?this.clearItemByEffect(a.index,a.getEffect(),i):this.clearScore+=50)}}break;case S.SPECIAL_EFFECT.VERTICAL:this.clearScore+=500,n||p.instance.playSound(S.AUDIO_SOUND.LINE_BOMB,!1),this._fightScene.effectGroup.showSkillLineEffect(this.getItemWorldPosByIndex(e),!1);for(var c=0;c<S.LINK_ROWS_COUNT;c++)if(c!==r.y||i){var d=this.getIndexByPos(r.x,c);if(this.dictCakes.hasOwnProperty(d)){var f=this.dictCakes[d].getComponent(N);this.clearCake.hasOwnProperty(f.cake)?this.clearCake[f.cake]+=1:this.clearCake[f.cake]=1,f.showDestory(),delete this.dictCakes[d],f.index!==e&&(f.getEffect()?this.clearItemByEffect(f.index,f.getEffect(),i):this.clearScore+=50)}}break;case S.SPECIAL_EFFECT.PLUS:p.instance.playSound(S.AUDIO_SOUND.PLUS_BOMB,!1),this.clearItemByEffect(e,S.SPECIAL_EFFECT.HORIZONTAL,i,!0),this.clearItemByEffect(e,S.SPECIAL_EFFECT.VERTICAL,i,!0);break;case S.SPECIAL_EFFECT.CENTER:this.clearScore+=1500,this._fightScene.effectGroup.showSkillRangeEffect(this.getItemWorldPosByIndex(e));for(var l=-2;l<=2;l++)for(var C=-2;C<=2;C++)if(0!==l||0!==C||i){var u=new h(r.x+l,r.y+C,0);if(!(u.x<0||u.x>S.LINK_COLS_COUNT||u.y<0||u.y>S.LINK_ROWS_COUNT)&&Math.abs(u.x-r.x)+Math.abs(u.y-r.y)<=2){var k=this.getIndexByPos(u.x,u.y);if(this.dictCakes.hasOwnProperty(k)){var g=this.dictCakes[k].getComponent(N);this.clearCake.hasOwnProperty(g.cake)?this.clearCake[g.cake]+=1:this.clearCake[g.cake]=1,g.showDestory(),delete this.dictCakes[k],g.index!==e&&(g.getEffect()?this.clearItemByEffect(g.index,g.getEffect(),i):this.clearScore+=50)}}}}},s.clearLinks=function(){var e=this,t={},i={};this.clearScore=0;for(var n=0;n<this.arrLinks.length;n++){var r=this.arrLinks[n].getComponent(N),s=r.getEffect();if(s&&(i[r.index]=s),r.isSpecial){var o=null;if(5===n)o=L.random(0,1)?S.SPECIAL_EFFECT.HORIZONTAL:S.SPECIAL_EFFECT.VERTICAL,this.clearScore+=1e3;else(o=(n-5)/4%2?S.SPECIAL_EFFECT.PLUS:S.SPECIAL_EFFECT.CENTER)===S.SPECIAL_EFFECT.PLUS?this.clearScore+=2e3:this.clearScore+=3e3;r.setSpecialType(o),t[r.index]=o}else s||(this.clearScore+=50);r.showDestory(),delete this.dictCakes[r.index]}for(var a in this.clearCake={},i)this.clearItemByEffect(a,i[a],!1);v.instance.addScore(this.clearScore);var c=this.arrLinks.length;g.instance.finishLink(this.currentCake,c);var h=null;c>=22?h=S.AUDIO_SOUND.UNBELIEVABLE:c>=18?h=S.AUDIO_SOUND.AMAZING:c>=14?h=S.AUDIO_SOUND.EXCELLENT:c>=10?h=S.AUDIO_SOUND.GREAT:c>=6&&(h=S.AUDIO_SOUND.GOOD),h&&p.instance.playSound(h,!1),this.finishTargetsBatch(),this.arrLinks=[],Object.keys(t).length>0?this.scheduleOnce((function(){e._fightScene.showFlyEffect(t,(function(){g.instance.checkGame()}))}),.1):g.instance.checkGame(),this.scheduleOnce(this.fillEmptyCell,.3)},s.fillEmptyCell=function(){for(var e=this,t=0;t<S.LINK_COLS_COUNT;t++){for(var i=-1,n=0;n<S.LINK_ROWS_COUNT;n++){var r=n*S.LINK_COLS_COUNT+t;if(this.dictCakes.hasOwnProperty(r)){if(-1!==i){var s=i*S.LINK_COLS_COUNT+t;this.dictCakes[s]=this.dictCakes[r];var o=this.dictCakes[s].getComponent(N);o.index=s,o.playMove2Index(s),delete this.dictCakes[r],i+=1}}else-1===i&&(i=n)}if(-1!==i)for(var a=this.levelInfo.cakes.split("|"),c=i;c<S.LINK_ROWS_COUNT;c++){var h=c*S.LINK_COLS_COUNT+t,d=(S.LINK_ROWS_COUNT+c-i)*S.LINK_COLS_COUNT+t,f=a[L.random(0,a.length-1)];this.createCakeForFill(h,f,d)}}this.scheduleOnce((function(){e.checkIsBlocked()}),.2)},s.createCakeForFill=function(e,t,i){var n=O.instance.getNode(this.pfCake,this.nodeLinkGroup);n.position=this.getScreenPosByIndex(i),n.opacity=255;var r=n.getComponent(N);return r.show(e,t,!0,this),r.playMove2Index(e),this.dictCakes[e]=n,n},s.getItemWorldPosByIndex=function(e){var t=this.getScreenPosByIndex(e);return this.nodeLinkGroup.getComponent(a).convertToWorldSpaceAR(new h(t.x,t.y,0))},s.getNoEffectLinkItemIndex=function(){for(var e=0;;){var t=L.random(0,S.LINK_ROWS_COUNT*S.LINK_COLS_COUNT-1);if(this.dictCakes.hasOwnProperty(t)){var i=this.dictCakes[t].getComponent(N);if(!i.isSpecial&&!i.getEffect())return i.index}if(++e>30)return null}},s.markLinkItemEffect=function(e,t){this.dictCakes.hasOwnProperty(e)&&this.dictCakes[e].getComponent(N).markEffect(t)},s.addEffect=function(e,t){this.dictCakes.hasOwnProperty(e)&&this.dictCakes[e].getComponent(N).showEffect(t)},s.delayClearItem=function(e,t,i){var n=this;this.scheduleOnce((function(){n.cntTrigger--,n.dictCakes.hasOwnProperty(t)&&(n.clearScore=0,n.clearCake={},n.clearItemByEffect(t,i,!0),v.instance.addScore(n.clearScore),n.finishTargetsBatch()),n.cntTrigger<=0&&n.allTriggerOverCb&&n.allTriggerOverCb()}),.2*e)},s.triggerAllSpecialEffect=function(e){for(var t=0,i=0;i<S.LINK_ROWS_COUNT;i++)for(var n=0;n<S.LINK_COLS_COUNT;n++){var r=this.getIndexByPos(n,i);if(this.dictCakes.hasOwnProperty(r)){var s=this.dictCakes[r].getComponent(N);s&&s.getEffect()&&(this.delayClearItem(t,r,s.getEffect()),t++)}}this.cntTrigger=t,this.allTriggerOverCb=e,this.cntTrigger<=0&&this.allTriggerOverCb&&this.allTriggerOverCb()},s.finishTargetsBatch=function(){for(var e in this.clearCake)v.instance.finishTarget(e,this.clearCake[e]),k.dispatchEvent("updateTargets",e);k.dispatchEvent("updateStep")},s.showLinkFinishEffect=function(e){var t=this;I.createEffect("fight/frame/frame",(function(i,n){if(i)e&&e(i);else{var r=n.getComponent(d);r.play("frameAni"),r.once(d.EventType.FINISHED,(function(){n&&n.destroy(),e&&e(null)}),t)}}),this.nodeLinkOverEffect)},s.checkIsBlocked=function(){for(var e=0;e<S.LINK_ROWS_COUNT;e++)for(var t=0;t<S.LINK_COLS_COUNT;t++){var i=this.getIndexByPos(t,e);if(this.dictCakes.hasOwnProperty(i)){var n=this.dictCakes[i].getComponent(N);if(n)if(this.checkItemChannelIsClear(i,n.cake))return}}this.refreshLinkItems()},s.checkItemChannelIsClear=function(e,t,i){for(var n=this.getPosByIndex(e),r=0,s=n.y-1;s<=n.y+1;s++)for(var o=n.x-1;o<=n.x+1;o++)if(!(s<0||o<0||s>=S.LINK_ROWS_COUNT||o>=S.LINK_COLS_COUNT||s===n.y&&o===n.x)){if(i&&i.x===o&&i.y===s)continue;var a=this.getIndexByPos(o,s);if(this.dictCakes.hasOwnProperty(a)){var c=this.dictCakes[a].getComponent(N);if(c&&c.cake===t){if(i)return!0;if(this.checkItemChannelIsClear(a,t,n))return!0;if(++r>=2)return!0}}}return!1},s.onPropTouchStart=function(e){var t=this.getCakeNodeByTouchPos(e.getUILocation());t&&t.setScale(.9,.9,.9),this.currentPropTouchNode=t},s.onPropTouchEnd=function(e){if(!this.currentPropTouchNode)return-1;this.currentPropTouchNode.setScale(1,1,1);var t=this.getCakeNodeByTouchPos(e.getUILocation());return t===this.currentPropTouchNode?t.getComponent(N).index:(this.currentPropTouchNode=null,-1)},s.onPropTouchCancel=function(e){return this.currentPropTouchNode&&(this.currentPropTouchNode.setScale(1,1,1),this.currentPropTouchNode=null),-1},s.refreshLinkItems=function(){var e=this;return!this.isRefreshing&&(this.isRefreshing=!0,this.showAllLinkItem(!1,(function(){e.initCake((function(){e.isRefreshing=!1}))})),!0)},s.destoryCake=function(e){if(this.dictCakes.hasOwnProperty(e)){var t=this.dictCakes[e].getComponent(N);t.showDestory(),delete this.dictCakes[e],this.clearScore=0,this.clearCake={},this.clearCake[t.cake]=1,t.getEffect()?this.clearItemByEffect(e,t.getEffect(),!1):this.clearScore=50,v.instance.addScore(this.clearScore),this.finishTargetsBatch(),g.instance.checkGame(),this.scheduleOnce(this.fillEmptyCell,.3)}},s.getConnectCake=function(e,t,i){for(var n=this.getPosByIndex(e),r=n.y-1;r<=n.y+1;r++)for(var s=n.x-1;s<=n.x+1;s++)if(!(r<0||s<0||r>=S.LINK_ROWS_COUNT||s>=S.LINK_COLS_COUNT||r===n.y&&s===n.x)){if(i&&i.x===s&&i.y===r)continue;var o=this.getIndexByPos(s,r);if(this.dictCakes.hasOwnProperty(o)){var a=this.dictCakes[o].getComponent(N);if(a&&a.cake===t){if(i)return this.arrConnected.push(o),!0;var c=this.arrConnected.length;if(this.getConnectCake(o,t,n))return this.arrConnected.splice(c,0,o),!0}}}return!1},s.getConnectCakeByIndex=function(e,t){if(this.arrConnected=[],this.dictCakes.hasOwnProperty(e)){this.arrConnected.push(e);var i=this.dictCakes[e].getComponent(N);if(i)if(t){if(-1!==t.indexOf(i.cake)&&(this.getConnectCake(e,i.cake),this.arrConnected.length>=3))return!0}else if(this.getConnectCake(e,i.cake),this.arrConnected.length>=3)return!0}return!1},s.findConnectPathForGuide=function(e){var t=null;if(e)for(var i in t=[],v.instance.dictTargets)v.instance.dictTargets[i]&&t.push(i);for(var n=S.LINK_ROWS_COUNT*S.LINK_COLS_COUNT,r=n/2+S.LINK_COLS_COUNT/2,s=r-1,o=r,a=!1;!a&&(o<n||s>=0);){if(this.arrConnected=[],o<n)if(this.getConnectCakeByIndex(o,t))return!0;if(s>0&&(a=this.getConnectCakeByIndex(s,t)))return!0;o++,s--}return!1},s.showGuideLine=function(e){var t;if(this.arrLinks=[],"fight"!==(null==(t=f.getScene())?void 0:t.name)||!this.dictCakes)return!1;for(var i=0;i<=e;i++){var n=this.dictCakes[this.arrConnected[i]];n&&this.arrLinks.push(n)}this.drawLine()},s.showGuideHand=function(){var e=this;this.isShowHandGuide=!0;var t=this.findConnectPathForGuide(!0);if(t||(t=this.findConnectPathForGuide(!1)),t){for(var i=[],n=0;n<this.arrConnected.length;n++){i.push(this.getScreenPosByIndex(this.arrConnected[n])),this.dictCakes[this.arrConnected[n]].getComponent(N).showSelect(!0)}this.nodeHand?(this.nodeHand.active=!0,this.nodeHand.getComponent(y).showGuide(i,(function(t){e.showGuideLine(t)}))):I.loadRes("prefab/fight/fightHandGuide",l,(function(t,n){var r=C(n);r.parent=e.node,e.nodeHand=r,e.nodeHand.getComponent(y).showGuide(i,(function(t){e.showGuideLine(t)}))}))}},s.stopGuideHand=function(){if(this.isShowHandGuide=!1,this.lastOperationTime=0,this.arrConnected&&this.dictCakes)for(var e=0;e<this.arrConnected.length;e++){var t=this.dictCakes[this.arrConnected[e]];if(t)t.getComponent(N).showSelect(!1)}this.nodeHand&&(this.nodeHand.destroy(),this.nodeHand=null),this.arrLinks=[],this.drawLine()},s.update=function(e){this._fightScene.isLevelOver||!this._fightScene.isLevelStart||this.isShowHandGuide||this.currentNode||this._fightScene.isShowOperationUI||(this.lastOperationTime+=e,this.lastOperationTime>5&&(this.showGuideHand(),this.lastOperationTime=0))},t}(u)).prototype,"pfCake",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"pfLine",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(E.prototype,"nodeLineGroup",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(E.prototype,"nodeLinkOverEffect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(E.prototype,"nodeLinkGroup",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=E))||_);s._RF.pop()}}}));

System.register("chunks:///_virtual/linkItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts","./resourceUtil.ts","./constants.ts"],(function(e){var t,i,n,s,c,a,o,l,r,f,p,h,u,E,S,T;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){c=e.cclegacy,a=e._decorator,o=e.Enum,l=e.TweenSystem,r=e.tween,f=e.UITransform,p=e.Vec3,h=e.Animation,u=e.Component},function(e){E=e.poolManager},function(e){S=e.resourceUtil},function(e){T=e.constants}],execute:function(){var d,C,k,I;c._RF.push({},"000eahOFsJC4YWx/wV0fJqQ","linkItem",void 0);var y=a.ccclass,L=a.property,A=o({SHOW:"linkItemShow",HIDE:"linkItemHide",SELECT:"linkItemSelect",SHAKE:"linkItemShake",SKILL:"linkItemSkill"});e("LinkItem",y("LinkItem")((k=t((C=function(e){function t(){for(var t,i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t=e.call.apply(e,[this].concat(c))||this,n(t,"spCake",k,s(t)),n(t,"aniCake",I,s(t)),t.index=void 0,t.cake=void 0,t.linkParent=void 0,t.isSpecial=void 0,t.specialType=void 0,t.effectType=void 0,t.currentStatus=void 0,t.effectNode=void 0,t.specialEffect=void 0,t}i(t,e);var c=t.prototype;return c.show=function(e,t,i,n){this.index=e,this.cake=t,this.linkParent=n,this.isSpecial=!1,this.specialType=null,this.effectType=null,this.node.setSiblingIndex(T.ZORDER.LINK_ITEM_NORMAL),this.spCake.node.setScale(0,0,0),S.setCakeIcon(this.cake,this.spCake,(function(){})),i&&this.playShowAction(0)},c.playShowAction=function(e){var t=this;l.instance.ActionManager.removeAllActionsFromTarget(this.node),r(this.node).delay(e).call((function(){t.aniCake.play(A.SHOW),t.currentStatus=A.SHOW})).start()},c.playHideAction=function(e,t){var i=this;l.instance.ActionManager.removeAllActionsFromTarget(this.node),r(this.node).delay(e).call((function(){i.aniCake.play(A.HIDE),i.currentStatus=A.HIDE,t&&i.linkParent._fightScene.effectGroup.showLinkItemDestroyEffect(i.node.getComponent(f).convertToWorldSpaceAR(new p(0,0,0)),i.getScore()),i.aniCake.once(h.EventType.FINISHED,(function(){E.instance.putNode(i.node),i.effectNode&&(i.effectNode.destroy(),i.effectNode=null),i.specialEffect&&(E.instance.putNode(i.specialEffect),i.specialEffect=null)}),i)})).start()},c.getScore=function(){var e=0;if(this.isSpecial&&(this.specialType===T.SPECIAL_EFFECT.HORIZONTAL||this.specialType===T.SPECIAL_EFFECT.VERTICAL?e+=1e3:this.specialType===T.SPECIAL_EFFECT.PLUS?e+=2e3:this.specialType===T.SPECIAL_EFFECT.CENTER&&(e+=3e3),!this.effectType))return e;if(this.effectType)switch(this.effectType){case T.SPECIAL_EFFECT.HORIZONTAL:case T.SPECIAL_EFFECT.VERTICAL:return e+500;case T.SPECIAL_EFFECT.PLUS:return e+1e3;case T.SPECIAL_EFFECT.CENTER:return e+1500}return 50},c.showSelect=function(e){var t=this.cake;e?(this.aniCake.play(A.SELECT),this.currentStatus=A.SELECT,t=this.cake+"Light"):this.effectType?(this.aniCake.play(A.SKILL),this.currentStatus=A.SKILL):this.aniCake.stop(),S.setCakeIcon(t,this.spCake,(function(){}))},c.showDestory=function(){this.playHideAction(0,!0)},c.playMove2Index=function(e){var t=this,i=this.linkParent.getScreenPosByIndex(e),n=i.clone().subtract(this.node.position).length();l.instance.ActionManager.removeAllActionsFromTarget(this.node),r(this.node).to(n/1e3,{position:i},{easing:"backIn"}).call((function(){t.aniCake.play(A.SHAKE)})).start()},c.showSpecial=function(e){var t=this;this.isSpecial=e,e?S.getEffectPrefab("fight/linkStar/linkStar",(function(e,i){e||t.isSpecial&&(t.specialEffect=E.instance.getNode(i,t.node),t.specialEffect.position=new p(0,0,0),t.specialEffect.getComponent(h).play("linkStarShow"))})):this.specialEffect&&(E.instance.putNode(this.specialEffect),this.specialEffect=null)},c.setSpecialType=function(e){this.specialType=e},c.markEffect=function(e){this.effectType=e},c.showEffect=function(e){var t=this;this.effectNode&&this.effectNode.destroy(),this.node.setSiblingIndex(T.ZORDER.LINK_ITEM_SKILL),this.effectType=e,this.aniCake.play(A.SKILL),this.currentStatus=A.SKILL;var i=0,n="fight/effectSkillTips/skillTipsLine";switch(e){case T.SPECIAL_EFFECT.HORIZONTAL:break;case T.SPECIAL_EFFECT.VERTICAL:i=90;break;case T.SPECIAL_EFFECT.PLUS:n="fight/effectSkillTips/skillTipsPlus";break;case T.SPECIAL_EFFECT.CENTER:n="fight/effectSkillTips/skillTipsRange"}S.createEffect(n,(function(e,n){e||(t.effectNode=n,t.effectNode.eulerAngles=new p(0,0,i))}),this.node)},c.getEffect=function(){return this.effectType},t}(u)).prototype,"spCake",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(C.prototype,"aniCake",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=C))||d);c._RF.pop()}}}));

System.register("chunks:///_virtual/linkLine.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,e,t,o,r,a,c,s,l,u;return{setters:[function(n){i=n.applyDecoratedDescriptor,e=n.inheritsLoose,t=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){r=n.cclegacy,a=n._decorator,c=n.Animation,s=n.Vec3,l=n.misc,u=n.Component}],execute:function(){var p,h,y;r._RF.push({},"23fc7Zdwd5LN4VPatBdx7mq","linkLine",void 0);var f=a.ccclass,m=a.property;n("LinkLine",f("LinkLine")((y=i((h=function(n){function i(){for(var i,e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i=n.call.apply(n,[this].concat(r))||this,t(i,"animation",y,o(i)),i}e(i,n);var r=i.prototype;return r.show=function(){var n=this;this.animation.play("linkLineShow"),this.animation.once(c.EventType.FINISHED,(function(){n.animation.play("linkLineNormal")}))},r.setLinePosition=function(n,i){var e=i.clone().subtract(n),t=new s(n.x+e.x/2,n.y+e.y/2,0);this.node.position=t;var o=0;o=0!==e.x?l.radiansToDegrees(Math.atan(e.y/e.x)):90,this.node.eulerAngles=new s(0,0,o)},i}(u)).prototype,"animation",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=h))||p);r._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,t,e,r,o,a,l;return{setters:[function(n){i=n.applyDecoratedDescriptor,t=n.inheritsLoose,e=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){o=n.cclegacy,a=n._decorator,l=n.Component}],execute:function(){var c,s,u,p;o._RF.push({},"7c72f8OVs9Jgr00M87vUcnZ","loading",void 0);var f=a.ccclass,g=a.property;n("Loading",f("Loading")((u=i((s=function(n){function i(){for(var i,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return i=n.call.apply(n,[this].concat(o))||this,e(i,"txtTips",u,r(i)),e(i,"aniLoading",p,r(i)),i}t(i,n);var o=i.prototype;return o.show=function(n){this.txtTips.string=n||""},o.onEnable=function(){this.aniLoading.play()},o.onDisable=function(){this.aniLoading.stop()},i}(l)).prototype,"txtTips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=i(s.prototype,"aniLoading",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=s))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/loadingUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts"],(function(t){var e,n,r,i,s,a,l,o,u,h,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,i=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,l=t.Node,o=t.sys,u=t.Widget,h=t.Sprite,c=t.Component},function(t){p=t.constants}],execute:function(){var g,L,f,d,b,y,v,k,m,x;s._RF.push({},"f33bfL32OJOUqxJ3VWLer3l","loadingUI",void 0);var I=a.ccclass,A=a.property;t("LoadingUI",(g=I("LoadingUI"),L=A(l),g((b=e((d=function(t){function e(){for(var e,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return e=t.call.apply(t,[this].concat(s))||this,r(e,"progressBar",b,i(e)),r(e,"percentLabel",y,i(e)),r(e,"versionLabel",v,i(e)),r(e,"tipsNode",k,i(e)),r(e,"spriteArr",m,i(e)),r(e,"wrapper",x,i(e)),e.updateTimer=null,e.updateInterval=null,e.totalLength=null,e.lengthInterval=null,e.type=null,e.callback=null,e.tasks=null,e.currentMaxLength=null,e.currentLength=null,e.taskIndex=null,e.running=null,e}n(e,t);var s=e.prototype;return s.onLoad=function(){if(this.updateTimer=0,this.updateInterval=.01,this.totalLength=this.progressBar.totalLength,this.lengthInterval=30,o.isMobile){var t,e=null==(t=this.wrapper)?void 0:t.getComponent(u);if(!e)return;e.isAlignLeft=!0,e.isAlignRight=!0,e.isAlignBottom=!0,e.isAlignTop=!0}},s.onEnable=function(){var t=Math.floor(3*Math.random());t=t>=3?2:t,this.tipsNode.getComponent(h).spriteFrame=this.spriteArr[t]},s.startLoading=function(t,e,n){this.node.active=!0,this.type=t,this.callback=n,this.tasks=e,this.currentMaxLength=0,this.currentLength=0,this.progressBar.progress=0,this.percentLabel.string="0%",this.taskIndex=0,this.running=!0,this.nextTask([])},s.nextTask=function(t){if(this.tasks){if(this.taskIndex===this.tasks.length)return this.currentMaxLength=this.totalLength,void(this.type===p.SCENE_MANAGER_TYPE.LOAD&&(this.currentLength=this.currentMaxLength,this.setProgress()));this.type===p.SCENE_MANAGER_TYPE.LOAD&&(this.currentLength=this.currentMaxLength,this.setProgress());var e=this;t.push((function(t,n){if(t)return e.callback.apply(null,[t].concat(n));e.nextTask(Array.prototype.slice.call(arguments).slice(1))}));var n=this.tasks[this.taskIndex++];this.currentMaxLength=this.totalLength/(this.tasks.length+1)*this.taskIndex,n.apply(null,t)}},s.update=function(t){this.updateTimer+=t,this.updateTimer<this.updateInterval||this.running&&(this.updateTimer=0,this.currentLength+=this.lengthInterval,this.currentLength=this.currentLength>this.currentMaxLength?this.currentMaxLength:this.currentLength,this.setProgress())},s.setProgress=function(){var t=this.currentLength/this.totalLength;t=t>1?1:t,this.percentLabel.string=Math.floor(100*t)+"%",this.progressBar.progress=t,1===t&&(this.running=!1,this.callback.apply(null,[null].concat(null)))},e}(c)).prototype,"progressBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(d.prototype,"percentLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(d.prototype,"versionLabel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(d.prototype,"tipsNode",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(d.prototype,"spriteArr",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=e(d.prototype,"wrapper",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=d))||f));s._RF.pop()}}}));

System.register("chunks:///_virtual/loadsh.ts",["cc"],(function(n){var t,e,r,i,o,u;return{setters:[function(n){t=n.cclegacy,e=n._decorator,r=n.view,i=n.screen,o=n.Widget,u=n.ResolutionPolicy}],execute:function(){var c,a;t._RF.push({},"a40a4pGR6lCqo0coR1W4kAl","loadsh",void 0);var f=e.ccclass;n("loadsh",f("loadsh")(((a=function(){function n(){}return n.find=function(t,e){var r;if(Array.isArray(t)||(t=n._toArray(t)),(r=t.filter(e)).length)return r[0]},n.forEach=function(t,e){Array.isArray(t)?t.forEach(e):n._toArrayKey(t).forEach((function(n,r,i){var o=n.key,u=n.value;e(u,o,t)}))},n.cloneDeep=function(t){if(null===t||"object"!=typeof t)return t;var e={};for(var r in t.constructor===Array&&(e=[]),t)t.hasOwnProperty(r)&&(e[r]=n.cloneDeep(t[r]));return e},n.map=function(t,e){Array.isArray(t)||(t=n._toArray(t));var r=[];return t.forEach((function(n,t,i){r.push(e(n,t,i))})),r},n._toArrayKey=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push({key:e,value:n[e]});return t},n._toArray=function(n){var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(n[e]);return t},n.filter=function(t,e){return Array.isArray(t)||(t=n._toArray(t)),t.filter(e)},n.isEqual=function(t,e){if(!(t instanceof Object)||!(e instanceof Object))return t===e;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var r in t){var i=t[r]instanceof Object,o=e[r]instanceof Object;if(i&&o)return n.isEqual(t[r],e[r]);if(t[r]!==e[r])return!1}return!0},n.pullAllWith=function(n,t,e){return t.forEach((function(t){n.filter((function(n){return e(n,t)})).forEach((function(t){var e=n.indexOf(t);-1!==n.indexOf(t)&&n.splice(e,1)}))})),n},n.now=function(){return Date.now()},n.pullAll=function(n,t){return t.forEach((function(t){var e=n.indexOf(t);-1!==n.indexOf(t)&&n.splice(e,1)})),n},n.forEachRight=function(t,e){Array.isArray(t)||(t=n._toArray(t));for(var r=t.length-1;r>=0;r--){if(!e(t[r]))break}},n.startsWith=function(n,t,e){return(n=n.substr(e)).startsWith(t)},n.endsWith=function(n,t,e){return(n=n.substr(e)).endsWith(t)},n.remove=function(t,e){var r=[],i=[];return t.forEach((function(n,t){e(n)&&(r.push(n),i.push(t))})),n._basePullAt(t,i),r},n._basePullAt=function(n,t){for(var e,r=n?t.length:0,i=r-1;r--;){var o=t[r];r!==i&&o===e||(e=o,Array.prototype.splice.call(n,o,1))}return n},n.findIndex=function(n,t,e){var r;if(n=n.slice(e),"function"==typeof t){for(r=0;r<n.length;r++)if(t(n[r]))return r}else if(Array.isArray(t))for(r=0;r<n.length;r++){var i=t[0],o=!0;if(t.length>1&&(o=t[1]),n[r][i]===o)return r}else for(r=0;r<n.length;r++)if(n[r]===t)return r;return-1},n.concat=function(){var n=arguments.length;if(!n)return[];for(var t=arguments[0],e=1;e<n;)t=t.concat(arguments[e]),e++;return t},n.isNumber=function(n){return"number"==typeof n},n.indexOf=function(n,t,e){return(n=n.slice(e)).indexOf(t)},n.join=function(n,t){if(null===n)return"";var e="";return n.forEach((function(n){e+=n+t})),e.substr(0,e.length-1)},n.split=function(n,t,e){return n.split(t,e)},n.max=function(n){if(n&&n.length){for(var t,e=0;e<n.length;e++)0===e?t=n[0]:t<n[e]&&(t=n[e]);return t}},n.drop=function(n,t){return(null===n?0:n.length)?n.slice(t):[]},n.flattenDeep=function(t){return t.reduce((function(t,e){return t.concat(Array.isArray(e)?n.flattenDeep(e):e)}),[])},n.uniq=function(n){var t=[];return n.forEach((function(n){-1===t.indexOf(n)&&t.push(n)})),t},n.isNaN=function(t){return n.isNumber(t)&&t!==+t},n.chunk=function(n,t){if(!(null===n?0:n.length)||t<1)return[];for(var e=[];n.length>t;)e.push(n.slice(0,t)),n=n.slice(t);return e.push(n),e},n.toFinite=function(n){var t=1/0;return n?(n=Number(n))===t||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0},n.isObject=function(n){var t=typeof n;return null!==n&&("object"===t||"function"===t)},n.isLength=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=n.MAX_SAFE_INTEGER},n._isArrayLike=function(t){return null!==t&&n.isLength(t.length)},n.maxBy=function(n,t){if(n&&n.length){for(var e,r,i=0;i<n.length;i++)0===i?(e=t(n[0]),r=n[0]):e<n[i]&&(e=n[i],r=n[i]);return r}},n.minBy=function(n,t){if(n&&n.length){for(var e,r,i=0;i<n.length;i++)0===i?(e=t(n[0]),r=n[0]):e>n[i]&&(e=t(n[i]),r=n[i]);return r}},n.sumBy=function(n,t){var e=0;for(var r in n)e+=t(n[r]);return e},n.countBy=function(n,t){var e={};for(var r in n){var i=t(r);e.hasOwnProperty(i)?e[i]+=1:e[i]=1}return e},n.random=function(n,t){var e=Math.random()*(t-n+1)+n;return Math.floor(e)},n.checkAspectRatioGame=function(n){console.log("view.getResolutionPolicy().canvasSize"),console.log(r.getResolutionPolicy().canvasSize),console.log("\n\t\tview.getDesignResolutionSize() - "+r.getDesignResolutionSize()+"\n\n\t\tview.getViewportRect() - "+r.getViewportRect()+"\n\t\tview.getVisibleOrigin() - "+r.getVisibleOrigin()+"\n\t\tview.getVisibleOriginInPixel() - "+r.getVisibleOriginInPixel()+"\n\t\tview.getVisibleSize() - "+r.getVisibleSize()+"\n\t\tview.getVisibleSizeInPixel() - "+r.getVisibleSizeInPixel()+"\n\t\tview.getCanvasSize() - "+r.getCanvasSize()+"\n\t\tview.getFrameSize() - "+r.getFrameSize()+"\n\n\n\t\tscreen.devicePixelRatio - "+i.devicePixelRatio+"\n\t\tscreen.windowSize - "+i.windowSize+"\n\t\t");var t=r.getFrameSize().height/r.getFrameSize().width,e=null==n?void 0:n.getComponent(o);if(t<1.6){if(r.setDesignResolutionSize(720,1120,u.FIXED_HEIGHT),!e)return;this.setWidgetPolitic(e,!1)}else if(t<1.7){if(r.setDesignResolutionSize(720,1180,u.FIXED_HEIGHT),!e)return;this.setWidgetPolitic(e,!1)}else{if(r.setDesignResolutionSize(720,1280,u.FIXED_WIDTH),!e)return;this.setWidgetPolitic(e,!0)}},n.setWidgetPolitic=function(n,t){n.isAlignLeft=t,n.isAlignRight=t,n.isAlignBottom=t,n.isAlignTop=t},n}()).MAX_SAFE_INTEGER=9007199254740991,c=a))||c);t._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["./rollupPluginModLoBabelHelpers.js","cc","./csvManager.ts","./resourceUtil.ts"],(function(n){var t,e,a,r,i,c;return{setters:[function(n){t=n.createClass},function(n){e=n.cclegacy,a=n._decorator,r=n.resources},function(n){i=n.CSVManager},function(n){c=n.resourceUtil}],execute:function(){var o,s;e._RF.push({},"12facSZhFRGIYa7yxiLVDOp","localConfig",void 0);var u=a.ccclass;a.property,n("localConfig",u("localConfig")(((s=function(){function n(){this._csvManager=new i,this._callback=new Function,this._currentLoad=0,this._cntLoad=0}var e=n.prototype;return e.loadConfig=function(n){this._callback=n,this._loadCSV()},e._loadCSV=function(){var n=this;r.loadDir("datas",(function(t,e){if(!t){var a=e.filter((function(n){return".md"!==n._native}));n._cntLoad=a.length,a.length?a.forEach((function(t,e,a){c.getTextData(t.name,(function(e,a){n._csvManager.addTable(t.name,a),n._tryToCallbackOnFinished()}))})):n._tryToCallbackOnFinished()}}))},e.queryOne=function(n,t,e){return this._csvManager.queryOne(n,t,e)},e.queryByID=function(n,t){return this._csvManager.queryByID(n,t)},e.getTable=function(n){return this._csvManager.getTable(n)},e.getTableArr=function(n){return this._csvManager.getTableArr(n)},e.queryAll=function(n,t,e){return this._csvManager.queryAll(n,t,e)},e.queryIn=function(n,t,e){return this._csvManager.queryIn(n,t,e)},e.queryByCondition=function(n,t){return this._csvManager.queryByCondition(n,t)},e._tryToCallbackOnFinished=function(){this._callback&&(this._currentLoad++,this._currentLoad>=this._cntLoad&&this._callback())},t(n,null,[{key:"instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,o=s))||o);e._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,n,r,a,o,l,c,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Component},function(e){c=e.ready,u=e.init,s=e.t}],execute:function(){var p,d,f;a._RF.push({},"edf98QH2D1AUoCrtQlbxFrU","LocalizedLabel",void 0);var h=o.ccclass,b=o.property,L=o.executeInEditMode;e("LocalizedLabel",h("LocalizedLabel")(p=L((f=t((d=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).label=null,n(t,"key",f,r(t)),t}i(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Label");if(e)return this.label=e,void this.updateLabel()},a.updateLabel=function(){this.label&&(this.label.string=s(this.key))},t}(l)).prototype,"key",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=d))||p)||p);a._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedMaterial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,a,r,n,l,o,s,u,c,h,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,a=e.inheritsLoose,r=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,o=e.Material,s=e.MeshRenderer,u=e.Component},function(e){c=e.ready,h=e.init,p=e._language}],execute:function(){var f,d,g,m,L,y,v,z,M,b,R;n._RF.push({},"35069qDXPFL47Ep1p+WLvRd","LocalizedMaterial",void 0);var D=l.ccclass,_=l.property,w=l.executeInEditMode,F=(f=D("LocalizedMaterialItem"),d=_({type:o}),f((L=t((m=function(){i(this,"language",L,this),i(this,"material",y,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),y=t(m.prototype,"material",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=m))||g);e("LocalizedMaterial",(v=D("LocalizedMaterial"),z=_({type:F}),v(M=w((R=t((b=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),l=0;l<a;l++)n[l]=arguments[l];return(t=e.call.apply(e,[this].concat(n))||this).mesh=null,i(t,"materialsList",R,r(t)),t}a(t,e);var n=t.prototype;return n.onLoad=function(){c||h("zh"),this.fetchRender()},n.fetchRender=function(){var e=this.getComponent(s);if(e)return this.mesh=e,void this.updateMat()},n.updateMat=function(){for(var e=0;e<this.materialsList.length;e++){var t=this.materialsList[e];t.language===p&&this.mesh&&this.mesh.setMaterial(t.material,0)}},t}(u)).prototype,"materialsList",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=b))||M)||M));n._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(e){var t,i,r,n,a,o,p,s,c,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty,r=e.inheritsLoose,n=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,p=e.SpriteFrame,s=e.Component},function(e){c=e.ready,u=e.init,l=e._language}],execute:function(){var f,h,d,g,y,z,L,m,b,v,S;a._RF.push({},"c05c25C4xNAupWYMB93tIzp","LocalizedSprite",void 0);var F=o.ccclass,_=o.property,w=o.executeInEditMode,D=(f=F("LocalizedSpriteItem"),h=_({type:p}),f((y=t((g=function(){i(this,"language",y,this),i(this,"spriteFrame",z,this)}).prototype,"language",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"zh"}}),z=t(g.prototype,"spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d);e("LocalizedSprite",(L=F("LocalizedSprite"),m=_({type:D}),L(b=w((S=t((v=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(t=e.call.apply(e,[this].concat(a))||this).sprite=null,i(t,"spriteList",S,n(t)),t}r(t,e);var a=t.prototype;return a.onLoad=function(){c||u("zh"),this.fetchRender()},a.fetchRender=function(){var e=this.getComponent("cc.Sprite");if(e)return this.sprite=e,void this.updateSprite()},a.updateSprite=function(){for(var e=0;e<this.spriteList.length;e++){var t=this.spriteList[e];if(t.language===l){this.sprite.spriteFrame=t.spriteFrame;break}}},t}(s)).prototype,"spriteList",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=v))||b)||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/loginScene.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./playerData.ts","./uiManager.ts","./sceneManager.ts","./clientEvent.ts","./gameLogic.ts","./LanguageData.ts","./constants.ts","./localConfig.ts","./storageManager.ts","./loadsh.ts"],(function(n){var e,t,i,a,o,c,s,r,u,l,g,f,p,d,h,S,v,m,L,y,w,I,D,M,C,b,G,k;return{setters:[function(n){e=n.applyDecoratedDescriptor,t=n.inheritsLoose,i=n.initializerDefineProperty,a=n.assertThisInitialized},function(n){o=n.cclegacy,c=n._decorator,s=n.Node,r=n.profiler,u=n.game,l=n.Game,g=n.sys,f=n.view,p=n.ResolutionPolicy,d=n.screen,h=n.director,S=n.Component},function(n){v=n.AudioManager},function(n){m=n.playerData},function(n){L=n.uiManager},function(n){y=n.SceneManager},function(n){w=n.clientEvent},function(n){I=n.GameLogic},function(n){D=n.init,M=n.t},function(n){C=n.constants},function(n){b=n.localConfig},function(n){G=n.StorageManager},function(n){k=n.loadsh}],execute:function(){var R,A,E,F,P;o._RF.push({},"78951xH1B5FbIWkKgRGXo5v","loginScene",void 0);var _=c.ccclass,z=c.property;n("LoginScene",(R=_("LoginScene"),A=z(s),R((P=e((F=function(n){function e(){for(var e,t=arguments.length,o=new Array(t),c=0;c<t;c++)o[c]=arguments[c];return e=n.call.apply(n,[this].concat(o))||this,i(e,"wrapper",P,a(e)),e.currentStep=null,e.isLoadCsvFinishd=!1,e}t(e,n);var o=e.prototype;return o.onLoad=function(){var n=this;this.adaptiveLogic(),D("zh"),r.hideStats(),v.instance.init(),v.instance.playMusic(C.AUDIO_MUSIC.BACKGROUND,!0),m.instance.loadGlobalCache(),m.instance.userId||(m.instance.generateRandomAccount(),console.log("###生成随机userId",m.instance.userId)),m.instance.loadFromCache(),m.instance.playerInfo&&m.instance.playerInfo.createDate||m.instance.createPlayerInfo(),u.on(l.EVENT_HIDE,(function(){m.instance.settings||(m.instance.settings={}),m.instance.settings.hideTime=Date.now(),m.instance.saveAll(),G.instance.save()})),b.instance.loadConfig((function(){n.isLoadCsvFinishd=!0}))},o.adaptiveLogic=function(){var n=this;g.isMobile?(k.checkAspectRatioGame(this.wrapper),d.on("window-resize",(function(){return k.checkAspectRatioGame(n.wrapper)}),this)):f.setDesignResolutionSize(3600,1280,p.FIXED_HEIGHT)},o.showLoadingUI=function(){var n=this;this.currentStep=0;var e=function(){L.instance.showTips(M("login/timeout"),(function(){n.showLoadingUI()}))};this.scheduleOnce(e,30),L.instance.showDialog("common/loading"),y.instance.load([function(e){n.currentStep=1,n.loadSubPackage(e)},function(e){n.currentStep=2,n.loadGameSubPackage(e)},function(t){n.currentStep=3,n.unschedule(e),n.enterMainScene(t)}],(function(n,e){n&&console.error(n.message||n)}))},o.loadSubPackage=function(n){n()},o.loadGameSubPackage=function(n){n()},o.enterMainScene=function(n){var e=this,t=m.instance.isNewBee?"fight":"pve";h.preloadScene(t,(function(){e.currentStep=4,n(),h.preloadScene(t,(function(){h.loadScene(t,(function(){e.currentStep=5,w.dispatchEvent("onSceneChanged"),I.instance.afterLogin()}))}))}))},o.onBtnVisitorLoginClick=function(){this.isLoadCsvFinishd&&this.showLoadingUI()},e}(S)).prototype,"wrapper",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=F))||E));o._RF.pop()}}}));

System.register("chunks:///_virtual/lottery.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./localConfig.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts","./utils.ts","./buttonEx.ts","./LanguageData.ts","./gameLogic.ts","./lotteryItem.ts"],(function(t){var e,n,i,a,r,o,s,l,c,u,d,h,p,f,b,m,g,S,w,y,T,R,B,v,A;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){r=t.cclegacy,o=t._decorator,s=t.Node,l=t.Animation,c=t.Prefab,u=t.Label,d=t.Vec3,h=t.instantiate,p=t.tween,f=t.Component},function(t){b=t.clientEvent},function(t){m=t.localConfig},function(t){g=t.playerData},function(t){S=t.resourceUtil},function(t){w=t.uiManager},function(t){y=t.constants},function(t){T=t.utils},function(t){R=t.ButtonEx},function(t){B=t.t},function(t){v=t.GameLogic},function(t){A=t.LotteryItem}],execute:function(){var E,L,_,D,C,I,G,P,x,M,O,N,z,k,Y,U,V,F,W,X,H,j,q,J,K;r._RF.push({},"da336DqBNdPOLmRdGzIoRW8","lottery",void 0);var Q=o.ccclass,Z=o.property;t("Lottery",(E=Q("Lottery"),L=Z(s),_=Z(l),D=Z(c),C=Z(u),I=Z(u),G=Z(u),P=Z(u),x=Z(s),M=Z(s),O=Z(s),N=Z(s),E((Y=e((k=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r))||this,i(e,"arrRewardNode",Y,a(e)),i(e,"aniLightGroup",U,a(e)),i(e,"pfRewardItem",V,a(e)),i(e,"lbSpareTimes",F,a(e)),i(e,"lbAdSpareTimes",W,a(e)),i(e,"lbShareSpareTimes",X,a(e)),i(e,"lbGold",H,a(e)),i(e,"ndBtnStart",j,a(e)),i(e,"ndBtnAd",q,a(e)),i(e,"ndBtnShare",J,a(e)),i(e,"ndTurnable",K,a(e)),e.dictReward={},e.arrRewardData=[],e.arrProbability=void 0,e.times=void 0,e.moreTimes=void 0,e.isBtnStartShow=void 0,e.randValue=void 0,e.itemNode=void 0,e}n(e,t);var r=e.prototype;return r.ctor=function(){this.dictReward={},this.arrRewardData=[]},r.show=function(){var t=[{x:0,y:53,angle:new d(0,0,-0)},{x:32,y:44,angle:new d(0,0,-36)},{x:51,y:15,angle:new d(0,0,-72)},{x:51,y:-18,angle:new d(0,0,-108)},{x:32,y:-46,angle:new d(0,0,-144)},{x:0,y:-56,angle:new d(0,0,180)},{x:-32.6,y:-45.7,angle:new d(0,0,144)},{x:-51,y:-18,angle:new d(0,0,108)},{x:-51,y:15,angle:new d(0,0,72)},{x:-32,y:42,angle:new d(0,0,36)}];this.ndTurnable.children.forEach((function(e,n){var i=t[n];e.setPosition(i.x,i.y),e.eulerAngles=i.angle})),this.initReward(),this.initInfo(),this.updateGold()},r.onEnable=function(){b.on("updateGold",this.updateGold,this)},r.onDisable=function(){b.off("updateGold",this.updateGold,this)},r.initReward=function(){var t=this;if(this.arrRewardData.length<=0){var e=m.instance.getTable("lottery");this.arrRewardData=T.objectToArray(e)}this.arrProbability=[];var n=0;this.arrRewardData.forEach((function(e,i,a){var r=t.arrRewardNode[i],o=t.dictReward[i];if(t.dictReward.hasOwnProperty(i)||((o=h(t.pfRewardItem)).setPosition(0,-42,0),o.parent=r,t.dictReward[i]=o),t.arrRewardData.length>i){var s=t.arrRewardData[i];o.getComponent(A).setInfo(s);var l=n,c=n+s.probability;t.arrProbability.push({min:l,max:c,idx:i}),n=c}}))},r.initInfo=function(){this.times=g.instance.getLotterySpareTimes(!1),this.moreTimes=g.instance.getLotterySpareTimes(!0),this.lbSpareTimes.string=this.times+"/"+y.LOTTERY_MAX_TIMES,this.lbAdSpareTimes.string=this.moreTimes+"/"+y.LOTTERY_AD_MAX_TIMES,this.lbShareSpareTimes.string=this.moreTimes+"/"+y.LOTTERY_AD_MAX_TIMES,this.checkBtnStatus()},r.checkBtnStatus=function(){this.times<=0?(this.showBtnShareOrAd(),this.moreTimes<=0&&(this.ndBtnAd.getComponent(R).interactable=!1,this.ndBtnShare.getComponent(R).interactable=!1,this.lbAdSpareTimes.node.active=!1,this.lbShareSpareTimes.node.active=!1,S.setGray(this.ndBtnAd,!0),S.setGray(this.ndBtnShare,!0))):(this.ndBtnStart.active=!0,this.ndBtnStart.getComponent(R).interactable=!0)},r.updateGold=function(){this.lbGold.string=T.formatMoney(g.instance.getGold())},r.onBtnStartClick=function(){this.showSelectUI(this.ndBtnStart,this.lbSpareTimes,!1)},r.showSelectUI=function(t,e,n){for(var i in this.isBtnStartShow=!0,t.getComponent(R).interactable=!1,this.dictReward)this.dictReward[i].getComponent(A).setSelect(!1);g.instance.addLotteryTimes(n),n?(this.moreTimes=g.instance.getLotterySpareTimes(n),e.string=this.moreTimes+"/"+y.LOTTERY_AD_MAX_TIMES):(this.times=g.instance.getLotterySpareTimes(n),e.string=this.times+"/"+y.LOTTERY_MAX_TIMES),b.dispatchEvent("updateLotterySpareTimes"),this.randValue=this.getRandValue(),this.aniLightGroup.play(),this.startRun()},r.startRun=function(){var t=this,e=this.ndTurnable.eulerAngles.z;e%=360,this.ndTurnable.setRotationFromEuler(0,0,e);var n=360-e,i=3+Math.floor(4*Math.random());p(this.ndTurnable).to(n/360+.5*i,{eulerAngles:new d(0,0,360+360*i+36*this.randValue)},{easing:"circInOut"}).call((function(){t.showReward()})).start()},r.getRandValue=function(){for(var t=-1,e=Math.floor(100*Math.random()),n=0;n<this.arrProbability.length;n++){var i=this.arrProbability[n];if(e>=i.min&&e<i.max){t=i.idx;break}}return-1!==t?t:this.getRandValue()},r.showReward=function(){this.aniLightGroup.stop(),this.itemNode=this.dictReward[this.randValue],this.itemNode.getComponent(A).setSelect(!0),this.isBtnStartShow&&(this.checkBtnStatus(),this.isBtnStartShow=!1)},r.onBtnAddDiamondClick=function(){w.instance.showTips(B("lottery.noChargePleaseWait"))},r.onBtnAdClick=function(){var t=this;v.instance.showRewardAd((function(e){e||t.showSelectUI(t.ndBtnAd,t.lbAdSpareTimes,!0)}))},r.onBtnShareClick=function(){var t=this;v.instance.share(y.SHARE_FUNCTION.LOTTERY,{},(function(e){e||t.showSelectUI(t.ndBtnShare,t.lbShareSpareTimes,!0)}))},r.showBtnShareOrAd=function(){var t=this;v.instance.getOpenRewardType(y.SHARE_FUNCTION.LOTTERY,(function(e,n){if(!e)switch(n){case y.OPEN_REWARD_TYPE.AD:t.ndBtnStart.active=!1,t.ndBtnShare.active=!1,t.ndBtnAd.active=!0,t.ndBtnAd.getComponent(R).interactable=!0;break;case y.OPEN_REWARD_TYPE.SHARE:t.ndBtnStart.active=!1,t.ndBtnAd.active=!1,t.ndBtnShare.active=!0,t.ndBtnShare.getComponent(R).interactable=!0;break;case y.OPEN_REWARD_TYPE.NULL:t.ndBtnStart.active=!0,t.ndBtnStart.getComponent(R).interactable=!1,S.setGray(t.ndBtnStart,!0),t.ndBtnAd.active=!1,t.ndBtnShare.active=!1}}))},r.onBtnCloseClick=function(){w.instance.hideDialog("lottery/lottery")},e}(f)).prototype,"arrRewardNode",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),U=e(k.prototype,"aniLightGroup",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(k.prototype,"pfRewardItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(k.prototype,"lbSpareTimes",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(k.prototype,"lbAdSpareTimes",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(k.prototype,"lbShareSpareTimes",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(k.prototype,"lbGold",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(k.prototype,"ndBtnStart",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(k.prototype,"ndBtnAd",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(k.prototype,"ndBtnShare",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(k.prototype,"ndTurnable",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=k))||z));r._RF.pop()}}}));

System.register("chunks:///_virtual/lotteryItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./uiManager.ts","./constants.ts","./utils.ts"],(function(e){var t,i,r,n,o,a,l,s,u,c,p,d,h,f,b,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Sprite,s=e.Label,u=e.SpriteFrame,c=e.Color,p=e.Node,d=e.UITransform,h=e.Component},function(e){f=e.resourceUtil},function(e){b=e.uiManager},function(e){m=e.constants},function(e){y=e.utils}],execute:function(){var w,I,g,v,D,R,T,A,P,S,V,z,E,_,L,N,F,M,O;o._RF.push({},"f1db2PMDSdEoolhZOaw5gvA","lotteryItem",void 0);var U=a.ccclass,C=a.property;e("LotteryItem",(w=U("LotteryItem"),I=C(l),g=C(s),v=C(l),D=C(u),R=C(u),T=C(c),A=C(c),P=C(p),w((z=t((V=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"spSelect",z,n(t)),r(t,"lbValue",E,n(t)),r(t,"spIcon",_,n(t)),r(t,"sfGold",L,n(t)),r(t,"sfDiamond",N,n(t)),r(t,"colorNormal",F,n(t)),r(t,"colorSelect",M,n(t)),r(t,"ndPropAddIcon",O,n(t)),t.info=void 0,t.rewardType=void 0,t.rewardValue=void 0,t.propId=void 0,t}i(t,e);var o=t.prototype;return o.setInfo=function(e){this.info=e,this.rewardType=e.type;var t=this.spIcon.getComponent(d);switch(this.rewardType){case m.REWARD_TYPE.DIAMOND:this.rewardValue=e.amount,this.spIcon.spriteFrame=this.sfDiamond,this.ndPropAddIcon.active=!1,this.lbValue.string=this.rewardValue,t.width=88.8,t.height=50.4;break;case m.REWARD_TYPE.GOLD:this.rewardValue=e.amount,this.spIcon.spriteFrame=this.sfGold,this.lbValue.string=y.formatMoney(this.rewardValue),this.ndPropAddIcon.active=!1,t.width=93,t.height=92;break;case m.REWARD_TYPE.PROP:this.rewardValue=e.amount,this.lbValue.string=this.rewardValue,this.propId="00"+e.subType,f.setPropIcon(this.propId,this.spIcon,(function(){})),this.ndPropAddIcon.active=!0,t.width=77,t.height=77}},o.setSelect=function(e){this.spSelect.enabled=e,this.lbValue.getComponent(s).color=e?this.colorSelect:this.colorNormal,e&&this.setReceivedUI()},o.setReceivedUI=function(){var e={};e.itemType=this.info.type,e.itemSubType=this.info.subType,e.itemAmount=this.info.amount,b.instance.showDialog("lottery/reward",[e,!0,m.SHARE_FUNCTION.LOTTERY_REWARD])},t}(h)).prototype,"spSelect",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(V.prototype,"lbValue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(V.prototype,"spIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(V.prototype,"sfGold",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(V.prototype,"sfDiamond",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(V.prototype,"colorNormal",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),M=t(V.prototype,"colorSelect",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c}}),O=t(V.prototype,"ndPropAddIcon",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=V))||S));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./audioManager.ts","./clientEvent.ts","./configuration.ts","./constant.ts","./csvManager.ts","./effectManager.ts","./gameLogic.ts","./loadsh.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./storageManager.ts","./uiManager.ts","./util.ts","./constants.ts","./utils.ts","./animationUI.ts","./buttonEx.ts","./elasticLimit.ts","./loading.ts","./stopPropagation.ts","./tips.ts","./adProp.ts","./adStep.ts","./adStepItem.ts","./balance.ts","./balanceFailed.ts","./effectGroup.ts","./fightGuide.ts","./fightHandGuide.ts","./fightNum.ts","./fightProp.ts","./fightPropsOperation.ts","./fightScene.ts","./fightTarget.ts","./fightUI.ts","./linkContent.ts","./linkItem.ts","./linkLine.ts","./showTarget.ts","./showTargetCake.ts","./unLockProp.ts","./loadingUI.ts","./sceneManager.ts","./loginScene.ts","./lottery.ts","./lotteryItem.ts","./reward.ts","./onlineReward.ts","./buy.ts","./levelPanel.ts","./levelUI.ts","./multiScrollView.ts","./offLineReward.ts","./propItem.ts","./pveCntrl.ts","./pveSlotUI.ts","./pveUI.ts","./targetCake.ts","./gameSetting.ts","./setting.ts","./shop.ts","./shopItem.ts","./shopPropsOperation.ts","./signIn.ts","./signInItem.ts","./signinReward.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedMaterial.ts","./LocalizedSprite.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/multiScrollView.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./loadsh.ts","./playerData.ts","./utils.ts","./pveSlotUI.ts"],(function(t){var e,i,o,n,s,r,a,h,l,c,d,u,p,f,g,v,w,C,P,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,a=t.NodePool,h=t.instantiate,l=t.UITransform,c=t.Size,d=t.Vec3,u=t.Vec2,p=t.view,f=t.screen,g=t.Component},function(t){v=t.localConfig},function(t){w=t.loadsh},function(t){C=t.playerData},function(t){P=t.utils},function(t){m=t.PveSlotUI}],execute:function(){var b,y,N,S,z;s._RF.push({},"3e6b57QbUBJ9rTvcQwwnAgL","multiScrollView",void 0);var V=r.ccclass,I=r.property;t("MultiScrollView",V("MultiScrollView")((N=e((y=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return e=t.call.apply(t,[this].concat(s))||this,o(e,"scrollView",N,n(e)),o(e,"pve1Prefab",S,n(e)),o(e,"pve2Prefab",z,n(e)),e.updateTimer=void 0,e.updateInterval=void 0,e.lastPositionY=void 0,e.pool=void 0,e.pool1=void 0,e.pool2=void 0,e.contentNode=void 0,e.pve1Node=void 0,e.parent=void 0,e.isChange=void 0,e.arrayPrefab=void 0,e.positions=void 0,e.isNeedScroll=void 0,e.currentPosition=void 0,e.cloudPrefab=void 0,e.positionCloud1=void 0,e.positionCloud2=void 0,e}i(e,t);var s=e.prototype;return s.onLoad=function(){this.updateTimer=0,this.updateInterval=.2,this.lastPositionY=0,this.pool=new a,this.pool1=new a,this.pool2=new a,this.contentNode=this.scrollView.content,this.pve1Node=h(this.pve1Prefab),this.contentNode.addChild(this.pve1Node,999)},s.start=function(){this.show()},s.onEnable=function(){this.contentNode.on("size-changed",this.sizeChange,this)},s.onDisable=function(){this.contentNode.off("size-changed",this.sizeChange,this)},s.init=function(t){this.parent=t},s.show=function(){this.isChange=!0,this.isNeedScroll=!0,this.positions=[];var t,e=P.objectToArray(v.instance.getTable("level")),i=e.slice(0,1);this.pve1Node.setPosition(0,-100);var o=this.contentNode.getComponent(l),n=o.contentSize;o.setContentSize(new c(n.width,this.pve1Node.getComponent(l).height+-100)),this.pve1Node.getComponent(m).show(this,i,-1),this.arrayPrefab=w.chunk(w.drop(e,1),22);for(var s=this.arrayPrefab.length,r=this.pve2Prefab.data.getComponent(l).height,a=0;a<s;a++)t=n.height,this.positions.push(new d(0,t,0)),o.setContentSize(new c(n.width,t+r));o.setContentSize(new c(n.width,n.height-r/3)),this.addNode();var h=C.instance.getCurrentLevel(),f=w.findIndex(e,(function(t){return t.ID===h.ID})),g=f/22;this.currentPosition=g>=0?this.positions[Math.floor(g)]:new u(0,0),this.currentPosition=new d(this.currentPosition.x,this.currentPosition.y,0);var b=f%22+1;this.currentPosition.y=this.currentPosition.y+this.pve2Prefab.data.getChildByName("level"+b).y,this.currentPosition.y-=p.getVisibleSize().height/2,this.scrollToNode()},s.update=function(t){this.scrolling(),this.updateTimer+=t,this.updateTimer<this.updateInterval||(this.updateTimer=0,this.addNode())},s.addNode=function(){if(this.arrayPrefab){for(var t,e=0;e<this.arrayPrefab.length;e++)t=this.pve2Prefab.data.getComponent(l).height,this.updateNode(e,t,this.contentNode,this.pool,this.positions,this.pve2Prefab,this.arrayPrefab);this.isChange=!1}},s.updateNode=function(t,e,i,o,n,s,r){var a,h=this.getPositionInView(i,n[t]);if(this.isOverBorder(h,e))(a=i.getChildByName(String(t)))&&this.remove(a,i,o);else if(a=i.getChildByName(String(t))){if(this.isChange){var l=a.getComponent(m);l&&l.show(this,r[t],t),a.setPosition(n[t]),a.tag=t}}else this.create(a,t,i,o,n,s,r)},s.create=function(t,e,i,o,n,s,r){(t=o.size()>0?o.get():h(s)).setPosition(n[e]),i.addChild(t),t.setSiblingIndex(0),t.name=String(e);var a=t.getComponent(m);a&&a.show(this,r[e],e)},s.remove=function(t,e,i){i.put(t),e.removeChild(t,!1)},s.getPositionInView=function(t,e){var i=t.getComponent(l).convertToWorldSpaceAR(e);return this.scrollView.node.getComponent(l).convertToNodeSpaceAR(i)},s.isOverBorder=function(t,e){var i=this.scrollView.node.getComponent(l).height,o=i+i/2+e/2;return t.y>o||t.y<-o},s.onDestory=function(){this.pool.clear(),this.pool1.clear(),this.pool2.clear()},s.sizeChange=function(){var t=this.contentNode.getComponent(l);this.node.getComponent(l).setContentSize(t)},s.scrollToNode=function(){this.isNeedScroll&&this.scrollView.scrollTo(new u(0,this.currentPosition.y/(this.scrollView.node.getComponent(l).height-f.windowSize.height)),.1)},s.scrolling=function(){var t=this.contentNode.getPosition();this.lastPositionY=t.y},s.createCloud=function(){this.positionCloud1=[],this.positionCloud2=[];var t,e=f.windowSize.height,i=this.contentNode.getComponent(l).height,o=Math.ceil(i/e);for(t=0;t<o;t++)this.positionCloud1.push(this.randomPosition());for(t=0;t<o;t++)this.positionCloud2.push(this.randomPosition())},s.randomPosition=function(){var t=f.windowSize.height,e=this.scrollView.getMaxScrollOffset().y,i=P.getRandomInt(300,400),o=P.getRandomInt(t/2,e),n=P.getRandomInt(0,1);return new u(n?i:-i,o)},s.getCloudPrefabMaxHeight=function(){var t=0;return w.forEach(this.cloudPrefab,(function(e){t<e.data.height&&(t=e.data.height)})),t},e}(g)).prototype,"scrollView",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(y.prototype,"pve1Prefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(y.prototype,"pve2Prefab",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b);s._RF.pop()}}}));

System.register("chunks:///_virtual/offLineReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./uiManager.ts","./constants.ts","./resourceUtil.ts","./localConfig.ts","./LanguageData.ts"],(function(e){var t,i,n,o,r,a,s,c,u,l,h,p,f,m,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Animation,c=e.UITransform,u=e.Component},function(e){l=e.GameLogic},function(e){h=e.uiManager},function(e){p=e.constants},function(e){f=e.resourceUtil},function(e){m=e.localConfig},function(e){d=e.t}],execute:function(){var R,w,b,y,T,I,v,g,A;r._RF.push({},"7bf14l0xJZIx6dTAV7YPTWD","offLineReward",void 0);var E=a.ccclass,D=a.property;e("OffLineReward",E("OffLineReward")((b=t((w=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,n(t,"sfDiamond",b,o(t)),n(t,"sfGold",y,o(t)),n(t,"spIcon",T,o(t)),n(t,"lbRewardValue",I,o(t)),n(t,"aniGetItem",v,o(t)),n(t,"ndThreeReceive",g,o(t)),n(t,"ndNormalReceive",A,o(t)),t.itemInfo=void 0,t.rewardType=void 0,t.itemType=void 0,t.itemAmount=void 0,t.itemSubType=void 0,t}i(t,e);var r=t.prototype;return r.show=function(e){var t=this;this.itemInfo=e,this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(s.EventType.FINISHED,(function(){t.aniGetItem.play("getItemIdle")}),this),this.showUI(),this.ndNormalReceive.active=!1,this.scheduleOnce((function(){t.ndNormalReceive.active=!0}),p.NORMAL_SHOW_TIME)},r.showUI=function(){var e=this,t=this.spIcon.getComponent(c);switch(this.itemType){case p.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string="x"+this.itemAmount;break;case p.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string="x"+this.itemAmount,t.width=257,t.height=166;break;case p.REWARD_TYPE.PROP:var i="00"+this.itemSubType,n=m.instance.queryByID("prop",i+"");t.width=168,t.height=168,f.setPropIcon(i,this.spIcon,(function(){}));var o=d("table_prop."+n.name);this.lbRewardValue.string=o+d("")+" x "+this.itemAmount}l.instance.getOpenRewardType(p.SHARE_FUNCTION.OFFLINE,(function(t,i){e.rewardType=i,t?e.close():e.ndThreeReceive.active=i!==p.OPEN_REWARD_TYPE.NULL}))},r.showAd=function(){var e=this;l.instance.showRewardAd((function(t){t||e.showReward()}))},r.showShare=function(){var e=this;l.instance.share(p.SHARE_FUNCTION.OFFLINE,{},(function(t){t||e.showReward()}))},r.onBtnThreeReceiveClick=function(){this.rewardType===p.OPEN_REWARD_TYPE.AD?this.showAd():this.rewardType===p.OPEN_REWARD_TYPE.SHARE&&this.showShare()},r.showReward=function(){h.instance.showDialog("lottery/reward",[{itemType:p.REWARD_TYPE.GOLD,itemAmount:3*this.itemAmount,itemSubType:0},!1,p.SHARE_FUNCTION.OFFLINE]),this.close()},r.onBtnNormalClick=function(){l.instance.addGold(this.itemAmount),this.close()},r.close=function(){h.instance.shiftFromPopupSeq("pve/offLineReward")},t}(u)).prototype,"sfDiamond",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(w.prototype,"sfGold",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(w.prototype,"spIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(w.prototype,"lbRewardValue",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(w.prototype,"aniGetItem",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(w.prototype,"ndThreeReceive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(w.prototype,"ndNormalReceive",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=w))||R);r._RF.pop()}}}));

System.register("chunks:///_virtual/onlineReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./gameLogic.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./constants.ts","./utils.ts"],(function(e){var n,i,t,a,r,o,c,l,s,u,R,d,f,h,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,i=e.inheritsLoose,t=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,c=e.Animation,l=e.Component},function(e){s=e.t},function(e){u=e.GameLogic},function(e){R=e.localConfig},function(e){d=e.playerData},function(e){f=e.uiManager},function(e){h=e.constants},function(e){w=e.utils}],execute:function(){var p,b,T,m,g,v,E,O;r._RF.push({},"f6263VSRTFBzIruWaj84Ky6","onlineReward",void 0);var y=o.ccclass,A=o.property;e("OnlineReward",(p=y("OnlineReward"),b=A(c),p((g=n((m=function(e){function n(){for(var n,i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];return n=e.call.apply(e,[this].concat(r))||this,t(n,"ndTimer",g,a(n)),t(n,"lbTime",v,a(n)),t(n,"aniFreeReward",E,a(n)),t(n,"btnReceive",O,a(n)),n.oldTime=void 0,n}i(n,e);var r=n.prototype;return r.start=function(){this.checkOnlineReward()},r.checkOnlineReward=function(){switch(d.instance.getOnlineRewardInfo().value.receiveStatus){case h.REWARD_STATUS.UNRECEIVABLE:this.btnReceive.node&&(this.btnReceive.node.active=!1),this.aniFreeReward.play("freeGiftIdle"),this.schedule(this.countDownCallback,.5);break;case h.REWARD_STATUS.RECEIVABLE:this.btnReceive.node&&(this.btnReceive.node.active=!0),this.aniFreeReward.play("freeGiftActivation"),this.lbTime.string=s("onlineReward.receive"),this.unschedule(this.countDownCallback)}},r.onBtnReceiveClick=function(){var e=this,n=R.instance.getTable("prop");if(!n)return!1;var i=Object.keys(n).filter((function(e){return Number(e)!==h.PROP_ID.INFINITE})),t=i[Math.floor(Math.random()*i.length)]+"";u.instance.getOpenRewardType(h.SHARE_FUNCTION.ONLINE,(function(n,i){if(!n)switch(i){case h.OPEN_REWARD_TYPE.AD:u.instance.showRewardAd((function(n){n||e.showReward(t)}));break;case h.OPEN_REWARD_TYPE.SHARE:u.instance.share(h.SHARE_FUNCTION.ONLINE,{},(function(n){n||e.showReward(t)}));break;case h.OPEN_REWARD_TYPE.NULL:e.showReward(t)}}))},r.countDownCallback=function(){var e=Date.now();if(this.oldTime||(this.oldTime=e),e-this.oldTime>1e3){var n=d.instance.getOnlineRewardInfo().usedTime,i=60*d.instance.getCountdownTime()*1e3-1e3*n;i<=0?(this.unschedule(this.countDownCallback),d.instance.updateOnlineRewardInfo(!1),this.checkOnlineReward(),this.lbTime.string=s("onlineReward.receive")):(this.lbTime.string=w.formatTimeForMillisecond(i).toString(),this.oldTime=e)}},r.showReward=function(e){var n={};n.itemType=h.REWARD_TYPE.PROP,n.itemSubType=e,n.itemAmount=1,f.instance.showDialog("lottery/reward",[n,!1,h.SHARE_FUNCTION.ONLINE]),d.instance.updateOnlineRewardInfo(!0),this.checkOnlineReward()},n}(l)).prototype,"ndTimer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=n(m.prototype,"lbTime",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=n(m.prototype,"aniFreeReward",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(m.prototype,"btnReceive",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=m))||T));r._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc","./constants.ts","./constant.ts","./storageManager.ts","./utils.ts","./localConfig.ts","./sceneManager.ts","./clientEvent.ts"],(function(e){var t,n,i,s,a,r,o,f,h,l,I,c;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){i=e.cclegacy,s=e._decorator,a=e.Component},function(e){r=e.constants},function(e){o=e.constant},function(e){f=e.StorageManager},function(e){h=e.utils},function(e){l=e.localConfig},function(e){I=e.SceneManager},function(e){c=e.clientEvent}],execute:function(){var u,y;i._RF.push({},"e5927B2lO9C6o5eLg2NmcKB","playerData",void 0);var p=s.ccclass;s.property,e("playerData",p("playerData")(((y=function(e){function i(){for(var t,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(t=e.call.apply(e,[this].concat(i))||this).serverTime=0,t.localTime=0,t.spareStep=void 0,t.curLevelInfo=void 0,t.dictTargets=void 0,t.score=void 0,t.arrStars=void 0,t.level=1,t.dataVersion=void 0,t.isFirst=void 0,t.balanceOverAdTimes=void 0,t._bag=null,t._userId="",t._playerInfo=null,t._history=null,t._settings=null,t._isNewBee=!1,t._dataVersion="",t}t(i,e);var s=i.prototype;return s.loadGlobalCache=function(){var e=f.instance.getUserId();e&&(this._userId=e)},s.loadFromCache=function(){this._playerInfo=this._loadDataByKey(o.LOCAL_CACHE.PLAYER),this._history=this._loadDataByKey(o.LOCAL_CACHE.HISTORY),this._settings=this._loadDataByKey(o.LOCAL_CACHE.SETTINGS),this._bag=this._loadDataByKey(o.LOCAL_CACHE.BAG)},s._loadDataByKey=function(e){var t={},n=f.instance.getConfigData(e);if(n)try{t=JSON.parse(n)}catch(e){t={}}return t},s.createPlayerInfo=function(e){if(this._playerInfo={diamond:0,key:0,level:1,createDate:new Date},this._isNewBee=!0,e)for(var t in e)this._playerInfo[t]=e[t];this.savePlayerInfoToLocalCache()},s.generateRandomAccount=function(){this.userId=""+Date.now()+h.getRandomInt(0,1e3),f.instance.setUserId(this._userId)},s.saveAccount=function(e){this._userId=e,f.instance.setUserId(e)},s.savePlayerInfoToLocalCache=function(){f.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},s.saveSettingsToLocalCache=function(){f.instance.setConfigData(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings))},s.saveAll=function(){f.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo)),f.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.HISTORY,JSON.stringify(this._history)),f.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.SETTINGS,JSON.stringify(this._settings)),f.instance.setConfigDataWithoutSave(o.LOCAL_CACHE.BAG,JSON.stringify(this.bag)),f.instance.setConfigData(o.LOCAL_CACHE.DATA_VERSION,this._dataVersion)},s.updatePlayerInfo=function(e,t){var n=!1;this._playerInfo.hasOwnProperty(e)?"number"==typeof t?(n=!0,this._playerInfo[e]+=t,this._playerInfo[e]<0&&(this._playerInfo[e]=0)):"boolean"!=typeof t&&"string"!=typeof t||(n=!0,this._playerInfo[e]=t):this._playerInfo[e]=t,n&&f.instance.setConfigData(o.LOCAL_CACHE.PLAYER,JSON.stringify(this._playerInfo))},s.getSetting=function(e){return this._settings&&this._settings.hasOwnProperty(e)?this._settings[e]:null},s.setSetting=function(e,t){this._settings||(this._settings={}),this._settings[e]=t,this.saveSettingsToLocalCache()},s.clear=function(){this._playerInfo={},this._settings={},this.saveAll()},s.isOpenOffLineReward=function(e){var t=Date.now(),n=!1;return this.playerInfo.loginDate?(n=t-this.playerInfo.loginDate>=e)&&(this.playerInfo.loginDate=t):this.playerInfo.loginDate=Date.now(),this.savePlayerInfoToLocalCache(),n},s.getOnlineRewardInfo=function(){this.playerInfo.hasOwnProperty("onlineRewardInfo")?h.getDeltaDays(this.playerInfo.onlineRewardInfo.loginTime,Date.now())>0&&this.resetOnlineRewardInfo():this.resetOnlineRewardInfo();return this.playerInfo.onlineRewardInfo},s.resetOnlineRewardInfo=function(){this.playerInfo.onlineRewardInfo={},this.playerInfo.onlineRewardInfo.value={times:0,receiveStatus:r.REWARD_STATUS.UNRECEIVABLE},this.playerInfo.onlineRewardInfo.loginTime=Date.now(),this.playerInfo.onlineRewardInfo.usedTime=0,this.savePlayerInfoToLocalCache()},s.resetShopPropInfo=function(){this.playerInfo.shopPropInfo={};var e=l.instance.getTable("prop");if(!e)return!1;var t=Object.keys(e).filter((function(e){return Number(e)!==r.PROP_ID.INFINITE})),n=t[Math.floor(Math.random()*t.length)];this.playerInfo.shopPropInfo.createDate=Date.now(),this.playerInfo.shopPropInfo.prop=n,this.playerInfo.shopPropInfo.receiveStatus=r.REWARD_STATUS.UNRECEIVABLE,this.savePlayerInfoToLocalCache()},s.updateShopPropInfo=function(e){this.playerInfo.shopPropInfo&&(e?this.resetShopPropInfo():this.playerInfo.shopPropInfo.receiveStatus=r.REWARD_STATUS.RECEIVABLE,this.savePlayerInfoToLocalCache())},s.updateSignInCurrentDay=function(){if(!this.playerInfo.signInInfo||this.isNeedRecycleSignInInfo())this.createNewSignInInfo();else{var e=h.getDeltaDays(this.playerInfo.signInInfo.signInDate,Date.now());if(0===e)return;this.updateSignInFillSignInDays(0,!0),this.playerInfo.signInInfo.currentDay+=e,this.playerInfo.signInInfo.currentDay<=0&&this.createNewSignInInfo(),this.playerInfo.signInInfo.currentDay>r.MAX_SIGN_IN_REWARDS_DAY?r.MAX_SIGN_IN_REWARDS_DAY:this.playerInfo.signInInfo.currentDay,this.playerInfo.signInInfo.signInDate=Date.now()}this.savePlayerInfoToLocalCache()},s.isNeedRecycleSignInInfo=function(){this.playerInfo.signInInfo||this.createNewSignInInfo();var e=!1;return h.getDeltaDays(this.playerInfo.signInInfo.createDate,Date.now())>=r.MAX_SIGN_IN_REWARDS_DAY&&(e=!0),e},s.createNewSignInInfo=function(){this.playerInfo.signInInfo||(this.playerInfo.signInInfo={}),this.playerInfo.signInInfo.createDate=Date.now(),this.playerInfo.signInInfo.signInDate=Date.now(),this.playerInfo.signInInfo.currentDay=1,this.playerInfo.signInInfo.receivedDays=[],this.playerInfo.signInInfo.afterFillSignInDays=[],this.savePlayerInfoToLocalCache()},s.updateSignInFillSignInDays=function(e,t){var n=this.playerInfo.signInInfo.afterFillSignInDays;if(t)n.length=0;else{if(Array.isArray(n)&&n.includes(e))return;n.push(Number(e))}this.savePlayerInfoToLocalCache()},s.getSignInReceivedInfo=function(){this.playerInfo.signInInfo||this.createNewSignInInfo();var e=this.playerInfo.signInInfo;return{isAllReceived:!(e.receivedDays.length<e.currentDay),isTodayReceived:!!e.receivedDays.includes(e.currentDay)}},s.getCountdownTime=function(){var e=this.playerInfo.onlineRewardInfo.value.times,t=r.ONLINE_REWARD_INTERVAL,n=t.length-1;return t[e=e>n?n:e]},s.updateOnlineRewardInfo=function(e){if(this.playerInfo.onlineRewardInfo){var t=this.playerInfo.onlineRewardInfo.value;e?(t.times+=1,t.receiveStatus=r.REWARD_STATUS.UNRECEIVABLE):(t.receiveStatus=r.REWARD_STATUS.RECEIVABLE,this.playerInfo.onlineRewardInfo.usedTime=0),this.savePlayerInfoToLocalCache()}},s.addUsedTime=function(){this.playerInfo.onlineRewardInfo&&!I.instance.isStop&&(this.playerInfo.onlineRewardInfo.usedTime+=1,this.savePlayerInfoToLocalCache())},s.convertSignInDataFormat=function(e){var t=e.value.split("#"),n=t[1].split("|");n.splice(n.length-1,1),this.playerInfo.signInInfo.createDate=e.signInDate-864e5*Number(t[0]-1),this.playerInfo.signInInfo.signInDate=e.signInDate,this.playerInfo.signInInfo.currentDay=Number(t[0]),this.playerInfo.signInInfo.receivedDays=n.map(Number),this.playerInfo.signInInfo.afterFillSignInDays=[],delete e.value,this.savePlayerInfoToLocalCache()},s.finishLink=function(e,t){this.reduceStep(),this.finishTarget(e,t)},s.reduceStep=function(){this.curLevelInfo.infinite||(this.spareStep--,this.spareStep<0&&(this.spareStep=0))},s.finishTarget=function(e,t){this.dictTargets.hasOwnProperty(e)&&(this.dictTargets[e]-=t,this.dictTargets[e]<0&&(this.dictTargets[e]=0))},s.isLevelFinish=function(){var e=!0;for(var t in this.dictTargets)if(this.dictTargets.hasOwnProperty(t)&&this.dictTargets[t]>0){e=!1;break}return e},s.isGameOver=function(){return this.spareStep<=0},s.startNewLevel=function(){var e=this.getCurrentLevelInfo();this.score=0,this.spareStep=0,this.curLevelInfo={},this.curLevelInfo.startTime=Date.now(),this.curLevelInfo.infinite=!1,e&&(this.spareStep=e.limit),this.dictTargets={};for(var t=e.targets.split("|"),n=0;n<t.length;n++){var i=t[n].split("-");this.dictTargets[i[0]]=Number(i[1])}this.arrStars=e.stars.split("|")},s.getCurrentLevelInfo=function(){var e=l.instance.queryByID("level",this.level);return e&&(e.level=this.level),e},s.addDiamond=function(e){this.updatePlayerInfo("diamond",e)},s.addGold=function(e){this.updatePlayerInfo("gold",Number(e))},s.addProp=function(e,t){if(this._bag.hasOwnProperty(e)){this._bag[e].amount+=t}else{var n={amount:t};this._bag[e]=n}return this.addDataVersion(),f.instance.setConfigData(o.LOCAL_CACHE.BAG,JSON.stringify(this._bag)),!0},s.addDataVersion=function(){var e=(new Date).toLocaleDateString(),t=!1;if(this.dataVersion&&"string"==typeof this.dataVersion){var n=this.dataVersion.split("@");n.length>=2&&n[0]===e&&(this.dataVersion=e+"@"+(Number(n[1])+1),t=!0)}t||(this.dataVersion=e+"@1"),f.instance.setConfigDataWithoutSave(r.LOCAL_CACHE.DATA_VERSION,this.dataVersion)},s.isFirstClickMoreGame=function(e){return e&&(this.isFirst=e),this.isFirst},s.getLotterySpareTimes=function(e){var t=r.LOTTERY_MAX_TIMES;e&&(t=r.LOTTERY_AD_MAX_TIMES);var n=h.getDay(),i=this.getSetting(r.SETTINGS_KEY.LOTTERY);if(i||(i={}),!i.today||i.today!==n)return(i={}).today={},this.setSetting(r.SETTINGS_KEY.LOTTERY,i),t;var s=i.times;e&&(s=i.moreTimes),s||(s=0);var a=t-s;return a>0?a:0},s.isFinishTaskAndNoReceive=function(){if(!this.playerInfo||!this.playerInfo.dictTask)return!1;for(var e in this.playerInfo.dictTask){this.playerInfo.dictTask[e];var t=l.instance.queryByID("task",e),n=this.getTaskStatusById(e);if(n.taskFinishCount>=t.count&&n.taskState===r.TASK_STATE.RECEIVABLE)return!0}return!1},s.getTaskStatusById=function(e){if(!this.playerInfo||!this.playerInfo.hasOwnProperty("taskDate"))return null;var t=this.playerInfo.dictTask[e];return t||null},s.getGold=function(){return this.playerInfo.hasOwnProperty("gold")?this.playerInfo.gold:0},s.parseGift=function(e){var t=l.instance.queryByID("gift",e);if(!t)return null;var n=t.type.split("|").map(Number),i=t.subType.split("|").map(Number),s=t.amount.split("|").map(Number),a=[];return n.forEach((function(e,t,n){a.push({type:e,subType:i[t],amount:s[t]})})),a},s.updateSignInReceivedDays=function(e){var t=this.playerInfo.signInInfo.receivedDays;Array.isArray(t)&&t.includes(e)||(t.push(Number(e)),this.savePlayerInfoToLocalCache())},s.addLotteryTimes=function(e,t){t||(t=1);var n=h.getDay(),i=this.getSetting(r.SETTINGS_KEY.LOTTERY);i||(i={}),i.today&&i.today===n||((i={}).today=n),e?i.moreTimes?i.moreTimes+=t:i.moreTimes=t:i.times?i.times+=t:i.times=t,this.setSetting(r.SETTINGS_KEY.LOTTERY,i)},s.getInfiniteTimes=function(){return this.playerInfo.infiniteShareTimes?this.playerInfo.infiniteShareTimes:0},s.exchangeInfiniteProp=function(){this.playerInfo.infiniteShareTimes>=r.MAX_INFINITE_TIMES?this.playerInfo.infiniteShareTimes-=r.MAX_INFINITE_TIMES:this.playerInfo.infiniteShareTimes=0,c.dispatchEvent("updateInfiniteShareTimes"),this.savePlayerInfoToLocalCache()},s.getCurrentLevel=function(){var e=h.objectToArray(this.history),t=e.length;if(0===t)return l.instance.queryOne("level","name","1");e.sort((function(e,t){return Number(e.levelId)-Number(t.levelId)}));var n=e[t-1],i=l.instance.queryByID("level",parseInt(n.levelId).toString()),s=l.instance.queryOne("level","name",String(parseInt(i.name)+1));return s&&0!==n.star?s:i},s.getHighestScoreByLevel=function(e){return this.history.hasOwnProperty(e)?this.history[e].score:0},s.getPropAmount=function(e){return this.bag.hasOwnProperty(e)&&this.bag[e].amount||0},s.isPropUnlock=function(e){var t=this.getCurrentLevel().ID;return this.playerInfo.hasOwnProperty("unLockInfo")||this.getUnLockInfo(),t>1&&this.playerInfo.unLockInfo.includes(e)},s.getUnLockInfo=function(){if(!this.playerInfo.hasOwnProperty("unLockInfo")){var e=this.getCurrentLevel().ID,t=r.UNLOCK_PROP_ID,n=e-1;this.playerInfo.unLockInfo=t.slice(0,n),this.savePlayerInfoToLocalCache()}return this.playerInfo.unLockInfo},s.addStep=function(e){this.spareStep+=e},s.isNeedOpenUnlockPanel=function(){var e=this.getCurrentLevelInfo().ID;if(e>1&&e<=r.UNLOCK_HIGEST_LEVEl){var t=r.UNLOCK_PROP_ID[e-2];if(this.playerInfo.hasOwnProperty("unLockInfo")||this.getUnLockInfo(),!this.isPropUnlock(t))return!0}return!1},s.hasSeenGuide=function(){return this.playerInfo.hasSeenGuide},s.finishSeenGuide=function(){this.playerInfo.hasSeenGuide=!0,this.updatePlayerInfo("hasSeenGuide",!0)},s.costProp=function(e){if(!this.bag.hasOwnProperty(e))return!1;var t=this.bag[e];return!(t<=0)&&(t.amount--,this.addDataVersion(),f.instance.setConfigData(o.LOCAL_CACHE.BAG,JSON.stringify(this.bag)),!0)},s.addScore=function(e){this.score+=e},s.getTargetValue=function(e){return this.dictTargets.hasOwnProperty(e)?this.dictTargets[e]:0},s.updateUnLockInfo=function(e){var t=this.playerInfo.unLockInfo;t.includes(e)||(t.push(e),this.savePlayerInfoToLocalCache())},s.finishLevel=function(e,t){var n=0,i=l.instance.queryByID("level",e),s=(Date.now()-this.curLevelInfo.startTime)/1e3;if(i){var a=i.stars.split("|");t>=a[2]?n=3:t>=a[1]?n=2:t>=a[0]&&(n=1)}var r=0;this.history.hasOwnProperty(e)?(r=this.history[e].star,this.history[e].score<t&&(this.history[e].score=t,this.history[e].star=n,this.history[e].costTime=s)):this.history[e]={levelId:e,score:t,star:n,costTime:s},f.instance.setConfigData(o.LOCAL_CACHE.HISTORY,JSON.stringify(this.history));for(var h=i.golds.split("|"),I=0,u=r;u<n;u++)I+=Number(h[u]);return I>0&&(this.addGold(I),c.dispatchEvent("updateGold")),{levelId:e,score:t,star:n,gold:I,costTime:s,spareStep:this.spareStep}},s.nextLevel=function(){this.level++,this.startNewLevel()},n(i,[{key:"bag",get:function(){return this._bag}},{key:"userId",get:function(){return this._userId},set:function(e){this._userId=e}},{key:"settings",get:function(){return this._settings},set:function(e){this._settings=e}},{key:"playerInfo",get:function(){return this._playerInfo}},{key:"history",get:function(){return this._history}},{key:"isNewBee",get:function(){return this._isNewBee},set:function(e){this._isNewBee=e}}],[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}(a))._instance=void 0,u=y))||u);i._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,e,n,i,a;return{setters:[function(t){o=t.createClass},function(t){e=t.cclegacy,n=t._decorator,i=t.instantiate,a=t.NodePool}],execute:function(){var r,c;e._RF.push({},"e4ab6T5/1VCqK/Vn+UcADNM","poolManager",void 0);var s=n.ccclass;n.property,t("poolManager",s("poolManager")(((c=function(){function t(){this._dictPool={},this._dictPrefab={}}var e=t.prototype;return e.getNode=function(t,o){var e=t.name;e||(e=t.data.name),this._dictPrefab[e]=t;var n=null;if(this._dictPool.hasOwnProperty(e)){var r=this._dictPool[e];n=r.size()>0?r.get():i(t)}else{var c=new a;this._dictPool[e]=c,n=i(t)}return n.parent=o,n.active=!0,n},e.putNode=function(t){if(t){var o=t.name,e=null;this._dictPool.hasOwnProperty(o)?e=this._dictPool[o]:(e=new a,this._dictPool[o]=e),e.put(t)}},e.clearPool=function(t){this._dictPool.hasOwnProperty(t)&&this._dictPool[t].clear()},e.prePool=function(t,o){var e=t.name,n=new a;this._dictPool[e]=n;for(var r=0;r<o;r++){var c=i(t);n.put(c)}},o(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,r=c))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/propItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts","./buttonEx.ts"],(function(t){var o,n,r,e,i,p,s,c,a,u,l,f,P;return{setters:[function(t){o=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,e=t.assertThisInitialized},function(t){i=t.cclegacy,p=t._decorator,s=t.Component},function(t){c=t.clientEvent},function(t){a=t.playerData},function(t){u=t.resourceUtil},function(t){l=t.uiManager},function(t){f=t.constants},function(t){P=t.ButtonEx}],execute:function(){var h,I,d,b;i._RF.push({},"e7ad36HvgtJMJhvgKYrltrK","propItem",void 0);var v=p.ccclass,g=p.property;t("PropItem",v("PropItem")((d=o((I=function(t){function o(){for(var o,n=arguments.length,i=new Array(n),p=0;p<n;p++)i[p]=arguments[p];return o=t.call.apply(t,[this].concat(i))||this,r(o,"lbPropNum",d,e(o)),r(o,"spPropIcon",b,e(o)),o.propInfo=void 0,o.propPrice=void 0,o}n(o,t);var i=o.prototype;return i.start=function(){this.updateUnlockProp()},i.onEnable=function(){c.on("updateProp",this.updateProp,this),c.on("updateUnlockProp",this.updateUnlockProp,this)},i.onDisable=function(){c.off("updateProp",this.updateProp,this),c.off("updateUnlockProp",this.updateUnlockProp,this)},i.setInfo=function(t){this.propInfo=t;var o=a.instance.getPropAmount(t.ID);o<=0&&(o="+"),this.lbPropNum.string=o,u.setPropIcon(t.icon,this.spPropIcon,(function(){})),this.propPrice=t.price},i.onPropItemClick=function(){l.instance.showDialog("props/buy",[this.propInfo.ID,f.ANALYTICS_TYPE.CHECKPOINT_PROP_BUY_NUM])},i.updateProp=function(t){t===this.propInfo.ID&&this.setInfo(this.propInfo)},i.updateUnlockProp=function(){var t=a.instance.isPropUnlock(this.propInfo.ID);this.node.getComponent(P).interactable=t,u.setGray(this.node,!t)},o}(s)).prototype,"lbPropNum",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=o(I.prototype,"spPropIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=I))||h);i._RF.pop()}}}));

System.register("chunks:///_virtual/pveCntrl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./loadsh.ts"],(function(e){var t,r,i,n,o,a,c,s,p,l,u,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,c=e.Node,s=e.sys,p=e.view,l=e.ResolutionPolicy,u=e.screen,f=e.Component},function(e){h=e.loadsh}],execute:function(){var v,d,y,w,g;o._RF.push({},"7c391ApfydAa6czA7J0P3/E","pveCntrl",void 0);var z=a.ccclass,A=a.property;e("pveCntrl",(v=z("pveCntrl"),d=A(c),v((g=t((w=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"wrapper",g,n(t)),t}r(t,e);var o=t.prototype;return o.onLoad=function(){this.adaptiveLogic()},o.adaptiveLogic=function(){var e=this;s.isMobile?(h.checkAspectRatioGame(this.wrapper),u.on("window-resize",(function(){return h.checkAspectRatioGame(e.wrapper)}),this)):p.setDesignResolutionSize(3600,1280,l.FIXED_HEIGHT)},t}(f)).prototype,"wrapper",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=w))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/pveSlotUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./constants.ts","./levelUI.ts"],(function(e){var t,i,r,n,l,o,s,a,h,v,d,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){l=e.cclegacy,o=e._decorator,s=e.instantiate,a=e.UITransform,h=e.Component},function(e){v=e.playerData},function(e){d=e.constants},function(e){p=e.LevelUI}],execute:function(){var c,u,f,y,g;l._RF.push({},"61998EPL8lJqYcj54CvjY6+","pveSlotUI",void 0);var C=o.ccclass,b=o.property;e("PveSlotUI",C("PveSlotUI")((f=t((u=function(e){function t(){for(var t,i=arguments.length,l=new Array(i),o=0;o<i;o++)l[o]=arguments[o];return t=e.call.apply(e,[this].concat(l))||this,r(t,"levelNodes",f,n(t)),r(t,"prefabLevel",y,n(t)),r(t,"prefabCloud",g,n(t)),t.index=void 0,t._parent=void 0,t.levelArray=void 0,t}i(t,e);var l=t.prototype;return l.show=function(e,t,i){this.index=i,this._parent=e,this.levelArray=t,this.addLevelNodes()},l.addLevelNodes=function(){for(var e=v.instance.getCurrentLevel(),t=parseInt(e.name),i=this.levelArray.length,r=0,n=0;n<i;n++){this.levelNodes[n].active=!0;var l=this.levelNodes[n].getComponentInChildren(p);if(!l){var o=s(this.prefabLevel);o.active=!0,o.setPosition(0,0),this.levelNodes[n].addChild(o)}var a=this.levelArray[n].name;parseInt(a)<t?this.levelArray[n].status=d.PVE_LEVEL_STATUS.DONE:parseInt(a)===t?this.levelArray[n].status=d.PVE_LEVEL_STATUS.DOING:this.levelArray[n].status=d.PVE_LEVEL_STATUS.UNDONE;var h=this.levelArray[n].ID;v.instance.history.hasOwnProperty(h)&&(this.levelArray[n].star=v.instance.history[h].star),(l=this.levelNodes[n].getComponentInChildren(p)).init(this.levelArray[n]),r=this.levelNodes[n].position.y}this.showCloudsUponLevels(r);for(var c=this.levelNodes.length,u=this.levelArray.length;u<c;u++)this.levelNodes[u].removeAllChildren(),this.levelNodes[u].active=!1},l.showCloudsUponLevels=function(e){var t=this.node.getChildByName("cloud");t&&this.node.removeChild(t);var i=0,r=e;this.index<0?i=0:(i=this.index,r+=430);var n=this.node.getComponent(a).height;r+=n*i;var l=n+this.node.position.y,o=this._parent.contentNode.getComponent(a).height,h=s(this.prefabCloud),v=h.getComponent(a).height;Math.floor(Math.abs(o-r)/v)&&Math.abs(l-r)>v&&(h.setPosition(0,e+v/2),h.active=!0,this.node.addChild(h))},t}(h)).prototype,"levelNodes",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=t(u.prototype,"prefabLevel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(u.prototype,"prefabCloud",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=u))||c);l._RF.pop()}}}));

System.register("chunks:///_virtual/pveUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./gameLogic.ts","./playerData.ts","./uiManager.ts","./constants.ts","./utils.ts"],(function(t){var e,n,i,o,r,a,s,u,l,c,p,d,h,f,g,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Animation,u=t.Sprite,l=t.Vec3,c=t.Component},function(t){p=t.clientEvent},function(t){d=t.GameLogic},function(t){h=t.playerData},function(t){f=t.uiManager},function(t){g=t.constants},function(t){y=t.utils}],execute:function(){var b,S,I,m,D,R,T,L,v,w,E,B,N;r._RF.push({},"61b9axYpi9De7EZBUlEuYVP","pveUI",void 0);var P=a.ccclass,k=a.property;t("PveUI",P("PveUI")((I=e((S=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"multiScrollView",I,o(e)),i(e,"settingNode",m,o(e)),i(e,"introductionNode",D,o(e)),i(e,"ndLotteryBtn",R,o(e)),i(e,"ndLotteryTips",T,o(e)),i(e,"lbLotterySpareTimes",L,o(e)),i(e,"sfBlueDot",v,o(e)),i(e,"sfRedDot",w,o(e)),i(e,"lbGold",E,o(e)),i(e,"ndSignRedDot",B,o(e)),i(e,"ndShopRedDot",N,o(e)),e.rewardType=void 0,e.debugIdx=void 0,e.debugTimer=void 0,e}n(e,t);var r=e.prototype;return r.onEnable=function(){p.on("updateSignIn",this.checkSignInRedDot,this),p.on("updateLotterySpareTimes",this.updateLotterySpareTimes,this),p.on("updateGold",this.updateGold,this),p.on("updateShopPropInfo",this.checkShopRedDot,this)},r.onDisable=function(){p.off("updateSignIn",this.checkSignInRedDot,this),p.off("updateLotterySpareTimes",this.updateLotterySpareTimes,this),p.off("updateGold",this.updateGold,this),p.off("updateShopPropInfo",this.checkShopRedDot,this)},r.start=function(){h.instance.playerInfo.isNew?this.introductionNode.active=!0:this.introductionNode.active=!1,this.refreshUI(),this.checkSignInRedDot(),this.checkShopRedDot(),this.updateLotterySpareTimes()},r.refreshUI=function(){this.updateGold()},r.onBtnBack=function(){},r.onBtnSettingClick=function(){d.instance.showInterStitialAd((function(){f.instance.showDialog("dialog/setting")}))},r.onBtnSignClick=function(){f.instance.showDialog("signIn/signIn")},r.onBtnLotteryClick=function(){f.instance.showDialog("lottery/lottery")},r.onBtnIntrodutionClick=function(){this.introductionNode.active=!1},r.updateLotterySpareTimes=function(){var t=this;d.instance.getOpenRewardType(g.SHARE_FUNCTION.LOTTERY,(function(e,n){e||(t.rewardType=n)}));var e=h.instance.getLotterySpareTimes(!1),n=h.instance.getLotterySpareTimes(!0);this.ndLotteryTips.active=e>0||n>0,this.lbLotterySpareTimes.string=e.toString();var i=this.ndLotteryBtn.getComponent(s);e>0||n>0?e?i.play():this.rewardType!==g.OPEN_REWARD_TYPE.NULL?(this.lbLotterySpareTimes.string=n.toString(),this.ndLotteryTips.getComponent(u).spriteFrame=this.sfBlueDot,i.play()):(this.ndLotteryTips.active=!1,i.stop(),this.ndLotteryBtn.getChildByName("pveIconLotterya").eulerAngles=new l(0,0,0)):(i.stop(),this.ndLotteryBtn.getChildByName("pveIconLotterya").eulerAngles=new l(0,0,0))},r.updateGold=function(){this.lbGold.string=y.formatMoney(h.instance.getGold())},r.onBtnShopClick=function(){f.instance.showDialog("shop/shop")},r.checkSignInRedDot=function(){var t=this;h.instance.updateSignInCurrentDay(),d.instance.getOpenRewardType(g.SHARE_FUNCTION.FILL_SIGN,(function(e,n){if(!e)switch(n){case g.OPEN_REWARD_TYPE.AD:case g.OPEN_REWARD_TYPE.SHARE:t.ndSignRedDot.active=!h.instance.getSignInReceivedInfo().isAllReceived;break;case g.OPEN_REWARD_TYPE.NULL:t.ndSignRedDot.active=!h.instance.getSignInReceivedInfo().isTodayReceived}}))},r.checkShopRedDot=function(){h.instance.playerInfo.hasOwnProperty("shopPropInfo")||(h.instance.resetShopPropInfo(),h.instance.updateShopPropInfo(!1)),this.ndShopRedDot.active=h.instance.playerInfo.shopPropInfo.receiveStatus===g.REWARD_STATUS.RECEIVABLE},r.onBtnDebugClick=function(){this.debugIdx||(this.debugIdx=0);if(this.debugIdx++,this.debugIdx>8)f.instance.showDialog("debug/password",[]);else if(!this.debugTimer){var t=this;this.debugTimer=setTimeout((function(){t.debugTimer=null,t.debugIdx<8&&(t.debugIdx=0)}),3e3)}},e}(c)).prototype,"multiScrollView",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(S.prototype,"settingNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"introductionNode",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=e(S.prototype,"ndLotteryBtn",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(S.prototype,"ndLotteryTips",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(S.prototype,"lbLotterySpareTimes",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(S.prototype,"sfBlueDot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(S.prototype,"sfRedDot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"lbGold",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(S.prototype,"ndSignRedDot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=e(S.prototype,"ndShopRedDot",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=S))||b);r._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){var n,t,r,o,i,a,s,f,c,l,u;return{setters:[function(e){n=e.cclegacy,t=e._decorator,r=e.resources,o=e.error,i=e.Prefab,a=e.SpriteFrame,s=e.Texture2D,f=e.instantiate,c=e.find,l=e.isValid,u=e.Sprite}],execute:function(){var d;n._RF.push({},"7844e1bOwZK+7JMYjENQU5v","resourceUtil",void 0);var p=t.ccclass;e("resourceUtil",p("resourceUtil")(d=function(){function e(){}return e.loadRes=function(e,n,t){void 0===t&&(t=function(){}),r.load(e,(function(e,n){if(e)return o(e.message||e),void t(e,n);t&&t(null,n)}))},e.loadEffectRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes("prefab/effect/"+e,i,(function(n,o){if(n)return console.error("effect load failed",e),void(r&&r());t&&t(o)}))}))},e.loadModelRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes("prefab/model/"+e,i,(function(n,o){if(n)return console.error("model load failed",e),void(r&&r());t&&t(o)}))}))},e.loadModelResArr=function(e,n,t,o){var a=n.map((function(n){return e+"/"+n}));r.load(a,i,t,o)},e.loadSpriteFrameRes=function(e){var n=this;return new Promise((function(t,r){n.loadRes(e,a,(function(n,o){if(n)return console.error("spriteFrame load failed!",e,n),void(r&&r());var i=new s;i.image=o;var f=new a;f.texture=i,t&&t(f)}))}))},e.getMap=function(e,n){var t="map";t+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes("map/config/"+t,null,(function(e,t){if(e)n(e,t);else{var r="";if(t._file){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(t._file));var o=JSON.parse(r);n(null,o)}else if(t.text){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(t.text));o=JSON.parse(r);n(null,o)}else t.json?n(null,t.json):n("failed")}}))},e.getMapObj=function(e,n,t,o){for(var a=[],s=0;s<n.length;s++)a.push("map/"+e+"/"+n[s]);r.load(a,i,t,o)},e.getUIPrefabRes=function(e,n){this.loadRes("prefab/ui/"+e,i,n)},e.createUI=function(e,n,t){this.getUIPrefabRes(e,(function(e,r){if(!e){var o=f(r);o.setPosition(0,0,0),t||(t=c("Canvas/Wrapper")),t.addChild(o),n&&n(null,o)}}))},e.getJsonData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){e?o(e.message||e):t.json?n(e,t.json):n("failed!!!")}))},e.getTextData=function(e,n){this.loadRes("datas/"+e,null,(function(e,t){if(e)o(e.message||e);else{var r=t.text;n(e,r)}}))},e.setSpriteFrame=function(e,n,t){this.loadRes(e+"/spriteFrame",a,(function(r,o){if(r)return console.error("set sprite frame failed! err:",e,r),void t(r);n&&l(n)&&(n.spriteFrame=o,t(null))}))},e.setPropIcon=function(e,n,t){this.setSpriteFrame("gamePackages/textures/icons/props/"+e,n,t)},e.setGray=function(e,n){for(var t=e.getComponentsInChildren(u),r=0;r<t.length;++r){var o=t[r];o.grayscale=!!n}},e.setAvatar=function(e,n,t){},e.setCakeIcon=function(e,n,t){this.setSpriteFrame("gamePackages/textures/icons/cakes/"+e,n,t)},e.createEffect=function(e,n,t){this.loadRes("/gamePackages/effects/"+e,i,(function(e,r){if(e)n("err",null);else{var o=f(r);t||(t=c("Canvas")),t.addChild(o),n(null,o)}}))},e.getEffectPrefab=function(e,n){this.loadRes("gamePackages/effects/"+e,i,n)},e}())||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/reward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./localConfig.ts","./resourceUtil.ts","./constants.ts","./LanguageData.ts","./uiManager.ts"],(function(e){var t,i,n,a,o,r,s,c,l,u,h,m,p,d,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,r=e._decorator,s=e.Animation,c=e.UITransform,l=e.Component},function(e){u=e.GameLogic},function(e){h=e.localConfig},function(e){m=e.resourceUtil},function(e){p=e.constants},function(e){d=e.t},function(e){R=e.uiManager}],execute:function(){var b,f,w,v,y,D,A,g,T,E;o._RF.push({},"511b6KMY/hH0J3ytfJAXF3B","reward",void 0);var P=r.ccclass,I=r.property;e("Reward",P("Reward")((w=t((f=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return t=e.call.apply(e,[this].concat(o))||this,n(t,"sfDiamond",w,a(t)),n(t,"sfGold",v,a(t)),n(t,"spIcon",y,a(t)),n(t,"lbRewardValue",D,a(t)),n(t,"aniGetItem",A,a(t)),n(t,"ndBtnNormalReceive",g,a(t)),n(t,"ndBtnDoubleReceive",T,a(t)),n(t,"ndBtnReceive",E,a(t)),t.itemType=void 0,t.itemAmount=void 0,t.itemSubType=void 0,t.shareFunction=void 0,t.openRewardType=void 0,t}i(t,e);var o=t.prototype;return o.show=function(e,t,i){var n=this;this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.shareFunction=i,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(s.EventType.FINISHED,(function(){n.aniGetItem.play("getItemIdle")}),this),this.setRewardPage(),t?(this.ndBtnReceive.active=!1,u.instance.getOpenRewardType(this.shareFunction,(function(e,t){if(e)n.close();else switch(n.openRewardType=t,t){case p.OPEN_REWARD_TYPE.AD:case p.OPEN_REWARD_TYPE.SHARE:n.ndBtnDoubleReceive.active=!0;break;case p.OPEN_REWARD_TYPE.NULL:n.ndBtnDoubleReceive.active=!1}})),this.ndBtnNormalReceive.active=!1,this.scheduleOnce(this.normalBtnCallback,p.NORMAL_SHOW_TIME)):(this.ndBtnNormalReceive.active=!1,this.ndBtnDoubleReceive.active=!1,this.ndBtnReceive.active=!0)},o.normalBtnCallback=function(){this.ndBtnNormalReceive.active=!0},o.setRewardPage=function(){var e=this.spIcon.getComponent(c);switch(this.itemType){case p.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string="x"+this.itemAmount;break;case p.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string="x"+this.itemAmount,e.width=257,e.height=166;break;case p.REWARD_TYPE.PROP:var t=h.instance.queryByID("prop",this.itemSubType);e.width=168,e.height=168,m.setPropIcon(t.icon,this.spIcon,(function(){}));var i=d("table_prop."+t.name);this.lbRewardValue.string=i+d("")+" x "+this.itemAmount}},o.onBtnNormalReceiveClick=function(){this.addReward(),this.close()},o.onBtnDoubleReceiveClick=function(){var e=this;switch(this.openRewardType){case p.OPEN_REWARD_TYPE.AD:u.instance.showRewardAd((function(t){t||(e.itemAmount*=2,e.showDoubleReward())}));break;case p.OPEN_REWARD_TYPE.SHARE:u.instance.share(this.shareFunction,{},(function(t){t||(e.itemAmount*=2,e.showDoubleReward())}))}},o.addReward=function(){switch(this.itemType){case p.REWARD_TYPE.DIAMOND:u.instance.addDiamond(this.itemAmount);break;case p.REWARD_TYPE.GOLD:u.instance.addGold(this.itemAmount);break;case p.REWARD_TYPE.PROP:u.instance.addProp(this.itemSubType,this.itemAmount)}},o.showDoubleReward=function(){this.unschedule(this.normalBtnCallback);var e={};e.itemType=this.itemType,e.itemSubType=this.itemSubType,e.itemAmount=this.itemAmount,R.instance.showDialog("lottery/reward",[e,!1,this.shareFunction]),this.close()},o.close=function(){R.instance.shiftFromPopupSeq("lottery/reward")},t}(l)).prototype,"sfDiamond",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(f.prototype,"sfGold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(f.prototype,"spIcon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(f.prototype,"lbRewardValue",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(f.prototype,"aniGetItem",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(f.prototype,"ndBtnNormalReceive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(f.prototype,"ndBtnDoubleReceive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(f.prototype,"ndBtnReceive",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b);o._RF.pop()}}}));

System.register("chunks:///_virtual/sceneManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./resourceUtil.ts","./constants.ts","./loadingUI.ts"],(function(n){var e,t,a,o,i,c,l,s,r,d,u,g,p;return{setters:[function(n){e=n.inheritsLoose,t=n.createClass},function(n){a=n.cclegacy,o=n._decorator,i=n.director,c=n.game,l=n.find,s=n.instantiate,r=n.Component},function(n){d=n.clientEvent},function(n){u=n.resourceUtil},function(n){g=n.constants},function(n){p=n.LoadingUI}],execute:function(){var h,f;a._RF.push({},"1c9f2SaApBI24JPUfdbbqk8","sceneManager",void 0);var S=o.ccclass;n("SceneManager",S("SceneManager")(((f=function(n){function a(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return(e=n.call.apply(n,[this].concat(a))||this).curLoadingScene=null,e.callback=null,e.loading=null,e.tasks=null,e.isStop=!1,e}e(a,n);var o=a.prototype;return o.loadScene=function(n,e,t){this.curLoadingScene=n,this.callback=t;var a=g.SCENE_MANAGER_TYPE.LOAD_SCENE,o=this;e.push(this.preloadScene.bind(this));var l=i.getScene();this.initLoadingUI(l,"loading",(function(){o.loading.getComponent(p).startLoading(a,e,(function(e,t){if(e)return console.error(e.message||e),void o.callback.apply(null,[e].concat(t));try{i.loadScene(o.curLoadingScene,(function(){o.callback.apply(null,[null].concat(null)),c.removePersistRootNode(o.loading),o.loading.removeFromParent(),d.dispatchEvent("onSceneChanged")}))}catch(e){console.log("loadScene",n,e)}}))}))},o.preloadScene=function(){var n=arguments,e=function(){n[n.length-1].apply(null,Array.prototype.slice.call(n,1))};i.preloadScene(this.curLoadingScene,e)},o.load=function(n,e){this.callback=e,this.tasks=n;var t=this,a=g.SCENE_MANAGER_TYPE.LOAD,o=l("Canvas");this.initLoadingUI(o,"loading",(function(){t.loading.setPosition(0,0),t.loading.getComponent(p).startLoading(a,t.tasks,(function(n,e){if(n)return console.error(n.message||n),void t.callback.apply(null,[n].concat(e));t.callback.apply(null,[null].concat(null))}))}))},o.initLoadingUI=function(n,e,t){var a=this;u.getUIPrefabRes("loading/"+e,(function(e,o){a.loading&&"loading"===a.loading.name||(delete a.loading,a.loading=s(o),a.loading.active=!1,n.addChild(a.loading,999)),t()}))},o.enterSceneByAnimation=function(n,e,t,a){this.curLoadingScene=e,this.callback=a;var o=this;t.push(this.preloadScene.bind(this));var c=i.getScene();this.initLoadingUI(c,n,(function(){o.loading.getComponent("loadingCloudUI").startLoading(!1,t,(function(n,e){if(n)return console.error(n.message||n),void o.callback.apply(null,[n].concat(e));i.preloadScene(o.curLoadingScene,(function(){i.loadScene(o.curLoadingScene,(function(){o.loading.getComponent("loadingCloudUI").endLoading(!0),o.callback.apply(null,[null].concat(null)),d.dispatchEvent("onSceneChanged")}))}))}))}))},o.discontinue=function(){this.loading&&this.loading.destroy()},t(a,null,[{key:"instance",get:function(){return this._instance||(this._instance=new a),this._instance}}]),a}(r))._instance=void 0,h=f))||h);a._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts","./uiManager.ts"],(function(n){var i,e,t,o,u,r,s,l,c;return{setters:[function(n){i=n.applyDecoratedDescriptor,e=n.inheritsLoose,t=n.initializerDefineProperty,o=n.assertThisInitialized},function(n){u=n.cclegacy,r=n._decorator,s=n.Component},function(n){l=n.AudioManager},function(n){c=n.uiManager}],execute:function(){var a,f,p,d,b,g,h,M,S,O,y,v,w;u._RF.push({},"ba66atexAVHHJdMxg2byzWt","setting",void 0);var m=r.ccclass,C=r.property;n("Setting",m("Setting")((p=i((f=function(n){function i(){for(var i,e=arguments.length,u=new Array(e),r=0;r<e;r++)u[r]=arguments[r];return i=n.call.apply(n,[this].concat(u))||this,t(i,"versionLabel",p,o(i)),t(i,"ndMusicOpen",d,o(i)),t(i,"ndMusicClose",b,o(i)),t(i,"ndSoundOpen",g,o(i)),t(i,"ndSoundClose",h,o(i)),t(i,"spMusicIcon",M,o(i)),t(i,"spSoundIcon",S,o(i)),t(i,"sfMusicOn",O,o(i)),t(i,"sfMusicOff",y,o(i)),t(i,"sfSoundOn",v,o(i)),t(i,"sfSoundOff",w,o(i)),i}e(i,n);var u=i.prototype;return u.show=function(){this.node.active=!0;var n=l.instance.getAudioSetting(!0),i=l.instance.getAudioSetting(!1);this.ndMusicOpen.active=!n,this.ndMusicClose.active=n,this.ndSoundOpen.active=!i,this.ndSoundClose.active=i,this.spMusicIcon.spriteFrame=!0===this.ndMusicOpen.active?this.sfMusicOff:this.sfMusicOn,this.spSoundIcon.spriteFrame=!0===this.ndSoundOpen.active?this.sfSoundOff:this.sfSoundOn},u.onBtnMusicOpenClick=function(){l.instance.openMusic(),this.show()},u.onBtnMusicCloseClick=function(){l.instance.closeMusic(),this.show()},u.onBtnSoundOpenClick=function(){l.instance.openSound(),this.show()},u.onBtnSoundCloseClick=function(){l.instance.closeSound(),this.show()},u.onBtnCloseClick=function(){c.instance.hideDialog("dialog/setting")},i}(s)).prototype,"versionLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(f.prototype,"ndMusicOpen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(f.prototype,"ndMusicClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(f.prototype,"ndSoundOpen",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=i(f.prototype,"ndSoundClose",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(f.prototype,"spMusicIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(f.prototype,"spSoundIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(f.prototype,"sfMusicOn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(f.prototype,"sfMusicOff",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(f.prototype,"sfSoundOn",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(f.prototype,"sfSoundOff",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),a=f))||a);u._RF.pop()}}}));

System.register("chunks:///_virtual/shop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./localConfig.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts","./utils.ts","./buttonEx.ts","./shopItem.ts","./shopPropsOperation.ts"],(function(t){var e,n,i,o,r,a,p,s,l,c,h,u,f,d,m,S,b,P;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,p=t.instantiate,s=t.Component},function(t){l=t.clientEvent},function(t){c=t.localConfig},function(t){h=t.playerData},function(t){u=t.resourceUtil},function(t){f=t.uiManager},function(t){d=t.constants},function(t){m=t.utils},function(t){S=t.ButtonEx},function(t){b=t.ShopItem},function(t){P=t.ShopPropsOperation}],execute:function(){var I,g,w,R,y,v,E,C,z,A,D,O,T,B;r._RF.push({},"ece87xczkNChrPYtwiev9Te","shop",void 0);var G=a.ccclass,L=a.property;t("Shop",G("Shop")((w=e((g=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"arrMenu",w,o(e)),i(e,"pbShopItem",R,o(e)),i(e,"lbGold",y,o(e)),i(e,"aniLight",v,o(e)),i(e,"ndShopPropsOperation",E,o(e)),i(e,"spRandPropIcon",C,o(e)),i(e,"lbRandPropNumber",z,o(e)),i(e,"ndBtnReceive",A,o(e)),i(e,"spReceive",D,o(e)),i(e,"sfReceive",O,o(e)),i(e,"sfShare",T,o(e)),i(e,"sfAd",B,o(e)),e.arrShopItemScript=void 0,e.animState=void 0,e.randomItem=void 0,e.shopPropsOperationScript=void 0,e}n(e,t);var r=e.prototype;return r.ctor=function(){this.arrShopItemScript=[]},r.onEnable=function(){l.on("updateGold",this.updateGold,this),l.on("updateShopPropInfo",this.showShopProp,this)},r.onDisable=function(){l.off("updateGold",this.updateGold,this),l.off("updateShopPropInfo",this.showShopProp,this)},r.show=function(){this.updateGold(),this.init(),this.animState="shopPropertyIdle",this.aniLight.play(this.animState),this.showShopProp(),this.spReceive.spriteFrame=this.sfReceive},r.showShopProp=function(){var t=h.instance.playerInfo.shopPropInfo,e=c.instance.getTable("prop");switch(this.randomItem=e[t.prop],u.setPropIcon(this.randomItem.icon,this.spRandPropIcon,(function(){})),this.lbRandPropNumber.string="1",t.receiveStatus){case d.REWARD_STATUS.UNRECEIVABLE:this.ndBtnReceive.getComponent(S).interactable=!1;break;case d.REWARD_STATUS.RECEIVABLE:this.ndBtnReceive.getComponent(S).interactable=!0}},r.init=function(){var t=this;this.shopPropsOperationScript=this.ndShopPropsOperation.getComponent(P),this.arrShopItemScript||(this.arrShopItemScript=[]);var e=c.instance.getTable("prop");m.objectToArray(e).forEach((function(e,n,i){var o=null;t.arrMenu[n].getChildByName("shopItem")?o=t.arrMenu[n].getChildByName("shopItem"):(o=p(t.pbShopItem)).parent=t.arrMenu[n];var r=o.getComponent(b);r.setInfo(e,t),0===n&&r.showSelect(),t.arrShopItemScript.includes(r)||t.arrShopItemScript.push(r)}))},r.updateGold=function(){this.lbGold.string=m.formatMoney(h.instance.getGold())},r.onBtnCloseClick=function(){f.instance.hideDialog("shop/shop")},r.showAllItemUnSelect=function(){this.arrShopItemScript.forEach((function(t){t.showUnSelect()}))},r.onBtnReceiveClick=function(){this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID),this.showReward()},r.onRandPropClick=function(){this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID)},r.showRandPropSecelt=function(){this.showAllItemUnSelect(),this.animState="shopPropertySelect",this.aniLight.play(this.animState)},r.hideRandPropSelect=function(){"shopPropertyIdle"!==this.animState&&(this.animState="shopPropertyIdle",this.aniLight.play(this.animState))},r.showReward=function(){var t={};t.itemType=d.REWARD_TYPE.PROP,t.itemSubType=this.randomItem.ID,t.itemAmount=1,f.instance.showDialog("lottery/reward",[t,!1,d.SHARE_FUNCTION.SHOP_PROP]),h.instance.updateShopPropInfo(!0),this.showShopProp(),l.dispatchEvent("updateShopPropInfo"),this.showRandPropSecelt(),this.shopPropsOperationScript.show(this.randomItem.ID)},e}(s)).prototype,"arrMenu",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(g.prototype,"pbShopItem",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(g.prototype,"lbGold",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(g.prototype,"aniLight",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(g.prototype,"ndShopPropsOperation",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(g.prototype,"spRandPropIcon",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(g.prototype,"lbRandPropNumber",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(g.prototype,"ndBtnReceive",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(g.prototype,"spReceive",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=e(g.prototype,"sfReceive",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(g.prototype,"sfShare",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(g.prototype,"sfAd",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=g))||I);r._RF.pop()}}}));

System.register("chunks:///_virtual/shopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./gameLogic.ts","./localConfig.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./constants.ts"],(function(e){var t,i,n,r,o,s,a,l,u,c,p,h,f,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,a=e.Component},function(e){l=e.clientEvent},function(e){u=e.GameLogic},function(e){c=e.localConfig},function(e){p=e.playerData},function(e){h=e.resourceUtil},function(e){f=e.uiManager},function(e){b=e.constants}],execute:function(){var d,y,m,I,B,P,S,g,v,w,T,E,N,_,R;o._RF.push({},"583beWcByBAYIU3DaI3EGJj","shopItem",void 0);var D=s.ccclass,A=s.property;e("ShopItem",D("ShopItem")((m=t((y=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"spIcon",m,r(t)),n(t,"lbPrise",I,r(t)),n(t,"ndGold",B,r(t)),n(t,"lbNum",P,r(t)),n(t,"lbProcess",S,r(t)),n(t,"aniLight",g,r(t)),n(t,"exBtnBuy",v,r(t)),n(t,"ndNumber",w,r(t)),n(t,"spBtnBuy",T,r(t)),n(t,"sfBuy",E,r(t)),n(t,"sfShare",N,r(t)),n(t,"sfAd",_,r(t)),n(t,"sfReceive",R,r(t)),t.info=void 0,t.parent=void 0,t.id=void 0,t.price=void 0,t.countPerBuy=void 0,t.icon=void 0,t.animState=void 0,t.totalPrice=void 0,t.times=void 0,t.maxTimes=void 0,t.rewardType=void 0,t}i(t,e);var o=t.prototype;return o.onEnable=function(){l.on("updateGold",this.refreshBtn,this),l.on("updateInfiniteShareTimes",this.updateInfiniteShareTimes,this)},o.onDisable=function(){l.off("updateGold",this.refreshBtn,this),l.off("updateInfiniteShareTimes",this.updateInfiniteShareTimes,this)},o.setInfo=function(e,t){this.info=e,this.parent=t,this.id=e.ID,this.price=e.price,this.countPerBuy=e.countPerBuy,this.icon=e.icon,this.refreshUI(),this.refreshBtn()},o.refreshUI=function(){var e=this;this.animState="shopPropertyIdle",this.aniLight.play(this.animState),h.setPropIcon(this.icon,this.spIcon,(function(){}));var t=c.instance.queryByID("prop",this.id);this.totalPrice=this.countPerBuy*this.price,this.lbNum.string=t.countPerBuy,this.times=p.instance.getInfiniteTimes(),this.maxTimes=b.MAX_INFINITE_TIMES,this.info.ID!==b.PROP_ID.INFINITE?(this.lbPrise.string=this.totalPrice,this.lbProcess.node.active=!1):u.instance.getOpenRewardType(b.SHARE_FUNCTION.BUY_INFINITE,(function(t,i){if(!t){switch(e.rewardType=i,i){case b.OPEN_REWARD_TYPE.AD:e.spBtnBuy.spriteFrame=e.sfAd,e.ndGold.active=!1,e.updateInfiniteShareTimes();break;case b.OPEN_REWARD_TYPE.SHARE:e.spBtnBuy.spriteFrame=e.sfShare,e.ndGold.active=!1,e.updateInfiniteShareTimes();break;case b.OPEN_REWARD_TYPE.NULL:e.spBtnBuy.spriteFrame=e.sfBuy,e.lbProcess.node.active=!1,e.lbPrise.string=e.totalPrice}e.refreshBtn()}}))},o.refreshBtn=function(){"number"==typeof this.rewardType&&this.rewardType!==b.OPEN_REWARD_TYPE.NULL?this.exBtnBuy.interactable=!0:this.exBtnBuy.interactable=p.instance.getGold()>=this.totalPrice},o.onBtnBuyClick=function(){f.instance.showDialog("props/buy",[this.id,b.ANALYTICS_TYPE.SHOP_PROP_PER_BUY]),this.parent.showAllItemUnSelect(),this.showSelect()},o.onItemClick=function(){this.parent.showAllItemUnSelect(),this.parent.hideRandPropSelect(),this.showSelect()},o.showSelect=function(){this.animState="shopPropertySelect",this.aniLight.play(this.animState),this.parent.shopPropsOperationScript.show(this.id)},o.showUnSelect=function(){"shopPropertyIdle"!==this.animState&&(this.animState="shopPropertyIdle",this.aniLight.play(this.animState))},o.updateInfiniteShareTimes=function(){this.spBtnBuy.node.setScale(1,1,1),this.id===b.PROP_ID.INFINITE&&(this.spBtnBuy.spriteFrame=this.sfReceive,this.spBtnBuy.node.setScale(1.3,1.3,1.3))},t}(a)).prototype,"spIcon",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(y.prototype,"lbPrise",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(y.prototype,"ndGold",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(y.prototype,"lbNum",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(y.prototype,"lbProcess",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(y.prototype,"aniLight",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(y.prototype,"exBtnBuy",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(y.prototype,"ndNumber",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(y.prototype,"spBtnBuy",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(y.prototype,"sfBuy",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(y.prototype,"sfShare",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(y.prototype,"sfAd",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(y.prototype,"sfReceive",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=y))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/shopPropsOperation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts","./localConfig.ts"],(function(t){var e,i,r,n,o,a,p,l,s;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,p=t.Component},function(t){l=t.t},function(t){s=t.localConfig}],execute:function(){var c,u,f,h,b,y;o._RF.push({},"4a0f7h1SXdPto0QRIGkEQAJ","shopPropsOperation",void 0);var g=a.ccclass,d=a.property;t("ShopPropsOperation",g("ShopPropsOperation")((f=e((u=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return e=t.call.apply(t,[this].concat(o))||this,r(e,"lbTitle",f,n(e)),r(e,"lbDesc",h,n(e)),r(e,"spTip",b,n(e)),r(e,"arrSftip",y,n(e)),e.type=void 0,e}i(e,t);var o=e.prototype;return o.show=function(t){this.node.active=!0,this.type=t,this.refreshUI()},o.hide=function(){this.node.active=!1},o.refreshUI=function(){var t=s.instance.queryByID("prop",this.type);this.lbTitle.string=l("table_prop."+t.name),this.lbDesc.string=l("table_prop."+t.desc),this.spTip.spriteFrame=this.arrSftip[this.type-1]},e}(p)).prototype,"lbTitle",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=e(u.prototype,"lbDesc",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(u.prototype,"spTip",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(u.prototype,"arrSftip",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/showTarget.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./playerData.ts","./showTargetCake.ts"],(function(t){var e,n,r,a,i,o,c,s,p,l,u,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){i=t.cclegacy,o=t._decorator,c=t.Animation,s=t.instantiate,p=t.Component},function(t){l=t.clientEvent},function(t){u=t.playerData},function(t){h=t.ShowTargetCake}],execute:function(){var f,g,T,y,v;i._RF.push({},"2c1036ANX5HcIKmghpPMpLE","showTarget",void 0);var d=o.ccclass,w=o.property;t("ShowTarget",d("ShowTarget")((T=e((g=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return e=t.call.apply(t,[this].concat(i))||this,r(e,"pfCake",T,a(e)),r(e,"nodeTargetGroup",y,a(e)),r(e,"aniTarget",v,a(e)),e._parent=void 0,e}n(e,t);var i=e.prototype;return i.show=function(t,e){var n=this;for(var r in this._parent=t,this.aniTarget.play("showTarget"),this.aniTarget.once(c.EventType.FINISHED,(function(){n.node&&n.node.destroy(),e&&e()}),this),u.instance.dictTargets){var a=s(this.pfCake);a.parent=this.nodeTargetGroup,a.getComponent(h).show(r,this)}},i.showFlyEffect=function(t,e){var n=this._parent.getTargetWorldPos(t);n?this._parent._fightScene.effectGroup.playTargetCakeFlyEffect(t,e,n,(function(){l.dispatchEvent("showTargetCake",t)})):l.dispatchEvent("showTargetCake",t)},e}(p)).prototype,"pfCake",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(g.prototype,"nodeTargetGroup",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(g.prototype,"aniTarget",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f);i._RF.pop()}}}));

System.register("chunks:///_virtual/showTargetCake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./resourceUtil.ts"],(function(e){var t,n,a,i,r,o,l,c,u,s,p,f,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,o=e._decorator,l=e.Label,c=e.Animation,u=e.UITransform,s=e.Vec3,p=e.Component},function(e){f=e.playerData},function(e){h=e.resourceUtil}],execute:function(){var k,C,y,b,g,w,d,v,T;r._RF.push({},"9c9c8xtNVNNdaML8iBVjy6C","showTargetCake",void 0);var m=o.ccclass,z=o.property;e("ShowTargetCake",(k=m("ShowTargetCake"),C=z(l),k((g=t((b=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,a(t,"spCake",g,i(t)),a(t,"lbCake",w,i(t)),a(t,"aniCake",d,i(t)),a(t,"nodeValue",v,i(t)),a(t,"nodePanel",T,i(t)),t.cake=void 0,t}n(t,e);var r=t.prototype;return r.show=function(e,t){var n=this;this.cake=e,h.setCakeIcon(this.cake,this.spCake,(function(){})),this.lbCake.string=f.instance.getTargetValue(e),this.aniCake.play("showTargetCakeShow"),this.aniCake.once(c.EventType.FINISHED,(function(){n.aniCake.play("showTargetCakeOver"),t.showFlyEffect(n.cake,n.spCake.node.getComponent(u).convertToWorldSpaceAR(new s(0,0,0)))}),this)},r.onlyShowCake=function(e){h.setCakeIcon(e,this.spCake,(function(){})),this.nodeValue.active=!1,this.nodePanel.active=!1},t}(p)).prototype,"spCake",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(b.prototype,"lbCake",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(b.prototype,"aniCake",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"nodeValue",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(b.prototype,"nodePanel",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));r._RF.pop()}}}));

System.register("chunks:///_virtual/signIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./uiManager.ts","./clientEvent.ts","./gameLogic.ts","./constants.ts","./LanguageData.ts","./localConfig.ts","./buttonEx.ts","./signInItem.ts","./animationUI.ts"],(function(n){var e,i,t,r,a,o,s,c,l,u,I,g,p,d,h,f,m,S,R,v,b;return{setters:[function(n){e=n.applyDecoratedDescriptor,i=n.inheritsLoose,t=n.initializerDefineProperty,r=n.assertThisInitialized},function(n){a=n.cclegacy,o=n._decorator,s=n.Node,c=n.sys,l=n.Widget,u=n.instantiate,I=n.Component},function(n){g=n.playerData},function(n){p=n.uiManager},function(n){d=n.clientEvent},function(n){h=n.GameLogic},function(n){f=n.constants},function(n){m=n.t},function(n){S=n.localConfig},function(n){R=n.ButtonEx},function(n){v=n.SignInItem},function(n){b=n.AnimationUI}],execute:function(){var y,D,T,E,N,A,w,C,_,B,k;a._RF.push({},"8885akyBoFF94Jx+V7yERfJ","signIn",void 0);var L=o.ccclass,F=o.property;n("SignIn",(y=L("SignIn"),D=F(s),y((N=e((E=function(n){function e(){for(var e,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return e=n.call.apply(n,[this].concat(a))||this,t(e,"prefabItem",N,r(e)),t(e,"iconList",A,r(e)),t(e,"ndSeventhItem",w,r(e)),t(e,"ndBtnDoubleReceive",C,r(e)),t(e,"arrDay",_,r(e)),t(e,"ndBtnNormalReceive",B,r(e)),t(e,"wrapper",k,r(e)),e.currentDay=void 0,e.arrReceived=void 0,e.arrAfterFillSignIn=void 0,e.isTodayReceived=void 0,e.arrSignInItemScript=void 0,e.signInItemScript=void 0,e.openRewardType=void 0,e}i(e,n);var a=e.prototype;return a.onLoad=function(){if(c.isMobile){var n,e=null==(n=this.wrapper)?void 0:n.getComponent(l);if(!e)return;e.isAlignLeft=!0,e.isAlignRight=!0,e.isAlignBottom=!0,e.isAlignTop=!0}},a.onEnable=function(){d.on("updateSignIn",this.updateSignIn,this)},a.onDisable=function(){d.off("updateSignIn",this.updateSignIn,this)},a.show=function(){g.instance.updateSignInCurrentDay();var n=g.instance.playerInfo.signInInfo;console.log("###signInfo",n),this.currentDay=n.currentDay,this.arrReceived=n.receivedDays,this.arrAfterFillSignIn=n.afterFillSignInDays,this.showSignInInfo(),this.ndSeventhItem.setSiblingIndex(f.ZORDER.TIPS),this.updateSignIn(),this.isTodayReceived=g.instance.getSignInReceivedInfo().isTodayReceived,this.ndBtnNormalReceive.active=!1,this.isTodayReceived?this.scheduleOnce(this.showNormalBtnCallback,1):this.scheduleOnce(this.showNormalBtnCallback,f.NORMAL_SHOW_TIME)},a.updateSignIn=function(){this.ndBtnDoubleReceive.getComponent(R).interactable=!g.instance.getSignInReceivedInfo().isTodayReceived,console.log("###getSignInReceivedInfo",g.instance.getSignInReceivedInfo())},a.showNormalBtnCallback=function(){this.ndBtnNormalReceive.active=!0,this.node.getComponent(l).enabled=!0,this.ndBtnNormalReceive.getComponent(l).enabled=!0,this.ndBtnNormalReceive.getComponent(l).bottom=205,console.log("bottom",this.ndBtnNormalReceive.getComponent(l).bottom),console.log("enable",this.ndBtnNormalReceive.getComponent(l).enabled)},a.showSignInInfo=function(){var n=S.instance.getTable("signIn"),e=this;for(var i in this.arrSignInItemScript=[],n){var t=n[i].ID,r=!!this.arrReceived.includes(Number(t));t<=this.currentDay?(n[i].status=r?f.SIGN_REWARD_STATUS.RECEIVED:f.SIGN_REWARD_STATUS.RECEIVABLE,n[i].status===f.SIGN_REWARD_STATUS.RECEIVABLE&&t<this.currentDay&&(n[i].status=f.SIGN_REWARD_STATUS.FILLSIGNIN,this.arrAfterFillSignIn.includes(t)&&(n[i].status=f.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN))):n[i].status=f.SIGN_REWARD_STATUS.UNRECEIVABLE;var a=e.iconList[Number(i)-1],o=null;a.children.length<=1?(o=u(e.prefabItem),a.addChild(o),o.setPosition(0,0)):o=a.getChildByName("signInItem"),this.signInItemScript=o.getComponent(v),this.signInItemScript.init(n[i],e),this.arrSignInItemScript.includes(this.signInItemScript)||this.arrSignInItemScript.push(this.signInItemScript),this.arrDay[Number(i)-1].string=m("sign.day%{value}",{value:i})}},a.receiveReward=function(n,e,i){var t=n.ID;if(!(this.currentDay<t)){var r=!1;if(n.rewardType===f.REWARD_TYPE.GIFT)for(var a=g.instance.parseGift(n.subType),o=0;o<a.length;o++){var s={};s.ID=n.ID,s.itemType=a[o].type,s.itemSubType=a[o].subType,s.itemAmount=e?2*Number(a[o].amount):a[o].amount,r=o===a.length-1,p.instance.pushToPopupSeq("signIn/signInReward","signinReward",[s,i,r])}else{var c={};c.ID=n.ID,c.itemType=n.rewardType,c.itemSubType=n.subType,c.itemAmount=e?2*Number(n.amount):n.amount,r=!0,p.instance.pushToPopupSeq("signIn/signInReward","signinReward",[c,i,r])}p.instance.hideDialog("signIn/signIn"),this.unschedule(this.showNormalBtnCallback)}},a.receiveClick=function(n){for(var e=this,i=function(){var i=e.arrSignInItemScript[t];if(i.itemInfo.status===f.SIGN_REWARD_STATUS.RECEIVABLE)return i._parent.receiveReward(i.itemInfo,n,(function(){i.markReceived()})),"break"},t=0;t<this.arrSignInItemScript.length;t++){if("break"===i())break}},a.onBtnDoubleReceiveClick=function(){var n=this;h.instance.getOpenRewardType(f.SHARE_FUNCTION.SIGN,(function(e,i){if(e)n.node.getComponent(b).close();else switch(n.openRewardType=i,i){case f.OPEN_REWARD_TYPE.AD:n.showAd();break;case f.OPEN_REWARD_TYPE.SHARE:n.showShare();break;case f.OPEN_REWARD_TYPE.NULL:n.receiveClick(!1)}}))},a.showAd=function(){var n=this;h.instance.showRewardAd((function(e){e||n.receiveClick(!0)}))},a.showShare=function(){var n=this;h.instance.share(f.SHARE_FUNCTION.SIGN,{},(function(e){e||n.receiveClick(!0)}))},a.onBtnNormalReceiveClick=function(){this.onBtnCloseClick()},a.onBtnCloseClick=function(){p.instance.hideDialog("signIn/signIn"),p.instance.hideDialog("signIn/signInReward"),this.unschedule(this.showNormalBtnCallback)},e}(I)).prototype,"prefabItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=e(E.prototype,"iconList",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=e(E.prototype,"ndSeventhItem",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(E.prototype,"ndBtnDoubleReceive",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=e(E.prototype,"arrDay",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),B=e(E.prototype,"ndBtnNormalReceive",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"wrapper",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=E))||T));a._RF.pop()}}}));

System.register("chunks:///_virtual/signInItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./gameLogic.ts","./constants.ts"],(function(t){var i,e,n,s,o,r,a,c,l,u,I,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,a=t.Vec3,c=t.UITransform,l=t.Component},function(t){u=t.playerData},function(t){I=t.GameLogic},function(t){h=t.constants}],execute:function(){var p,f,R,d,E,S,m,b,A,_,T,g,D;o._RF.push({},"9ed24FbGtFK/r/yqUqxT4pv","signInItem",void 0);var w=r.ccclass,N=r.property;t("SignInItem",w("SignInItem")((R=i((f=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),r=0;r<e;r++)o[r]=arguments[r];return i=t.call.apply(t,[this].concat(o))||this,n(i,"lbAmount",R,s(i)),n(i,"spIcon",d,s(i)),n(i,"spPan",E,s(i)),n(i,"sfDiamond",S,s(i)),n(i,"sfGold",m,s(i)),n(i,"sfGift",b,s(i)),n(i,"ndLight",A,s(i)),n(i,"ndTick",_,s(i)),n(i,"ndBtnFillSignIn",T,s(i)),n(i,"ndBtnReceive",g,s(i)),n(i,"ndMenu",D,s(i)),i.isReceived=void 0,i._parent=void 0,i.itemInfo=void 0,i.openRewardType=void 0,i}e(i,t);var o=i.prototype;return o.start=function(){this.isReceived=!1},o.init=function(t,i){var e=this;this._parent=i,this.itemInfo=t,this.setIcon(t.rewardType),this.setStatus(t.status),I.instance.getOpenRewardType(h.SHARE_FUNCTION.FILL_SIGN,(function(t,i){if(!t)switch(e.openRewardType=i,i){case h.OPEN_REWARD_TYPE.AD:case h.OPEN_REWARD_TYPE.SHARE:break;case h.OPEN_REWARD_TYPE.NULL:e.ndBtnFillSignIn.active=!1}}))},o.setIcon=function(t){var i=new a,e=this.spIcon.getComponent(c);switch(t){case h.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,e.width=165,e.height=126,i.set(this.spIcon.node.position),i.y=56,this.spIcon.node.setPosition(i);break;case h.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,e.width=165,e.height=126,i.set(this.spIcon.node.position),i.y=56,this.spIcon.node.setPosition(i);break;case h.REWARD_TYPE.GIFT:this.spIcon.spriteFrame=this.sfGift}this.itemInfo.ID<=6?(i.set(.6,.6,.6),this.spPan.node.setScale(i)):(i.set(this.ndTick.position),i.y=50,this.ndTick.setPosition(i)),i.set(this.ndMenu.position),i.y=-50,this.ndMenu.setPosition(i)},o.setStatus=function(t){switch(t){case h.SIGN_REWARD_STATUS.RECEIVED:this.showItemUI(!1,!0,!1,!1);break;case h.SIGN_REWARD_STATUS.RECEIVABLE:this.showItemUI(!0,!1,!1,!1);break;case h.SIGN_REWARD_STATUS.UNRECEIVABLE:this.showItemUI(!1,!1,!1,!1);break;case h.SIGN_REWARD_STATUS.FILLSIGNIN:this.showItemUI(!1,!1,!0,!1);break;case h.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN:this.showItemUI(!0,!1,!1,!0)}},o.showItemUI=function(t,i,e,n){this.ndLight.active=t,this.ndTick.active=i,this.ndBtnFillSignIn.active=e,this.ndBtnReceive.active=n},o.onBtnReceiveClick=function(){this.itemInfo.status!==h.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN&&this.itemInfo.status!==h.SIGN_REWARD_STATUS.RECEIVABLE||this._parent.receiveReward(this.itemInfo,!1,this.markReceived.bind(this))},o.markReceived=function(){this.itemInfo.status=h.SIGN_REWARD_STATUS.RECEIVED,this.setStatus(this.itemInfo.status)},o.markAfterFillSignIn=function(){this.itemInfo.status=h.SIGN_REWARD_STATUS.AFTER_FILLSIGNIN,this.setStatus(this.itemInfo.status),u.instance.updateSignInFillSignInDays(this.itemInfo.ID,!1)},o.onBtnFillSignInClick=function(){var t=this;switch(this.openRewardType){case h.OPEN_REWARD_TYPE.AD:I.instance.showRewardAd((function(i){i||t.markAfterFillSignIn()}));break;case h.OPEN_REWARD_TYPE.SHARE:I.instance.share(h.SHARE_FUNCTION.FILL_SIGN,{},(function(i){i||t.markAfterFillSignIn()}));break;case h.OPEN_REWARD_TYPE.NULL:}},i}(l)).prototype,"lbAmount",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(f.prototype,"spIcon",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(f.prototype,"spPan",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(f.prototype,"sfDiamond",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(f.prototype,"sfGold",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(f.prototype,"sfGift",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(f.prototype,"ndLight",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(f.prototype,"ndTick",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(f.prototype,"ndBtnFillSignIn",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=i(f.prototype,"ndBtnReceive",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(f.prototype,"ndMenu",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/signinReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./playerData.ts","./clientEvent.ts","./gameLogic.ts","./constants.ts","./localConfig.ts","./resourceUtil.ts","./LanguageData.ts"],(function(e){var t,i,n,a,s,r,o,c,l,u,p,d,h,m,f,g,R,I,b,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){s=e.cclegacy,r=e._decorator,o=e.SpriteFrame,c=e.Sprite,l=e.Label,u=e.Animation,p=e.UITransform,d=e.Component},function(e){h=e.uiManager},function(e){m=e.playerData},function(e){f=e.clientEvent},function(e){g=e.GameLogic},function(e){R=e.constants},function(e){I=e.localConfig},function(e){b=e.resourceUtil},function(e){y=e.t}],execute:function(){var D,v,w,E,A,T,P,S,_,L,G,O,k;s._RF.push({},"332caaRRoVO04/rOFgXW9L6","signinReward",void 0);var F=r.ccclass,N=r.property;e("signInReward",(D=F("signInReward"),v=N(o),w=N(o),E=N(c),A=N(l),T=N(u),D((_=t((S=function(e){function t(){for(var t,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return t=e.call.apply(e,[this].concat(s))||this,n(t,"sfDiamond",_,a(t)),n(t,"sfGold",L,a(t)),n(t,"spIcon",G,a(t)),n(t,"lbRewardValue",O,a(t)),n(t,"aniGetItem",k,a(t)),t.itemInfo=void 0,t.currentDay=void 0,t.callback=void 0,t.isLast=void 0,t.itemType=void 0,t.itemAmount=void 0,t.itemSubType=void 0,t}i(t,e);var s=t.prototype;return s.show=function(e,t,i){var n=this;this.itemInfo=e,this.currentDay=e.ID,this.callback=t,this.isLast=i,this.itemType=e.itemType,this.itemAmount=e.itemAmount,this.itemSubType=e.itemSubType,this.aniGetItem.play("getItemShow"),this.aniGetItem.once(u.EventType.FINISHED,(function(){n.aniGetItem.play("getItemIdle")}),this),this.setRewardPage()},s.setRewardPage=function(){var e=this.spIcon.getComponent(p);switch(this.itemType){case R.REWARD_TYPE.DIAMOND:this.spIcon.spriteFrame=this.sfDiamond,this.lbRewardValue.string=this.itemAmount;break;case R.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.lbRewardValue.string=this.itemAmount,e.width=257,e.height=166;break;case R.REWARD_TYPE.PROP:var t=this.itemSubType,i=I.instance.queryByID("prop",t+"");b.setPropIcon("00"+t,this.spIcon,(function(){})),e.width=168,e.height=168;var n=y("table_prop."+i.name);this.lbRewardValue.string=n+y("")+" x "+this.itemAmount}},s.onBtnReceiveClick=function(){if(this.addReward(),this.isLast){var e=null;g.instance.getOpenRewardType(R.SHARE_FUNCTION.FILL_SIGN,(function(t,i){if(t)e=m.instance.getSignInReceivedInfo().isAllReceived;else switch(i){case R.OPEN_REWARD_TYPE.AD:case R.OPEN_REWARD_TYPE.SHARE:e=m.instance.getSignInReceivedInfo().isAllReceived;break;case R.OPEN_REWARD_TYPE.NULL:e=m.instance.getSignInReceivedInfo().isTodayReceived}})),e?h.instance.hideDialog("signIn/signInReward"):h.instance.showDialog("signIn/signIn")}h.instance.shiftFromPopupSeq("signIn/signInReward")},s.addReward=function(){switch(this.itemType){case R.REWARD_TYPE.DIAMOND:g.instance.addDiamond(this.itemAmount);break;case R.REWARD_TYPE.GOLD:g.instance.addGold(this.itemAmount);break;case R.REWARD_TYPE.PROP:g.instance.addProp(this.itemSubType,this.itemAmount)}this.currentDay&&(m.instance.updateSignInReceivedDays(this.currentDay),f.dispatchEvent("updateSignIn")),this.callback&&this.callback()},t}(d)).prototype,"sfDiamond",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(S.prototype,"sfGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(S.prototype,"spIcon",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"lbRewardValue",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(S.prototype,"aniGetItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=S))||P));s._RF.pop()}}}));

System.register("chunks:///_virtual/stopPropagation.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,i,e;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,i=o._decorator,e=o.Component}],execute:function(){var s;t._RF.push({},"628d0zbx11LV4NaSW232uP9","stopPropagation",void 0);var a=i.ccclass;o("StopPropagation",a("StopPropagation")(s=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var i=t.prototype;return i.onLoad=function(){},i.onEnable=function(){this.node.on("touchstart",(function(o){o.stopPropagation()})),this.node.on("touchend",(function(o){o.stopPropagation()})),this.node.on("touchmove",(function(o){o.stopPropagation()})),this.node.on("touchcancel",(function(o){o.stopPropagation()})),this.node.on("mousedown",(function(o){o.stopPropagation()})),this.node.on("mouseenter",(function(o){o.stopPropagation()})),this.node.on("mousemove",(function(o){o.stopPropagation()})),this.node.on("mouseleave",(function(o){o.stopPropagation()})),this.node.on("mouseup",(function(o){o.stopPropagation()})),this.node.on("mousewheel",(function(o){o.stopPropagation()}))},i.onDisable=function(){this.node.off("touchstart",(function(o){o.stopPropagation()})),this.node.off("touchend",(function(o){o.stopPropagation()})),this.node.off("touchmove",(function(o){o.stopPropagation()})),this.node.off("touchcancel",(function(o){o.stopPropagation()})),this.node.off("mousedown",(function(o){o.stopPropagation()})),this.node.off("mouseenter",(function(o){o.stopPropagation()})),this.node.off("mousemove",(function(o){o.stopPropagation()})),this.node.off("mouseleave",(function(o){o.stopPropagation()})),this.node.off("mouseup",(function(o){o.stopPropagation()})),this.node.off("mousewheel",(function(o){o.stopPropagation()}))},t}(e))||s);t._RF.pop()}}}));

System.register("chunks:///_virtual/storageManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./util.ts"],(function(t){var a,s,e,i,n,o;return{setters:[function(t){a=t.createClass},function(t){s=t.cclegacy,e=t._decorator,i=t.sys,n=t.log},function(t){o=t.util}],execute:function(){var r,c;s._RF.push({},"5689348bSJGyYo12WGa6eeJ","storageManager",void 0);var h=e.ccclass;e.property,t("StorageManager",h("StorageManager")(((c=function(){function t(){this._jsonData={},this._path=null,this.KEY_CONFIG="link",this._markSave=!1,this._saveTimer=-1}var s=t.prototype;return s.start=function(){var t,a=this;(this._jsonData={userId:""},this._path=this._getConfigPath(),i.isNative)?t=jsb.fileUtils.getValueMapFromFile(this._path)[this.KEY_CONFIG]:t=i.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1),t=o.decrypt(t));try{var s=JSON.parse(t);this._jsonData=s}catch(t){}}this._saveTimer=setInterval((function(){a.scheduleSave()}),5e3)},s.setConfigDataWithoutSave=function(t,a){var s=this._jsonData.userId;this._jsonData[s]?this._jsonData[s][t]=a:console.error("no account can not save")},s.setConfigData=function(t,a){this.setConfigDataWithoutSave(t,a),this._markSave=!0},s.getConfigData=function(t){var a=this._jsonData.userId;if(this._jsonData[a]){var s=this._jsonData[a][t];return s||""}return n("no account can not load"),""},s.setGlobalData=function(t,a){this._jsonData[t]=a,this.save()},s.getGlobalData=function(t){return this._jsonData[t]},s.setUserId=function(t){this._jsonData.userId=t,this._jsonData[t]||(this._jsonData[t]={}),this.save()},s.getUserId=function(){return this._jsonData.userId},s.scheduleSave=function(){this._markSave&&this.save()},s.markModified=function(){this._markSave=!0},s.save=function(){var t=JSON.stringify(this._jsonData),a="@"+o.encrypt(t);if(this._markSave=!1,i.isNative){var s={};s[this.KEY_CONFIG]=a,jsb.fileUtils.writeToFile(s,this._getConfigPath())}else{i.localStorage.setItem(this.KEY_CONFIG,a)}},s._getConfigPath=function(){var t=i.platform,a="";return t===i.OS.WINDOWS?a="src/conf":t===i.OS.LINUX?a="./conf":i.isNative?(a=jsb.fileUtils.getWritablePath(),a+="conf"):a="src/conf",a},a(t,null,[{key:"instance",get:function(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}}]),t}())._instance=void 0,r=c))||r);s._RF.pop()}}}));

System.register("chunks:///_virtual/targetCake.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts"],(function(e){var t,r,n,i,a,o,c,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,c=e.Component},function(e){l=e.resourceUtil}],execute:function(){var u,s,p,f;a._RF.push({},"bd95fbKL6dI6r423PTMarGm","targetCake",void 0);var b=o.ccclass,k=o.property;e("TargetCake",b("TargetCake")((p=t((s=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"spCakeIcon",p,i(t)),n(t,"lbCakeNum",f,i(t)),t}return r(t,e),t.prototype.setInfo=function(e){var t=e.split("-");l.setCakeIcon(t[0],this.spCakeIcon,(function(){})),this.lbCakeNum.string=t[1]},t}(c)).prototype,"spCakeIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=t(s.prototype,"lbCakeNum",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=s))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(t){var i,n,e,o,r,s,a,c,l,p,u,h,y,f;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.inheritsLoose,e=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Label,c=t.UIOpacity,l=t.UITransform,p=t.isValid,u=t.tween,h=t.Vec3,y=t.Component},function(t){f=t.poolManager}],execute:function(){var g,d,b,m,I,v,w;r._RF.push({},"c93c6JdRlZBq6pCuKII6jKN","tips",void 0);var B=s.ccclass,O=s.property;t("tips",(g=B("tips"),d=O(a),b=O(c),g((v=i((I=function(t){function i(){for(var i,n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,e(i,"lbTips",v,o(i)),e(i,"UIOpacityBg",w,o(i)),i}return n(i,t),i.prototype.show=function(t,i){var n,e,o,r=this,s=null==(n=this.lbTips)||null==(e=n.node)||null==(o=e.getComponent(l))?void 0:o.contentSize;p(s)?(this.lbTips.string=t,this.UIOpacityBg.opacity=255,this.node.setPosition(0,220,0),this.scheduleOnce((function(){u(r.node).to(.9,{position:new h(0,450,0)},{easing:"smooth"}).call((function(){i&&i(),f.instance.putNode(r.node)})).start(),u(r.UIOpacityBg).to(.6,{opacity:220},{easing:"smooth"}).to(.3,{opacity:0},{easing:"smooth"}).start()}),.8)):f.instance.putNode(this.node)},i}(y)).prototype,"lbTips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(I.prototype,"UIOpacityBg",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=I))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./poolManager.ts","./animationUI.ts","./tips.ts"],(function(i){var t,o,n,e,a,s,r,p,h;return{setters:[function(i){t=i.createClass},function(i){o=i.cclegacy,n=i._decorator,e=i.isValid,a=i.find},function(i){s=i.resourceUtil},function(i){r=i.poolManager},function(i){p=i.AnimationUI},function(i){h=i.tips}],execute:function(){var c,u;o._RF.push({},"f9384FYDp5GqoW+CtrCla3U","uiManager",void 0);var l=n.ccclass;n.property,i("uiManager",l("uiManager")(((u=function(){function i(){this._dictSharedPanel={},this._dictLoading={},this._arrPopupDialog=[],this._showTipsTime=0}var o=i.prototype;return o.isDialogVisible=function(i){if(!this._dictSharedPanel.hasOwnProperty(i))return!1;var t=this._dictSharedPanel[i];return e(t)&&t.active&&t.parent},o.showDialog=function(i,t,o){var n=this;if(!this._dictLoading[i]){var r=i.lastIndexOf("/"),p=i.slice(r+1);if(t||(t=[]),this._dictSharedPanel.hasOwnProperty(i)){var h=this._dictSharedPanel[i];if(e(h)){h.parent=a("Canvas/Wrapper"),h.active=!0;var c=h.getComponent(p),u=h.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(c&&c.show)c.show.apply(c,t),o&&o(c);else{if(!u||!u.show)throw"查找不到脚本文件"+p;u.show.apply(u,t),o&&o(u)}return}}this._dictLoading[i]=!0,s.createUI(i,(function(e,a){var s=!1;if(n._dictLoading[i]||(s=!0),n._dictLoading[i]=!1,e)console.error(e);else{n._dictSharedPanel[i]=a;var r=a.getComponent(p),h=a.getComponent(p.charAt(0).toUpperCase()+p.slice(1));if(r&&r.show)r.show.apply(r,t),o&&o(r);else{if(!h||!h.show)throw"查找不到脚本文件"+p;h.show.apply(h,t),o&&o(h)}s&&n.hideDialog(i)}}))}},o.hideDialog=function(i,t){if(this._dictSharedPanel.hasOwnProperty(i)){var o=this._dictSharedPanel[i];if(o&&e(o)){var n=o.getComponent(p);n?n.close((function(){o.parent=null,t&&"function"==typeof t&&t()})):(o.parent=null,t&&"function"==typeof t&&t())}else t&&"function"==typeof t&&t()}this._dictLoading[i]=!1},o.pushToPopupSeq=function(i,t,o){var n={panelPath:i,scriptName:t,param:o,isShow:!1};this._arrPopupDialog.push(n),this._checkPopupSeq()},o.insertToPopupSeq=function(i,t,o){var n={panelPath:t,param:o,isShow:!1};this._arrPopupDialog.splice(i,0,n)},o.shiftFromPopupSeq=function(i){var t=this;this.hideDialog(i,(function(){t._arrPopupDialog[0]&&t._arrPopupDialog[0].panelPath===i&&(t._arrPopupDialog.shift(),t._checkPopupSeq())}))},o._checkPopupSeq=function(){if(this._arrPopupDialog.length>0){var i=this._arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this._arrPopupDialog[0].isShow=!0)}},o.showTips=function(i,t){var o=this,n=String(i),e=function(){o._showTipsAni(n,t)},a=Date.now();if(a-this._showTipsTime<800){var s=800-(a-this._showTipsTime);setTimeout((function(){e()}),s),this._showTipsTime=a+s}else e(),this._showTipsTime=a},o._showTipsAni=function(i,t){s.getUIPrefabRes("common/tips",(function(o,n){o||r.instance.getNode(n,a("Canvas")).getComponent(h).show(i,t)}))},t(i,null,[{key:"instance",get:function(){return this._instance||(this._instance=new i),this._instance}}]),i}())._instance=void 0,c=u))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/unLockProp.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./clientEvent.ts","./constants.ts","./gameLogic.ts","./uiManager.ts","./resourceUtil.ts","./localConfig.ts"],(function(e){var t,n,i,o,r,c,a,s,l,p,u,f,h,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,c=e._decorator,a=e.Component},function(e){s=e.playerData},function(e){l=e.clientEvent},function(e){p=e.constants},function(e){u=e.GameLogic},function(e){f=e.uiManager},function(e){h=e.resourceUtil},function(e){b=e.localConfig}],execute:function(){var P,d,v,R,I,m,g,w,E,_;r._RF.push({},"44716UPwaNDPLwthoATscTT","unLockProp",void 0);var y=c.ccclass,k=c.property;e("UnLockProp",y("UnLockProp")((v=t((d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return t=e.call.apply(e,[this].concat(r))||this,i(t,"lbNum",v,o(t)),i(t,"lbName",R,o(t)),i(t,"spIcon",I,o(t)),i(t,"spBtnReceive",m,o(t)),i(t,"sfReceive",g,o(t)),i(t,"sfAd",w,o(t)),i(t,"sfShare",E,o(t)),i(t,"ndBtnGoStart",_,o(t)),t._fightUI=void 0,t.callback=void 0,t.level=void 0,t.unLoclProp=void 0,t.propItem=void 0,t.openRewardType=void 0,t}n(t,e);var r=t.prototype;return r.show=function(e,t){var n=this;this._fightUI=t,this.callback=e,this.level=s.instance.getCurrentLevelInfo().ID,this.unLoclProp=p.UNLOCK_PROP_ID[this.level-2],this.propItem=b.instance.queryByID("prop",this.unLoclProp),u.instance.getOpenRewardType(p.SHARE_FUNCTION.FIGHT,(function(e,t){if(e)n.close();else switch(n.openRewardType=t,t){case p.OPEN_REWARD_TYPE.AD:n.spBtnReceive.spriteFrame=n.sfAd;break;case p.OPEN_REWARD_TYPE.SHARE:n.spBtnReceive.spriteFrame=n.sfShare;break;case p.OPEN_REWARD_TYPE.NULL:n.spBtnReceive.spriteFrame=n.sfReceive}})),this.ndBtnGoStart.active=!1,this.scheduleOnce((function(){n.ndBtnGoStart.active=!0}),p.NORMAL_SHOW_TIME),this.init()},r.init=function(){this.lbNum.string=1..toString(),this.lbName.string=this.propItem.name,h.setPropIcon(this.propItem.icon,this.spIcon,(function(){}))},r.onBtnReceiveClick=function(){var e=this;switch(this.openRewardType){case p.OPEN_REWARD_TYPE.AD:u.instance.showRewardAd((function(t){t||(e.showUnlockProp(),u.instance.addProp(e.propItem.ID,1))}));break;case p.OPEN_REWARD_TYPE.SHARE:u.instance.share(p.SHARE_FUNCTION.FIGHT,{},(function(t){t||(e.showUnlockProp(),u.instance.addProp(e.propItem.ID,1))}));break;case p.OPEN_REWARD_TYPE.NULL:this.showUnlockProp(),u.instance.addProp(this.propItem.ID,1)}},r.showUnlockProp=function(){var e=this;this.close(),this._fightUI.showUnlockProp(this.propItem.ID,(function(){s.instance.updateUnLockInfo(e.propItem.ID),l.dispatchEvent("updateUnlockProp"),e.callback()}))},r.onBtnCloseClick=function(){this.close(),this.showUnlockProp()},r.close=function(){f.instance.hideDialog("fight/unLockProp")},t}(a)).prototype,"lbNum",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(d.prototype,"lbName",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(d.prototype,"spIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(d.prototype,"spBtnReceive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(d.prototype,"sfReceive",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(d.prototype,"sfAd",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(d.prototype,"sfShare",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(d.prototype,"ndBtnGoStart",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=d))||P);r._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(e){var r,t;return{setters:[function(e){r=e.cclegacy,t=e._decorator}],execute:function(){var n;r._RF.push({},"51238kLGAFBiLoz3gxcwxtH","util",void 0);var o=t.ccclass;t.property,e("util",o("util")(n=function(){function e(){}return e.clone=function(e){if(null===e||"object"!=typeof e)return e;var r={};for(var t in e.constructor===Array&&(r=[]),e)e.hasOwnProperty(t)&&(r[t]=this.clone(e[t]));return r},e.objectToArray=function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&r.push(e[t]);return r},e.arrayToObject=function(e,r){var t={};for(var n in e)e.hasOwnProperty(n)&&e[n][r]&&(t[e[n][r]]=e[n]);return t},e.getWeightRandIndex=function(e,r){for(var t=Math.floor(Math.random()*r),n=0,o=0;o<e.length&&!(t<(n+=e[o]));o++);return o},e.getRandomNFromM=function(e,r){for(var t=[],n=0,o=0;o<r&&!(o>=e+1);){n=this.getRandomInt(0,e);for(var a=0,i=0;i<o;i++)if(t[i]===n){a=1;break}0===a&&(t[o]=n,o++)}return t},e.getRandomInt=function(e,r){var t=Math.random()*(r-e+1)+e;return Math.floor(t)},e.getStringLength=function(e){for(var r=e,t=0,n=0,o=r.length;n<o;n++){t+=r.charCodeAt(n)<=255?1:2}return Math.ceil(t/2)},e.isEmptyObject=function(e){var r=!0;if(e&&e.constructor===Object){for(var t in e)if(e.hasOwnProperty(t)){r=!1;break}}else r=!1;return r},e.isNewDay=function(e){var r=new Date(e),t=new Date,n=r.getYear(),o=r.getMonth(),a=r.getDate(),i=t.getYear(),f=t.getMonth(),u=t.getDate();return i>n||(f>o||u>a)},e.getPropertyCount=function(e){var r,t=0;for(r in e)e.hasOwnProperty(r)&&t++;return t},e.difference=function(e,r){var t=[];if(e.constructor!==Array||r.constructor!==Array)return t;for(var n=e.length,o=0;o<n;o++)-1===r.indexOf(e[o])&&t.push(e[o]);return t},e._stringToArray=function(e){var r,t="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+t+"]"),a="\\ud83c[\\udffb-\\udfff]",i="[\\ufe0e\\ufe0f]?",f="["+n+"]",u="(?:"+f+"|"+a+")"+"?",h="[\\ud800-\\udfff]",c="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",l=i+u+("(?:\\u200d(?:"+[c,g,d].join("|")+")"+i+u+")*"),s="(?:"+[c+f+"?",f,g,d,h].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+l,"g");return r=e,o.test(r)?function(e){return e.match(v)||[]}(e):function(e){return e.split("")}(e)},e.simulationUUID=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.trim=function(e){return e.replace(/(^\s*)|(\s*$)/g,"")},e.isNowValid=function(e,r){var t=new Date(e),n=new Date(r),o=!1;if(t.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>t}return o},e.getDeltaDays=function(e,r){e=new Date(e),r=new Date(r);var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),a=r.getFullYear(),i=r.getMonth()+1,f=r.getDate();e=new Date(t+"/"+n+"/"+o+" GMT+0800").getTime();var u=(r=new Date(a+"/"+i+"/"+f+" GMT+0800").getTime())-e;return Math.floor(u/864e5)},e.getMin=function(e){var r=null;if(e.constructor===Array)for(var t=e.length,n=0;n<t;n++)r=0===n?Number(e[0]):r>Number(e[n])?Number(e[n]):r;return r},e.formatTwoDigits=function(e){return(Array(2).join(0)+e).slice(-2)},e.formatDate=function(e,r){var t={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var n in/(y+)/.test(r)&&(r=r.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+n+")").test(r)&&(r=r.replace(RegExp.$1,1===RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return r},e.getDay=function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()},e.formatName=function(e,r){r=r||6;var t=this._stringToArray(e),n="";if(t.length>r){for(var o=0;o<r;o++)n+=t[o];n+="..."}else n=e;return n},e.formatMoney=function(e){for(var r=["","K","M","G","T","P","E","Z","Y","B","N","D"],t="",n=0;n<r.length;n++){if(!(e>=1e4)){t=Math.floor(e)+r[n];break}e/=1e3}return""===t&&(t=Math.floor(e)+"U"),t},e.formatValue=function(e){for(var r=[],t="",n=0;n<26;n++)r.push(String.fromCharCode(97+n));for(var o=0;o<r.length;o++){if(!(e>=1e4)){t=Math.floor(e)+r[o];break}e/=1e3}return t},e.formatTimeForSecond=function(e,r){void 0===r&&(r=!1);var t="",n=e%60,o=Math.floor(e/60);o=o<0?0:o;var a=Math.floor(o/60),i=o%60;return a>0?(t+=a>9?a.toString():"0"+a,t+=":"):t+="00:",t+=i>9?i.toString():"0"+i,r||(t+=":",t+=n>9?n.toString():"0"+n),t},e.formatTimeForMillisecond=function(e){var r=Math.floor(e/1e3%60),t=Math.floor(e/1e3/60%60);return{hour:Math.floor(e/1e3/60/60),minute:t,second:r}},e.rand=function(e){for(var r=this.clone(e),t=r.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),o=r[n];r[n]=r[t],r[t]=o}return r},e.getOffsetMimutes=function(e,r){var t=r-e;return Math.floor(t%36e5/6e4)},e.formatNumToFixed=function(e,r){return void 0===r&&(r=0),Number(e.toFixed(r))},e.lerp=function(e,r,t){void 0===t&&(t=.25);var n=r;return e>r?n=r+(e-r)*t:e<r&&(n=r-(r-e)*t),n},e.decrypt=function(e){var r=6;e.length%2==0&&(r=7);for(var t="",n=0;n<e.length-r;n+=2)t+=e[n+1],t+=e[n];return t+=e.slice(e.length-r+1),t=this._base64Decode(t)},e.encrypt=function(e){var r=this._base64encode(e),t=6;r.length%2==0&&(t=7);for(var n="",o=0;o<(r.length-t+1)/2;o++)n+=r[2*o+1],n+=r[2*o];return n+=r.slice(r.length-t+1)},e._base64encode=function(e){var r,t,n,o,a,i,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h="",c=0;for(e=this._utf8Encode(e);c<e.length;)o=(r=e.charCodeAt(c++))>>2,a=(3&r)<<4|(t=e.charCodeAt(c++))>>4,i=(15&t)<<2|(n=e.charCodeAt(c++))>>6,f=63&n,isNaN(t)?i=f=64:isNaN(n)&&(f=64),h=h+u.charAt(o)+u.charAt(a)+u.charAt(i)+u.charAt(f);return h},e._utf8Encode=function(e){e=e.replace(/\r\n/g,"\n");for(var r="",t=0;t<e.length;t++){var n=e.charCodeAt(t);n<128?r+=String.fromCharCode(n):n>127&&n<2048?(r+=String.fromCharCode(n>>6|192),r+=String.fromCharCode(63&n|128)):(r+=String.fromCharCode(n>>12|224),r+=String.fromCharCode(n>>6&63|128),r+=String.fromCharCode(63&n|128))}return r},e._utf8Decode=function(e){for(var r="",t=0,n=0,o=0,a=0;t<e.length;)(n=e.charCodeAt(t))<128?(r+=String.fromCharCode(n),t++):n>191&&n<224?(o=e.charCodeAt(t+1),r+=String.fromCharCode((31&n)<<6|63&o),t+=2):(o=e.charCodeAt(t+1),a=e.charCodeAt(t+2),r+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),t+=3);return r},e._base64Decode=function(e){var r,t,n,o,a,i,f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)r=f.indexOf(e.charAt(h++))<<2|(o=f.indexOf(e.charAt(h++)))>>4,t=(15&o)<<4|(a=f.indexOf(e.charAt(h++)))>>2,n=(3&a)<<6|(i=f.indexOf(e.charAt(h++))),u+=String.fromCharCode(r),64!=a&&(u+=String.fromCharCode(t)),64!=i&&(u+=String.fromCharCode(n));return u=this._utf8Decode(u)},e.checkIsLowPhone=function(){if(window.wx){var e=-1,r=window.wx.getSystemInfoSync();if(r.system.indexOf("iOS")>=0){for(var t=r.model,n=["iPhone1,1","iPhone1,2","iPhone2,1","iPhone3,1","iPhone3,3","iPhone4,1","iPhone5,1","iPhone5,2","iPhone5,3","iPhone5,4","iPhone6,1","iPhone6,2"],o=["iPhone6,2","iPhone7,1","iPhone7,2","iPhone8,1","iPhone8,2","iPhone8,4"],a=["iPhone9,1","iPhone9,2","iPhone9,3","iPhone9,4","iPhone10,1","iPhone10,2","iPhone10,3","iPhone10,4","iPhone10,5","iPhone10,6"],i=["iPhone11,2","iPhone11,4","iPhone11,6","iPhone11,8","iPhone12,1","iPhone12,3","iPhone12,5","iPhone12,8"],f=0;f<n.length;f++)t.indexOf(n[f])>=0&&(e=5);for(var u=0;u<o.length;u++)t.indexOf(o[u])>=0&&(e=10);for(var h=0;h<a.length;h++)t.indexOf(a[h])>=0&&(e=20);for(var c=0;c<i.length;c++)t.indexOf(i[c])>=0&&(e=30)}else e=r.benchmarkLevel;return e<22}return!1},e}())||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/utils.ts",["cc"],(function(r){var t;return{setters:[function(r){t=r.cclegacy}],execute:function(){t._RF.push({},"04ef58UptZE3aEqQ2I+onJb","utils",void 0);r("utils",{clone:function(r){if(null===r||"object"!=typeof r)return r;var t={};for(var e in r.constructor===Array&&(t=[]),r)r.hasOwnProperty(e)&&(t[e]=this.clone(r[e]));return t},objectToArray:function(r){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(r[e]);return t},arrayToObject:function(r,t){var e={};for(var n in r)r.hasOwnProperty(n)&&r[n][t]&&(e[r[n][t]]=r[n]);return e},getWeightRandIndex:function(r,t){for(var e=Math.floor(Math.random()*t),n=0,o=0;o<r.length&&!(e<(n+=r[o]));o++);return o},getRandomNFromM:function(r,t){for(var e=[],n=0,o=0;o<t&&!(o>=r+1);){n=this.getRandomInt(0,r);for(var a=0,f=0;f<o;f++)if(e[f]===n){a=1;break}0===a&&(e[o]=n,o++)}return e},getRandomInt:function(r,t){var e=Math.random()*(t-r+1)+r;return Math.floor(e)},getStringLength:function(r){for(var t=r,e=0,n=0,o=t.length;n<o;n++){e+=t.charCodeAt(n)<=255?1:2}return Math.ceil(e/2)},isEmptyObject:function(r){var t=!0;if(r&&r.constructor===Object){for(var e in r)if(r.hasOwnProperty(e)){t=!1;break}}else t=!1;return t},isNewDay:function(r){var t=new Date(r),e=new Date,n=t.getYear(),o=t.getMonth(),a=t.getDate(),f=e.getYear(),u=e.getMonth(),i=e.getDate();return f>n||(u>o||i>a)},getPropertyCount:function(r){var t,e=0;for(t in r)r.hasOwnProperty(t)&&e++;return e},difference:function(r,t){var e=[];if(r.constructor!==Array||t.constructor!==Array)return e;for(var n=r.length,o=0;o<n;o++)-1===t.indexOf(r[o])&&e.push(r[o]);return e},base64encode:function(r){var t,e,n,o,a,f,u,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",h=0;for(r=this.utf8Encode(r);h<r.length;)o=(t=r.charCodeAt(h++))>>2,a=(3&t)<<4|(e=r.charCodeAt(h++))>>4,f=(15&e)<<2|(n=r.charCodeAt(h++))>>6,u=63&n,isNaN(e)?f=u=64:isNaN(n)&&(u=64),c=c+i.charAt(o)+i.charAt(a)+i.charAt(f)+i.charAt(u);return c},utf8Encode:function(r){r=r.replace(/\r\n/g,"\n");for(var t="",e=0;e<r.length;e++){var n=r.charCodeAt(e);n<128?t+=String.fromCharCode(n):n>127&&n<2048?(t+=String.fromCharCode(n>>6|192),t+=String.fromCharCode(63&n|128)):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128),t+=String.fromCharCode(63&n|128))}return t},base64Decode:function(r){var t,e,n,o,a,f,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="",c=0;for(r=r.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<r.length;)t=u.indexOf(r.charAt(c++))<<2|(o=u.indexOf(r.charAt(c++)))>>4,e=(15&o)<<4|(a=u.indexOf(r.charAt(c++)))>>2,n=(3&a)<<6|(f=u.indexOf(r.charAt(c++))),i+=String.fromCharCode(t),64!=a&&(i+=String.fromCharCode(e)),64!=f&&(i+=String.fromCharCode(n));return i=this.utf8Decode(i)},utf8Decode:function(r){for(var t="",e=0,n=0,o=0,a=0;e<r.length;)(n=r.charCodeAt(e))<128?(t+=String.fromCharCode(n),e++):n>191&&n<224?(o=r.charCodeAt(e+1),t+=String.fromCharCode((31&n)<<6|63&o),e+=2):(o=r.charCodeAt(e+1),a=r.charCodeAt(e+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),e+=3);return t},stringToArray:function(r){var t,e="\\ufe0e\\ufe0f",n="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",o=RegExp("[\\u200d\\ud800-\\udfff"+n+e+"]"),a="\\ud83c[\\udffb-\\udfff]",f="[\\ufe0e\\ufe0f]?",u="["+n+"]",i="(?:"+u+"|"+a+")"+"?",c="[\\ud800-\\udfff]",h="[^\\ud800-\\udfff]",g="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",l=f+i+("(?:\\u200d(?:"+[h,g,d].join("|")+")"+f+i+")*"),s="(?:"+[h+u+"?",u,g,d,c].join("|")+")",v=RegExp(a+"(?="+a+")|"+s+l,"g");return t=r,o.test(t)?function(r){return r.match(v)||[]}(r):function(r){return r.split("")}(r)},simulationUUID:function(){function r(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},trim:function(r){return r.replace(/(^\s*)|(\s*$)/g,"")},isNowValid:function(r,t){var e=new Date(r),n=new Date(t),o=!1;if(e.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){var a=new Date;o=a<n&&a>e}return o},getDeltaDays:function(r,t){r=new Date(r),t=new Date(t);var e=r.getFullYear(),n=r.getMonth()+1,o=r.getDate(),a=t.getFullYear(),f=t.getMonth()+1,u=t.getDate();r=new Date(e+"/"+n+"/"+o+" GMT+0800").getTime();var i=(t=new Date(a+"/"+f+"/"+u+" GMT+0800").getTime())-r;return Math.floor(i/864e5)},getMin:function(r){var t=null;if(r.constructor===Array)for(var e=r.length,n=0;n<e;n++)t=0===n?Number(r[0]):t>Number(r[n])?Number(r[n]):t;return t},formatTwoDigits:function(r){return(Array(2).join(0)+r).slice(-2)},getDay:function(){var r=new Date;return r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()},formatName:function(r,t){t=t||6;var e=this.stringToArray(r),n="";if(e.length>t){for(var o=0;o<t;o++)n+=e[o];n+="..."}else n=r;return n},formatMoney:function(r){for(var t=["","K","M","G","T","P","E","Z","Y","B","N","D"],e="",n=0;n<t.length;n++){if(!(r>=1e4)){e=Math.floor(r)+t[n];break}r/=1e3}return""===e&&(e=Math.floor(r)+"U"),e},formatTimeForSecond:function(r){var t="",e=r%60,n=Math.floor(r/60);n=n<0?0:n;var o=Math.floor(n/60),a=n%60;return o>0&&(t+=o>9?o.toString():"0"+o,t+=":"),t+=a>9?a.toString():"0"+a,t+=":",t+=e>9?e.toString():"0"+e},formatTimeForMillisecond:function(r){var t=Math.floor(r/1e3%60),e=Math.floor(r/1e3/60%60);return Math.floor(r/1e3/60/60)+":"+e+":"+t},encrypt:function(r){var t=this.base64encode(r),e=6;t.length%2==0&&(e=7);for(var n="",o=0;o<(t.length-e+1)/2;o++)n+=t[2*o+1],n+=t[2*o];return n+=t.slice(t.length-e+1)},decrypt:function(r){var t=6;r.length%2==0&&(t=7);for(var e="",n=0;n<r.length-t;n+=2)e+=r[n+1],e+=r[n];return e+=r.slice(r.length-t+1),e=this.base64Decode(e)}});t._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});